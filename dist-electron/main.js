"use strict";var nf=Object.defineProperty;var Qi=e=>{throw TypeError(e)};var sf=(e,t,r)=>t in e?nf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var J=(e,t,r)=>sf(e,typeof t!="symbol"?t+"":t,r),Zs=(e,t,r)=>t.has(e)||Qi("Cannot "+r);var ne=(e,t,r)=>(Zs(e,t,"read from private field"),r?r.call(e):t.get(e)),yt=(e,t,r)=>t.has(e)?Qi("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Be=(e,t,r,n)=>(Zs(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Pt=(e,t,r)=>(Zs(e,t,"access private method"),r);const C=require("electron"),z=require("path"),q=require("fs"),_e=require("node:process"),de=require("node:path"),Re=require("node:util"),Q=require("node:fs"),lr=require("node:crypto"),ec=require("node:assert"),Zo=require("node:os"),of=require("node:events"),af=require("node:stream"),He=require("node:fs/promises"),nn=require("child_process"),Nr=require("crypto");function cf(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const r in e)if(r!=="default"){const n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:()=>e[r]})}}return t.default=e,Object.freeze(t)}const Z=cf(de),Er=e=>{const t=typeof e;return e!==null&&(t==="object"||t==="function")},Al=new Set(["__proto__","prototype","constructor"]),kl=1e6,lf=e=>e>="0"&&e<="9";function Cl(e){if(e==="0")return!0;if(/^[1-9]\d*$/.test(e)){const t=Number.parseInt(e,10);return t<=Number.MAX_SAFE_INTEGER&&t<=kl}return!1}function Qs(e,t){return Al.has(e)?!1:(e&&Cl(e)?t.push(Number.parseInt(e,10)):t.push(e),!0)}function uf(e){if(typeof e!="string")throw new TypeError(`Expected a string, got ${typeof e}`);const t=[];let r="",n="start",s=!1,o=0;for(const a of e){if(o++,s){r+=a,s=!1;continue}if(a==="\\"){if(n==="index")throw new Error(`Invalid character '${a}' in an index at position ${o}`);if(n==="indexEnd")throw new Error(`Invalid character '${a}' after an index at position ${o}`);s=!0,n=n==="start"?"property":n;continue}switch(a){case".":{if(n==="index")throw new Error(`Invalid character '${a}' in an index at position ${o}`);if(n==="indexEnd"){n="property";break}if(!Qs(r,t))return[];r="",n="property";break}case"[":{if(n==="index")throw new Error(`Invalid character '${a}' in an index at position ${o}`);if(n==="indexEnd"){n="index";break}if(n==="property"||n==="start"){if((r||n==="property")&&!Qs(r,t))return[];r=""}n="index";break}case"]":{if(n==="index"){if(r==="")r=(t.pop()||"")+"[]",n="property";else{const i=Number.parseInt(r,10);!Number.isNaN(i)&&Number.isFinite(i)&&i>=0&&i<=Number.MAX_SAFE_INTEGER&&i<=kl&&r===String(i)?t.push(i):t.push(r),r="",n="indexEnd"}break}if(n==="indexEnd")throw new Error(`Invalid character '${a}' after an index at position ${o}`);r+=a;break}default:{if(n==="index"&&!lf(a))throw new Error(`Invalid character '${a}' in an index at position ${o}`);if(n==="indexEnd")throw new Error(`Invalid character '${a}' after an index at position ${o}`);n==="start"&&(n="property"),r+=a}}}switch(s&&(r+="\\"),n){case"property":{if(!Qs(r,t))return[];break}case"index":throw new Error("Index was not closed");case"start":{t.push("");break}}return t}function js(e){if(typeof e=="string")return uf(e);if(Array.isArray(e)){const t=[];for(const[r,n]of e.entries()){if(typeof n!="string"&&typeof n!="number")throw new TypeError(`Expected a string or number for path segment at index ${r}, got ${typeof n}`);if(typeof n=="number"&&!Number.isFinite(n))throw new TypeError(`Path segment at index ${r} must be a finite number, got ${n}`);if(Al.has(n))return[];typeof n=="string"&&Cl(n)?t.push(Number.parseInt(n,10)):t.push(n)}return t}return[]}function tc(e,t,r){if(!Er(e)||typeof t!="string"&&!Array.isArray(t))return r===void 0?e:r;const n=js(t);if(n.length===0)return r;for(let s=0;s<n.length;s++){const o=n[s];if(e=e[o],e==null){if(s!==n.length-1)return r;break}}return e===void 0?r:e}function Dn(e,t,r){if(!Er(e)||typeof t!="string"&&!Array.isArray(t))return e;const n=e,s=js(t);if(s.length===0)return e;for(let o=0;o<s.length;o++){const a=s[o];if(o===s.length-1)e[a]=r;else if(!Er(e[a])){const c=typeof s[o+1]=="number";e[a]=c?[]:{}}e=e[a]}return n}function df(e,t){if(!Er(e)||typeof t!="string"&&!Array.isArray(t))return!1;const r=js(t);if(r.length===0)return!1;for(let n=0;n<r.length;n++){const s=r[n];if(n===r.length-1)return Object.hasOwn(e,s)?(delete e[s],!0):!1;if(e=e[s],!Er(e))return!1}}function eo(e,t){if(!Er(e)||typeof t!="string"&&!Array.isArray(t))return!1;const r=js(t);if(r.length===0)return!1;for(const n of r){if(!Er(e)||!(n in e))return!1;e=e[n]}return!0}const Gt=Zo.homedir(),Qo=Zo.tmpdir(),{env:Cr}=_e,ff=e=>{const t=de.join(Gt,"Library");return{data:de.join(t,"Application Support",e),config:de.join(t,"Preferences",e),cache:de.join(t,"Caches",e),log:de.join(t,"Logs",e),temp:de.join(Qo,e)}},hf=e=>{const t=Cr.APPDATA||de.join(Gt,"AppData","Roaming"),r=Cr.LOCALAPPDATA||de.join(Gt,"AppData","Local");return{data:de.join(r,e,"Data"),config:de.join(t,e,"Config"),cache:de.join(r,e,"Cache"),log:de.join(r,e,"Log"),temp:de.join(Qo,e)}},mf=e=>{const t=de.basename(Gt);return{data:de.join(Cr.XDG_DATA_HOME||de.join(Gt,".local","share"),e),config:de.join(Cr.XDG_CONFIG_HOME||de.join(Gt,".config"),e),cache:de.join(Cr.XDG_CACHE_HOME||de.join(Gt,".cache"),e),log:de.join(Cr.XDG_STATE_HOME||de.join(Gt,".local","state"),e),temp:de.join(Qo,t,e)}};function pf(e,{suffix:t="nodejs"}={}){if(typeof e!="string")throw new TypeError(`Expected a string, got ${typeof e}`);return t&&(e+=`-${t}`),_e.platform==="darwin"?ff(e):_e.platform==="win32"?hf(e):mf(e)}const kt=(e,t)=>{const{onError:r}=t;return function(...s){return e.apply(void 0,s).catch(r)}},Nt=(e,t)=>{const{onError:r}=t;return function(...s){try{return e.apply(void 0,s)}catch(o){return r(o)}}},yf=250,Ct=(e,t)=>{const{isRetriable:r}=t;return function(s){const{timeout:o}=s,a=s.interval??yf,i=Date.now()+o;return function c(...d){return e.apply(void 0,d).catch(u=>{if(!r(u)||Date.now()>=i)throw u;const f=Math.round(a*Math.random());return f>0?new Promise(y=>setTimeout(y,f)).then(()=>c.apply(void 0,d)):c.apply(void 0,d)})}}},Mt=(e,t)=>{const{isRetriable:r}=t;return function(s){const{timeout:o}=s,a=Date.now()+o;return function(...c){for(;;)try{return e.apply(void 0,c)}catch(d){if(!r(d)||Date.now()>=a)throw d;continue}}}},Mr={isChangeErrorOk:e=>{if(!Mr.isNodeError(e))return!1;const{code:t}=e;return t==="ENOSYS"||!$f&&(t==="EINVAL"||t==="EPERM")},isNodeError:e=>e instanceof Error,isRetriableError:e=>{if(!Mr.isNodeError(e))return!1;const{code:t}=e;return t==="EMFILE"||t==="ENFILE"||t==="EAGAIN"||t==="EBUSY"||t==="EACCESS"||t==="EACCES"||t==="EACCS"||t==="EPERM"},onChangeError:e=>{if(!Mr.isNodeError(e))throw e;if(!Mr.isChangeErrorOk(e))throw e}},Fn={onError:Mr.onChangeError},Ye={onError:()=>{}},$f=_e.getuid?!_e.getuid():!1,ke={isRetriable:Mr.isRetriableError},De={attempt:{chmod:kt(Re.promisify(Q.chmod),Fn),chown:kt(Re.promisify(Q.chown),Fn),close:kt(Re.promisify(Q.close),Ye),fsync:kt(Re.promisify(Q.fsync),Ye),mkdir:kt(Re.promisify(Q.mkdir),Ye),realpath:kt(Re.promisify(Q.realpath),Ye),stat:kt(Re.promisify(Q.stat),Ye),unlink:kt(Re.promisify(Q.unlink),Ye),chmodSync:Nt(Q.chmodSync,Fn),chownSync:Nt(Q.chownSync,Fn),closeSync:Nt(Q.closeSync,Ye),existsSync:Nt(Q.existsSync,Ye),fsyncSync:Nt(Q.fsync,Ye),mkdirSync:Nt(Q.mkdirSync,Ye),realpathSync:Nt(Q.realpathSync,Ye),statSync:Nt(Q.statSync,Ye),unlinkSync:Nt(Q.unlinkSync,Ye)},retry:{close:Ct(Re.promisify(Q.close),ke),fsync:Ct(Re.promisify(Q.fsync),ke),open:Ct(Re.promisify(Q.open),ke),readFile:Ct(Re.promisify(Q.readFile),ke),rename:Ct(Re.promisify(Q.rename),ke),stat:Ct(Re.promisify(Q.stat),ke),write:Ct(Re.promisify(Q.write),ke),writeFile:Ct(Re.promisify(Q.writeFile),ke),closeSync:Mt(Q.closeSync,ke),fsyncSync:Mt(Q.fsyncSync,ke),openSync:Mt(Q.openSync,ke),readFileSync:Mt(Q.readFileSync,ke),renameSync:Mt(Q.renameSync,ke),statSync:Mt(Q.statSync,ke),writeSync:Mt(Q.writeSync,ke),writeFileSync:Mt(Q.writeFileSync,ke)}},gf="utf8",rc=438,_f=511,vf={},wf=_e.geteuid?_e.geteuid():-1,Ef=_e.getegid?_e.getegid():-1,bf=1e3,Sf=!!_e.getuid;_e.getuid&&_e.getuid();const nc=128,Pf=e=>e instanceof Error&&"code"in e,sc=e=>typeof e=="string",to=e=>e===void 0,Nf=_e.platform==="linux",Ml=_e.platform==="win32",ea=["SIGHUP","SIGINT","SIGTERM"];Ml||ea.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");Nf&&ea.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT");class Rf{constructor(){this.callbacks=new Set,this.exited=!1,this.exit=t=>{if(!this.exited){this.exited=!0;for(const r of this.callbacks)r();t&&(Ml&&t!=="SIGINT"&&t!=="SIGTERM"&&t!=="SIGKILL"?_e.kill(_e.pid,"SIGTERM"):_e.kill(_e.pid,t))}},this.hook=()=>{_e.once("exit",()=>this.exit());for(const t of ea)try{_e.once(t,()=>this.exit(t))}catch{}},this.register=t=>(this.callbacks.add(t),()=>{this.callbacks.delete(t)}),this.hook()}}const Of=new Rf,If=Of.register,Fe={store:{},create:e=>{const t=`000000${Math.floor(Math.random()*16777215).toString(16)}`.slice(-6),s=`.tmp-${Date.now().toString().slice(-10)}${t}`;return`${e}${s}`},get:(e,t,r=!0)=>{const n=Fe.truncate(t(e));return n in Fe.store?Fe.get(e,t,r):(Fe.store[n]=r,[n,()=>delete Fe.store[n]])},purge:e=>{Fe.store[e]&&(delete Fe.store[e],De.attempt.unlink(e))},purgeSync:e=>{Fe.store[e]&&(delete Fe.store[e],De.attempt.unlinkSync(e))},purgeSyncAll:()=>{for(const e in Fe.store)Fe.purgeSync(e)},truncate:e=>{const t=de.basename(e);if(t.length<=nc)return e;const r=/^(\.?)(.*?)((?:\.[^.]+)?(?:\.tmp-\d{10}[a-f0-9]{6})?)$/.exec(t);if(!r)return e;const n=t.length-nc;return`${e.slice(0,-t.length)}${r[1]}${r[2].slice(0,-n)}${r[3]}`}};If(Fe.purgeSyncAll);function Dl(e,t,r=vf){if(sc(r))return Dl(e,t,{encoding:r});const s={timeout:r.timeout??bf};let o=null,a=null,i=null;try{const c=De.attempt.realpathSync(e),d=!!c;e=c||e,[a,o]=Fe.get(e,r.tmpCreate||Fe.create,r.tmpPurge!==!1);const u=Sf&&to(r.chown),f=to(r.mode);if(d&&(u||f)){const v=De.attempt.statSync(e);v&&(r={...r},u&&(r.chown={uid:v.uid,gid:v.gid}),f&&(r.mode=v.mode))}if(!d){const v=de.dirname(e);De.attempt.mkdirSync(v,{mode:_f,recursive:!0})}i=De.retry.openSync(s)(a,"w",r.mode||rc),r.tmpCreated&&r.tmpCreated(a),sc(t)?De.retry.writeSync(s)(i,t,0,r.encoding||gf):to(t)||De.retry.writeSync(s)(i,t,0,t.length,0),r.fsync!==!1&&(r.fsyncWait!==!1?De.retry.fsyncSync(s)(i):De.attempt.fsync(i)),De.retry.closeSync(s)(i),i=null,r.chown&&(r.chown.uid!==wf||r.chown.gid!==Ef)&&De.attempt.chownSync(a,r.chown.uid,r.chown.gid),r.mode&&r.mode!==rc&&De.attempt.chmodSync(a,r.mode);try{De.retry.renameSync(s)(a,e)}catch(v){if(!Pf(v)||v.code!=="ENAMETOOLONG")throw v;De.retry.renameSync(s)(a,Fe.truncate(e))}o(),a=null}finally{i&&De.attempt.closeSync(i),a&&Fe.purge(a)}}function Fl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ro={exports:{}},Ll={},ft={},qr={},In={},se={},Rn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(E){if(super(),!e.IDENTIFIER.test(E))throw new Error("CodeGen: name must be a valid identifier");this.str=E}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(E){super(),this._items=typeof E=="string"?[E]:E}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const E=this._items[0];return E===""||E==='""'}get str(){var E;return(E=this._str)!==null&&E!==void 0?E:this._str=this._items.reduce((N,R)=>`${N}${R}`,"")}get names(){var E;return(E=this._names)!==null&&E!==void 0?E:this._names=this._items.reduce((N,R)=>(R instanceof r&&(N[R.str]=(N[R.str]||0)+1),N),{})}}e._Code=n,e.nil=new n("");function s(m,...E){const N=[m[0]];let R=0;for(;R<E.length;)i(N,E[R]),N.push(m[++R]);return new n(N)}e._=s;const o=new n("+");function a(m,...E){const N=[y(m[0])];let R=0;for(;R<E.length;)N.push(o),i(N,E[R]),N.push(o,y(m[++R]));return c(N),new n(N)}e.str=a;function i(m,E){E instanceof n?m.push(...E._items):E instanceof r?m.push(E):m.push(f(E))}e.addCodeArg=i;function c(m){let E=1;for(;E<m.length-1;){if(m[E]===o){const N=d(m[E-1],m[E+1]);if(N!==void 0){m.splice(E-1,3,N);continue}m[E++]="+"}E++}}function d(m,E){if(E==='""')return m;if(m==='""')return E;if(typeof m=="string")return E instanceof r||m[m.length-1]!=='"'?void 0:typeof E!="string"?`${m.slice(0,-1)}${E}"`:E[0]==='"'?m.slice(0,-1)+E.slice(1):void 0;if(typeof E=="string"&&E[0]==='"'&&!(m instanceof r))return`"${m}${E.slice(1)}`}function u(m,E){return E.emptyStr()?m:m.emptyStr()?E:a`${m}${E}`}e.strConcat=u;function f(m){return typeof m=="number"||typeof m=="boolean"||m===null?m:y(Array.isArray(m)?m.join(","):m)}function v(m){return new n(y(m))}e.stringify=v;function y(m){return JSON.stringify(m).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=y;function w(m){return typeof m=="string"&&e.IDENTIFIER.test(m)?new n(`.${m}`):s`[${m}]`}e.getProperty=w;function g(m){if(typeof m=="string"&&e.IDENTIFIER.test(m))return new n(`${m}`);throw new Error(`CodeGen: invalid export name: ${m}, use explicit $id name mapping`)}e.getEsmExportName=g;function $(m){return new n(m.toString())}e.regexpCode=$})(Rn);var Oo={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=Rn;class r extends Error{constructor(d){super(`CodeGen: "code" for ${d} not defined`),this.value=d.value}}var n;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(n||(e.UsedValueState=n={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class s{constructor({prefixes:d,parent:u}={}){this._names={},this._prefixes=d,this._parent=u}toName(d){return d instanceof t.Name?d:this.name(d)}name(d){return new t.Name(this._newName(d))}_newName(d){const u=this._names[d]||this._nameGroup(d);return`${d}${u.index++}`}_nameGroup(d){var u,f;if(!((f=(u=this._parent)===null||u===void 0?void 0:u._prefixes)===null||f===void 0)&&f.has(d)||this._prefixes&&!this._prefixes.has(d))throw new Error(`CodeGen: prefix "${d}" is not allowed in this scope`);return this._names[d]={prefix:d,index:0}}}e.Scope=s;class o extends t.Name{constructor(d,u){super(u),this.prefix=d}setValue(d,{property:u,itemIndex:f}){this.value=d,this.scopePath=(0,t._)`.${new t.Name(u)}[${f}]`}}e.ValueScopeName=o;const a=(0,t._)`\n`;class i extends s{constructor(d){super(d),this._values={},this._scope=d.scope,this.opts={...d,_n:d.lines?a:t.nil}}get(){return this._scope}name(d){return new o(d,this._newName(d))}value(d,u){var f;if(u.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const v=this.toName(d),{prefix:y}=v,w=(f=u.key)!==null&&f!==void 0?f:u.ref;let g=this._values[y];if(g){const E=g.get(w);if(E)return E}else g=this._values[y]=new Map;g.set(w,v);const $=this._scope[y]||(this._scope[y]=[]),m=$.length;return $[m]=u.ref,v.setValue(u,{property:y,itemIndex:m}),v}getValue(d,u){const f=this._values[d];if(f)return f.get(u)}scopeRefs(d,u=this._values){return this._reduceValues(u,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${d}${f.scopePath}`})}scopeCode(d=this._values,u,f){return this._reduceValues(d,v=>{if(v.value===void 0)throw new Error(`CodeGen: name "${v}" has no value`);return v.value.code},u,f)}_reduceValues(d,u,f={},v){let y=t.nil;for(const w in d){const g=d[w];if(!g)continue;const $=f[w]=f[w]||new Map;g.forEach(m=>{if($.has(m))return;$.set(m,n.Started);let E=u(m);if(E){const N=this.opts.es5?e.varKinds.var:e.varKinds.const;y=(0,t._)`${y}${N} ${m} = ${E};${this.opts._n}`}else if(E=v==null?void 0:v(m))y=(0,t._)`${y}${E}${this.opts._n}`;else throw new r(m);$.set(m,n.Completed)})}return y}}e.ValueScope=i})(Oo);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=Rn,r=Oo;var n=Rn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var s=Oo;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class o{optimizeNodes(){return this}optimizeNames(l,h){return this}}class a extends o{constructor(l,h,b){super(),this.varKind=l,this.name=h,this.rhs=b}render({es5:l,_n:h}){const b=l?r.varKinds.var:this.varKind,I=this.rhs===void 0?"":` = ${this.rhs}`;return`${b} ${this.name}${I};`+h}optimizeNames(l,h){if(l[this.name.str])return this.rhs&&(this.rhs=T(this.rhs,l,h)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class i extends o{constructor(l,h,b){super(),this.lhs=l,this.rhs=h,this.sideEffects=b}render({_n:l}){return`${this.lhs} = ${this.rhs};`+l}optimizeNames(l,h){if(!(this.lhs instanceof t.Name&&!l[this.lhs.str]&&!this.sideEffects))return this.rhs=T(this.rhs,l,h),this}get names(){const l=this.lhs instanceof t.Name?{}:{...this.lhs.names};return fe(l,this.rhs)}}class c extends i{constructor(l,h,b,I){super(l,b,I),this.op=h}render({_n:l}){return`${this.lhs} ${this.op}= ${this.rhs};`+l}}class d extends o{constructor(l){super(),this.label=l,this.names={}}render({_n:l}){return`${this.label}:`+l}}class u extends o{constructor(l){super(),this.label=l,this.names={}}render({_n:l}){return`break${this.label?` ${this.label}`:""};`+l}}class f extends o{constructor(l){super(),this.error=l}render({_n:l}){return`throw ${this.error};`+l}get names(){return this.error.names}}class v extends o{constructor(l){super(),this.code=l}render({_n:l}){return`${this.code};`+l}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(l,h){return this.code=T(this.code,l,h),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class y extends o{constructor(l=[]){super(),this.nodes=l}render(l){return this.nodes.reduce((h,b)=>h+b.render(l),"")}optimizeNodes(){const{nodes:l}=this;let h=l.length;for(;h--;){const b=l[h].optimizeNodes();Array.isArray(b)?l.splice(h,1,...b):b?l[h]=b:l.splice(h,1)}return l.length>0?this:void 0}optimizeNames(l,h){const{nodes:b}=this;let I=b.length;for(;I--;){const j=b[I];j.optimizeNames(l,h)||(A(l,j.names),b.splice(I,1))}return b.length>0?this:void 0}get names(){return this.nodes.reduce((l,h)=>Y(l,h.names),{})}}class w extends y{render(l){return"{"+l._n+super.render(l)+"}"+l._n}}class g extends y{}class $ extends w{}$.kind="else";class m extends w{constructor(l,h){super(h),this.condition=l}render(l){let h=`if(${this.condition})`+super.render(l);return this.else&&(h+="else "+this.else.render(l)),h}optimizeNodes(){super.optimizeNodes();const l=this.condition;if(l===!0)return this.nodes;let h=this.else;if(h){const b=h.optimizeNodes();h=this.else=Array.isArray(b)?new $(b):b}if(h)return l===!1?h instanceof m?h:h.nodes:this.nodes.length?this:new m(V(l),h instanceof m?[h]:h.nodes);if(!(l===!1||!this.nodes.length))return this}optimizeNames(l,h){var b;if(this.else=(b=this.else)===null||b===void 0?void 0:b.optimizeNames(l,h),!!(super.optimizeNames(l,h)||this.else))return this.condition=T(this.condition,l,h),this}get names(){const l=super.names;return fe(l,this.condition),this.else&&Y(l,this.else.names),l}}m.kind="if";class E extends w{}E.kind="for";class N extends E{constructor(l){super(),this.iteration=l}render(l){return`for(${this.iteration})`+super.render(l)}optimizeNames(l,h){if(super.optimizeNames(l,h))return this.iteration=T(this.iteration,l,h),this}get names(){return Y(super.names,this.iteration.names)}}class R extends E{constructor(l,h,b,I){super(),this.varKind=l,this.name=h,this.from=b,this.to=I}render(l){const h=l.es5?r.varKinds.var:this.varKind,{name:b,from:I,to:j}=this;return`for(${h} ${b}=${I}; ${b}<${j}; ${b}++)`+super.render(l)}get names(){const l=fe(super.names,this.from);return fe(l,this.to)}}class O extends E{constructor(l,h,b,I){super(),this.loop=l,this.varKind=h,this.name=b,this.iterable=I}render(l){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(l)}optimizeNames(l,h){if(super.optimizeNames(l,h))return this.iterable=T(this.iterable,l,h),this}get names(){return Y(super.names,this.iterable.names)}}class x extends w{constructor(l,h,b){super(),this.name=l,this.args=h,this.async=b}render(l){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(l)}}x.kind="func";class re extends y{render(l){return"return "+super.render(l)}}re.kind="return";class ge extends w{render(l){let h="try"+super.render(l);return this.catch&&(h+=this.catch.render(l)),this.finally&&(h+=this.finally.render(l)),h}optimizeNodes(){var l,h;return super.optimizeNodes(),(l=this.catch)===null||l===void 0||l.optimizeNodes(),(h=this.finally)===null||h===void 0||h.optimizeNodes(),this}optimizeNames(l,h){var b,I;return super.optimizeNames(l,h),(b=this.catch)===null||b===void 0||b.optimizeNames(l,h),(I=this.finally)===null||I===void 0||I.optimizeNames(l,h),this}get names(){const l=super.names;return this.catch&&Y(l,this.catch.names),this.finally&&Y(l,this.finally.names),l}}class we extends w{constructor(l){super(),this.error=l}render(l){return`catch(${this.error})`+super.render(l)}}we.kind="catch";class Se extends w{render(l){return"finally"+super.render(l)}}Se.kind="finally";class K{constructor(l,h={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...h,_n:h.lines?`
`:""},this._extScope=l,this._scope=new r.Scope({parent:l}),this._nodes=[new g]}toString(){return this._root.render(this.opts)}name(l){return this._scope.name(l)}scopeName(l){return this._extScope.name(l)}scopeValue(l,h){const b=this._extScope.value(l,h);return(this._values[b.prefix]||(this._values[b.prefix]=new Set)).add(b),b}getScopeValue(l,h){return this._extScope.getValue(l,h)}scopeRefs(l){return this._extScope.scopeRefs(l,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(l,h,b,I){const j=this._scope.toName(h);return b!==void 0&&I&&(this._constants[j.str]=b),this._leafNode(new a(l,j,b)),j}const(l,h,b){return this._def(r.varKinds.const,l,h,b)}let(l,h,b){return this._def(r.varKinds.let,l,h,b)}var(l,h,b){return this._def(r.varKinds.var,l,h,b)}assign(l,h,b){return this._leafNode(new i(l,h,b))}add(l,h){return this._leafNode(new c(l,e.operators.ADD,h))}code(l){return typeof l=="function"?l():l!==t.nil&&this._leafNode(new v(l)),this}object(...l){const h=["{"];for(const[b,I]of l)h.length>1&&h.push(","),h.push(b),(b!==I||this.opts.es5)&&(h.push(":"),(0,t.addCodeArg)(h,I));return h.push("}"),new t._Code(h)}if(l,h,b){if(this._blockNode(new m(l)),h&&b)this.code(h).else().code(b).endIf();else if(h)this.code(h).endIf();else if(b)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(l){return this._elseNode(new m(l))}else(){return this._elseNode(new $)}endIf(){return this._endBlockNode(m,$)}_for(l,h){return this._blockNode(l),h&&this.code(h).endFor(),this}for(l,h){return this._for(new N(l),h)}forRange(l,h,b,I,j=this.opts.es5?r.varKinds.var:r.varKinds.let){const G=this._scope.toName(l);return this._for(new R(j,G,h,b),()=>I(G))}forOf(l,h,b,I=r.varKinds.const){const j=this._scope.toName(l);if(this.opts.es5){const G=h instanceof t.Name?h:this.var("_arr",h);return this.forRange("_i",0,(0,t._)`${G}.length`,U=>{this.var(j,(0,t._)`${G}[${U}]`),b(j)})}return this._for(new O("of",I,j,h),()=>b(j))}forIn(l,h,b,I=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(l,(0,t._)`Object.keys(${h})`,b);const j=this._scope.toName(l);return this._for(new O("in",I,j,h),()=>b(j))}endFor(){return this._endBlockNode(E)}label(l){return this._leafNode(new d(l))}break(l){return this._leafNode(new u(l))}return(l){const h=new re;if(this._blockNode(h),this.code(l),h.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(re)}try(l,h,b){if(!h&&!b)throw new Error('CodeGen: "try" without "catch" and "finally"');const I=new ge;if(this._blockNode(I),this.code(l),h){const j=this.name("e");this._currNode=I.catch=new we(j),h(j)}return b&&(this._currNode=I.finally=new Se,this.code(b)),this._endBlockNode(we,Se)}throw(l){return this._leafNode(new f(l))}block(l,h){return this._blockStarts.push(this._nodes.length),l&&this.code(l).endBlock(h),this}endBlock(l){const h=this._blockStarts.pop();if(h===void 0)throw new Error("CodeGen: not in self-balancing block");const b=this._nodes.length-h;if(b<0||l!==void 0&&b!==l)throw new Error(`CodeGen: wrong number of nodes: ${b} vs ${l} expected`);return this._nodes.length=h,this}func(l,h=t.nil,b,I){return this._blockNode(new x(l,h,b)),I&&this.code(I).endFunc(),this}endFunc(){return this._endBlockNode(x)}optimize(l=1){for(;l-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(l){return this._currNode.nodes.push(l),this}_blockNode(l){this._currNode.nodes.push(l),this._nodes.push(l)}_endBlockNode(l,h){const b=this._currNode;if(b instanceof l||h&&b instanceof h)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${h?`${l.kind}/${h.kind}`:l.kind}"`)}_elseNode(l){const h=this._currNode;if(!(h instanceof m))throw new Error('CodeGen: "else" without "if"');return this._currNode=h.else=l,this}get _root(){return this._nodes[0]}get _currNode(){const l=this._nodes;return l[l.length-1]}set _currNode(l){const h=this._nodes;h[h.length-1]=l}}e.CodeGen=K;function Y(_,l){for(const h in l)_[h]=(_[h]||0)+(l[h]||0);return _}function fe(_,l){return l instanceof t._CodeOrName?Y(_,l.names):_}function T(_,l,h){if(_ instanceof t.Name)return b(_);if(!I(_))return _;return new t._Code(_._items.reduce((j,G)=>(G instanceof t.Name&&(G=b(G)),G instanceof t._Code?j.push(...G._items):j.push(G),j),[]));function b(j){const G=h[j.str];return G===void 0||l[j.str]!==1?j:(delete l[j.str],G)}function I(j){return j instanceof t._Code&&j._items.some(G=>G instanceof t.Name&&l[G.str]===1&&h[G.str]!==void 0)}}function A(_,l){for(const h in l)_[h]=(_[h]||0)-(l[h]||0)}function V(_){return typeof _=="boolean"||typeof _=="number"||_===null?!_:(0,t._)`!${S(_)}`}e.not=V;const F=p(e.operators.AND);function B(..._){return _.reduce(F)}e.and=B;const L=p(e.operators.OR);function P(..._){return _.reduce(L)}e.or=P;function p(_){return(l,h)=>l===t.nil?h:h===t.nil?l:(0,t._)`${S(l)} ${_} ${S(h)}`}function S(_){return _ instanceof t.Name?_:(0,t._)`(${_})`}})(se);var M={};Object.defineProperty(M,"__esModule",{value:!0});M.checkStrictMode=M.getErrorPath=M.Type=M.useFunc=M.setEvaluated=M.evaluatedPropsToName=M.mergeEvaluated=M.eachItem=M.unescapeJsonPointer=M.escapeJsonPointer=M.escapeFragment=M.unescapeFragment=M.schemaRefOrVal=M.schemaHasRulesButRef=M.schemaHasRules=M.checkUnknownRules=M.alwaysValidSchema=M.toHash=void 0;const me=se,Tf=Rn;function jf(e){const t={};for(const r of e)t[r]=!0;return t}M.toHash=jf;function Af(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(zl(e,t),!Vl(t,e.self.RULES.all))}M.alwaysValidSchema=Af;function zl(e,t=e.schema){const{opts:r,self:n}=e;if(!r.strictSchema||typeof t=="boolean")return;const s=n.RULES.keywords;for(const o in t)s[o]||Gl(e,`unknown keyword: "${o}"`)}M.checkUnknownRules=zl;function Vl(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(t[r])return!0;return!1}M.schemaHasRules=Vl;function kf(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}M.schemaHasRulesButRef=kf;function Cf({topSchemaRef:e,schemaPath:t},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,me._)`${r}`}return(0,me._)`${e}${t}${(0,me.getProperty)(n)}`}M.schemaRefOrVal=Cf;function Mf(e){return Ul(decodeURIComponent(e))}M.unescapeFragment=Mf;function Df(e){return encodeURIComponent(ta(e))}M.escapeFragment=Df;function ta(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}M.escapeJsonPointer=ta;function Ul(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}M.unescapeJsonPointer=Ul;function Ff(e,t){if(Array.isArray(e))for(const r of e)t(r);else t(e)}M.eachItem=Ff;function oc({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:n}){return(s,o,a,i)=>{const c=a===void 0?o:a instanceof me.Name?(o instanceof me.Name?e(s,o,a):t(s,o,a),a):o instanceof me.Name?(t(s,a,o),o):r(o,a);return i===me.Name&&!(c instanceof me.Name)?n(s,c):c}}M.mergeEvaluated={props:oc({mergeNames:(e,t,r)=>e.if((0,me._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,me._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,me._)`${r} || {}`).code((0,me._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,me._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,me._)`${r} || {}`),ra(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:ql}),items:oc({mergeNames:(e,t,r)=>e.if((0,me._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,me._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,me._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,me._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function ql(e,t){if(t===!0)return e.var("props",!0);const r=e.var("props",(0,me._)`{}`);return t!==void 0&&ra(e,r,t),r}M.evaluatedPropsToName=ql;function ra(e,t,r){Object.keys(r).forEach(n=>e.assign((0,me._)`${t}${(0,me.getProperty)(n)}`,!0))}M.setEvaluated=ra;const ac={};function Lf(e,t){return e.scopeValue("func",{ref:t,code:ac[t.code]||(ac[t.code]=new Tf._Code(t.code))})}M.useFunc=Lf;var Io;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(Io||(M.Type=Io={}));function zf(e,t,r){if(e instanceof me.Name){const n=t===Io.Num;return r?n?(0,me._)`"[" + ${e} + "]"`:(0,me._)`"['" + ${e} + "']"`:n?(0,me._)`"/" + ${e}`:(0,me._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,me.getProperty)(e).toString():"/"+ta(e)}M.getErrorPath=zf;function Gl(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}M.checkStrictMode=Gl;var Ze={};Object.defineProperty(Ze,"__esModule",{value:!0});const Ce=se,Vf={data:new Ce.Name("data"),valCxt:new Ce.Name("valCxt"),instancePath:new Ce.Name("instancePath"),parentData:new Ce.Name("parentData"),parentDataProperty:new Ce.Name("parentDataProperty"),rootData:new Ce.Name("rootData"),dynamicAnchors:new Ce.Name("dynamicAnchors"),vErrors:new Ce.Name("vErrors"),errors:new Ce.Name("errors"),this:new Ce.Name("this"),self:new Ce.Name("self"),scope:new Ce.Name("scope"),json:new Ce.Name("json"),jsonPos:new Ce.Name("jsonPos"),jsonLen:new Ce.Name("jsonLen"),jsonPart:new Ce.Name("jsonPart")};Ze.default=Vf;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=se,r=M,n=Ze;e.keywordError={message:({keyword:$})=>(0,t.str)`must pass "${$}" keyword validation`},e.keyword$DataError={message:({keyword:$,schemaType:m})=>m?(0,t.str)`"${$}" keyword must be ${m} ($data)`:(0,t.str)`"${$}" keyword is invalid ($data)`};function s($,m=e.keywordError,E,N){const{it:R}=$,{gen:O,compositeRule:x,allErrors:re}=R,ge=f($,m,E);N??(x||re)?c(O,ge):d(R,(0,t._)`[${ge}]`)}e.reportError=s;function o($,m=e.keywordError,E){const{it:N}=$,{gen:R,compositeRule:O,allErrors:x}=N,re=f($,m,E);c(R,re),O||x||d(N,n.default.vErrors)}e.reportExtraError=o;function a($,m){$.assign(n.default.errors,m),$.if((0,t._)`${n.default.vErrors} !== null`,()=>$.if(m,()=>$.assign((0,t._)`${n.default.vErrors}.length`,m),()=>$.assign(n.default.vErrors,null)))}e.resetErrorsCount=a;function i({gen:$,keyword:m,schemaValue:E,data:N,errsCount:R,it:O}){if(R===void 0)throw new Error("ajv implementation error");const x=$.name("err");$.forRange("i",R,n.default.errors,re=>{$.const(x,(0,t._)`${n.default.vErrors}[${re}]`),$.if((0,t._)`${x}.instancePath === undefined`,()=>$.assign((0,t._)`${x}.instancePath`,(0,t.strConcat)(n.default.instancePath,O.errorPath))),$.assign((0,t._)`${x}.schemaPath`,(0,t.str)`${O.errSchemaPath}/${m}`),O.opts.verbose&&($.assign((0,t._)`${x}.schema`,E),$.assign((0,t._)`${x}.data`,N))})}e.extendErrors=i;function c($,m){const E=$.const("err",m);$.if((0,t._)`${n.default.vErrors} === null`,()=>$.assign(n.default.vErrors,(0,t._)`[${E}]`),(0,t._)`${n.default.vErrors}.push(${E})`),$.code((0,t._)`${n.default.errors}++`)}function d($,m){const{gen:E,validateName:N,schemaEnv:R}=$;R.$async?E.throw((0,t._)`new ${$.ValidationError}(${m})`):(E.assign((0,t._)`${N}.errors`,m),E.return(!1))}const u={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f($,m,E){const{createErrors:N}=$.it;return N===!1?(0,t._)`{}`:v($,m,E)}function v($,m,E={}){const{gen:N,it:R}=$,O=[y(R,E),w($,E)];return g($,m,O),N.object(...O)}function y({errorPath:$},{instancePath:m}){const E=m?(0,t.str)`${$}${(0,r.getErrorPath)(m,r.Type.Str)}`:$;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,E)]}function w({keyword:$,it:{errSchemaPath:m}},{schemaPath:E,parentSchema:N}){let R=N?m:(0,t.str)`${m}/${$}`;return E&&(R=(0,t.str)`${R}${(0,r.getErrorPath)(E,r.Type.Str)}`),[u.schemaPath,R]}function g($,{params:m,message:E},N){const{keyword:R,data:O,schemaValue:x,it:re}=$,{opts:ge,propertyName:we,topSchemaRef:Se,schemaPath:K}=re;N.push([u.keyword,R],[u.params,typeof m=="function"?m($):m||(0,t._)`{}`]),ge.messages&&N.push([u.message,typeof E=="function"?E($):E]),ge.verbose&&N.push([u.schema,x],[u.parentSchema,(0,t._)`${Se}${K}`],[n.default.data,O]),we&&N.push([u.propertyName,we])}})(In);Object.defineProperty(qr,"__esModule",{value:!0});qr.boolOrEmptySchema=qr.topBoolOrEmptySchema=void 0;const Uf=In,qf=se,Gf=Ze,Kf={message:"boolean schema is false"};function Hf(e){const{gen:t,schema:r,validateName:n}=e;r===!1?Kl(e,!1):typeof r=="object"&&r.$async===!0?t.return(Gf.default.data):(t.assign((0,qf._)`${n}.errors`,null),t.return(!0))}qr.topBoolOrEmptySchema=Hf;function Wf(e,t){const{gen:r,schema:n}=e;n===!1?(r.var(t,!1),Kl(e)):r.var(t,!0)}qr.boolOrEmptySchema=Wf;function Kl(e,t){const{gen:r,data:n}=e,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,Uf.reportError)(s,Kf,void 0,t)}var Pe={},br={};Object.defineProperty(br,"__esModule",{value:!0});br.getRules=br.isJSONType=void 0;const xf=["string","number","integer","boolean","null","object","array"],Bf=new Set(xf);function Yf(e){return typeof e=="string"&&Bf.has(e)}br.isJSONType=Yf;function Jf(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}br.getRules=Jf;var Rt={};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.shouldUseRule=Rt.shouldUseGroup=Rt.schemaHasRulesForType=void 0;function Xf({schema:e,self:t},r){const n=t.RULES.types[r];return n&&n!==!0&&Hl(e,n)}Rt.schemaHasRulesForType=Xf;function Hl(e,t){return t.rules.some(r=>Wl(e,r))}Rt.shouldUseGroup=Hl;function Wl(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(n=>e[n]!==void 0))}Rt.shouldUseRule=Wl;Object.defineProperty(Pe,"__esModule",{value:!0});Pe.reportTypeError=Pe.checkDataTypes=Pe.checkDataType=Pe.coerceAndCheckDataType=Pe.getJSONTypes=Pe.getSchemaTypes=Pe.DataType=void 0;const Zf=br,Qf=Rt,eh=In,oe=se,xl=M;var Dr;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Dr||(Pe.DataType=Dr={}));function th(e){const t=Bl(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Pe.getSchemaTypes=th;function Bl(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(Zf.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Pe.getJSONTypes=Bl;function rh(e,t){const{gen:r,data:n,opts:s}=e,o=nh(t,s.coerceTypes),a=t.length>0&&!(o.length===0&&t.length===1&&(0,Qf.schemaHasRulesForType)(e,t[0]));if(a){const i=na(t,n,s.strictNumbers,Dr.Wrong);r.if(i,()=>{o.length?sh(e,t,o):sa(e)})}return a}Pe.coerceAndCheckDataType=rh;const Yl=new Set(["string","number","integer","boolean","null"]);function nh(e,t){return t?e.filter(r=>Yl.has(r)||t==="array"&&r==="array"):[]}function sh(e,t,r){const{gen:n,data:s,opts:o}=e,a=n.let("dataType",(0,oe._)`typeof ${s}`),i=n.let("coerced",(0,oe._)`undefined`);o.coerceTypes==="array"&&n.if((0,oe._)`${a} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,oe._)`${s}[0]`).assign(a,(0,oe._)`typeof ${s}`).if(na(t,s,o.strictNumbers),()=>n.assign(i,s))),n.if((0,oe._)`${i} !== undefined`);for(const d of r)(Yl.has(d)||d==="array"&&o.coerceTypes==="array")&&c(d);n.else(),sa(e),n.endIf(),n.if((0,oe._)`${i} !== undefined`,()=>{n.assign(s,i),oh(e,i)});function c(d){switch(d){case"string":n.elseIf((0,oe._)`${a} == "number" || ${a} == "boolean"`).assign(i,(0,oe._)`"" + ${s}`).elseIf((0,oe._)`${s} === null`).assign(i,(0,oe._)`""`);return;case"number":n.elseIf((0,oe._)`${a} == "boolean" || ${s} === null
              || (${a} == "string" && ${s} && ${s} == +${s})`).assign(i,(0,oe._)`+${s}`);return;case"integer":n.elseIf((0,oe._)`${a} === "boolean" || ${s} === null
              || (${a} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(i,(0,oe._)`+${s}`);return;case"boolean":n.elseIf((0,oe._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(i,!1).elseIf((0,oe._)`${s} === "true" || ${s} === 1`).assign(i,!0);return;case"null":n.elseIf((0,oe._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(i,null);return;case"array":n.elseIf((0,oe._)`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${s} === null`).assign(i,(0,oe._)`[${s}]`)}}}function oh({gen:e,parentData:t,parentDataProperty:r},n){e.if((0,oe._)`${t} !== undefined`,()=>e.assign((0,oe._)`${t}[${r}]`,n))}function To(e,t,r,n=Dr.Correct){const s=n===Dr.Correct?oe.operators.EQ:oe.operators.NEQ;let o;switch(e){case"null":return(0,oe._)`${t} ${s} null`;case"array":o=(0,oe._)`Array.isArray(${t})`;break;case"object":o=(0,oe._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=a((0,oe._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=a();break;default:return(0,oe._)`typeof ${t} ${s} ${e}`}return n===Dr.Correct?o:(0,oe.not)(o);function a(i=oe.nil){return(0,oe.and)((0,oe._)`typeof ${t} == "number"`,i,r?(0,oe._)`isFinite(${t})`:oe.nil)}}Pe.checkDataType=To;function na(e,t,r,n){if(e.length===1)return To(e[0],t,r,n);let s;const o=(0,xl.toHash)(e);if(o.array&&o.object){const a=(0,oe._)`typeof ${t} != "object"`;s=o.null?a:(0,oe._)`!${t} || ${a}`,delete o.null,delete o.array,delete o.object}else s=oe.nil;o.number&&delete o.integer;for(const a in o)s=(0,oe.and)(s,To(a,t,r,n));return s}Pe.checkDataTypes=na;const ah={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,oe._)`{type: ${e}}`:(0,oe._)`{type: ${t}}`};function sa(e){const t=ih(e);(0,eh.reportError)(t,ah)}Pe.reportTypeError=sa;function ih(e){const{gen:t,data:r,schema:n}=e,s=(0,xl.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:e}}var As={};Object.defineProperty(As,"__esModule",{value:!0});As.assignDefaults=void 0;const Rr=se,ch=M;function lh(e,t){const{properties:r,items:n}=e.schema;if(t==="object"&&r)for(const s in r)ic(e,s,r[s].default);else t==="array"&&Array.isArray(n)&&n.forEach((s,o)=>ic(e,o,s.default))}As.assignDefaults=lh;function ic(e,t,r){const{gen:n,compositeRule:s,data:o,opts:a}=e;if(r===void 0)return;const i=(0,Rr._)`${o}${(0,Rr.getProperty)(t)}`;if(s){(0,ch.checkStrictMode)(e,`default is ignored for: ${i}`);return}let c=(0,Rr._)`${i} === undefined`;a.useDefaults==="empty"&&(c=(0,Rr._)`${c} || ${i} === null || ${i} === ""`),n.if(c,(0,Rr._)`${i} = ${(0,Rr.stringify)(r)}`)}var wt={},ce={};Object.defineProperty(ce,"__esModule",{value:!0});ce.validateUnion=ce.validateArray=ce.usePattern=ce.callValidateCode=ce.schemaProperties=ce.allSchemaProperties=ce.noPropertyInData=ce.propertyInData=ce.isOwnProperty=ce.hasPropFunc=ce.reportMissingProp=ce.checkMissingProp=ce.checkReportMissingProp=void 0;const ye=se,oa=M,Dt=Ze,uh=M;function dh(e,t){const{gen:r,data:n,it:s}=e;r.if(ia(r,n,t,s.opts.ownProperties),()=>{e.setParams({missingProperty:(0,ye._)`${t}`},!0),e.error()})}ce.checkReportMissingProp=dh;function fh({gen:e,data:t,it:{opts:r}},n,s){return(0,ye.or)(...n.map(o=>(0,ye.and)(ia(e,t,o,r.ownProperties),(0,ye._)`${s} = ${o}`)))}ce.checkMissingProp=fh;function hh(e,t){e.setParams({missingProperty:t},!0),e.error()}ce.reportMissingProp=hh;function Jl(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,ye._)`Object.prototype.hasOwnProperty`})}ce.hasPropFunc=Jl;function aa(e,t,r){return(0,ye._)`${Jl(e)}.call(${t}, ${r})`}ce.isOwnProperty=aa;function mh(e,t,r,n){const s=(0,ye._)`${t}${(0,ye.getProperty)(r)} !== undefined`;return n?(0,ye._)`${s} && ${aa(e,t,r)}`:s}ce.propertyInData=mh;function ia(e,t,r,n){const s=(0,ye._)`${t}${(0,ye.getProperty)(r)} === undefined`;return n?(0,ye.or)(s,(0,ye.not)(aa(e,t,r))):s}ce.noPropertyInData=ia;function Xl(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}ce.allSchemaProperties=Xl;function ph(e,t){return Xl(t).filter(r=>!(0,oa.alwaysValidSchema)(e,t[r]))}ce.schemaProperties=ph;function yh({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:o},it:a},i,c,d){const u=d?(0,ye._)`${e}, ${t}, ${n}${s}`:t,f=[[Dt.default.instancePath,(0,ye.strConcat)(Dt.default.instancePath,o)],[Dt.default.parentData,a.parentData],[Dt.default.parentDataProperty,a.parentDataProperty],[Dt.default.rootData,Dt.default.rootData]];a.opts.dynamicRef&&f.push([Dt.default.dynamicAnchors,Dt.default.dynamicAnchors]);const v=(0,ye._)`${u}, ${r.object(...f)}`;return c!==ye.nil?(0,ye._)`${i}.call(${c}, ${v})`:(0,ye._)`${i}(${v})`}ce.callValidateCode=yh;const $h=(0,ye._)`new RegExp`;function gh({gen:e,it:{opts:t}},r){const n=t.unicodeRegExp?"u":"",{regExp:s}=t.code,o=s(r,n);return e.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,ye._)`${s.code==="new RegExp"?$h:(0,uh.useFunc)(e,s)}(${r}, ${n})`})}ce.usePattern=gh;function _h(e){const{gen:t,data:r,keyword:n,it:s}=e,o=t.name("valid");if(s.allErrors){const i=t.let("valid",!0);return a(()=>t.assign(i,!1)),i}return t.var(o,!0),a(()=>t.break()),o;function a(i){const c=t.const("len",(0,ye._)`${r}.length`);t.forRange("i",0,c,d=>{e.subschema({keyword:n,dataProp:d,dataPropType:oa.Type.Num},o),t.if((0,ye.not)(o),i)})}}ce.validateArray=_h;function vh(e){const{gen:t,schema:r,keyword:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(c=>(0,oa.alwaysValidSchema)(s,c))&&!s.opts.unevaluated)return;const a=t.let("valid",!1),i=t.name("_valid");t.block(()=>r.forEach((c,d)=>{const u=e.subschema({keyword:n,schemaProp:d,compositeRule:!0},i);t.assign(a,(0,ye._)`${a} || ${i}`),e.mergeValidEvaluated(u,i)||t.if((0,ye.not)(a))})),e.result(a,()=>e.reset(),()=>e.error(!0))}ce.validateUnion=vh;Object.defineProperty(wt,"__esModule",{value:!0});wt.validateKeywordUsage=wt.validSchemaType=wt.funcKeywordCode=wt.macroKeywordCode=void 0;const Le=se,fr=Ze,wh=ce,Eh=In;function bh(e,t){const{gen:r,keyword:n,schema:s,parentSchema:o,it:a}=e,i=t.macro.call(a.self,s,o,a),c=Zl(r,n,i);a.opts.validateSchema!==!1&&a.self.validateSchema(i,!0);const d=r.name("valid");e.subschema({schema:i,schemaPath:Le.nil,errSchemaPath:`${a.errSchemaPath}/${n}`,topSchemaRef:c,compositeRule:!0},d),e.pass(d,()=>e.error(!0))}wt.macroKeywordCode=bh;function Sh(e,t){var r;const{gen:n,keyword:s,schema:o,parentSchema:a,$data:i,it:c}=e;Nh(c,t);const d=!i&&t.compile?t.compile.call(c.self,o,a,c):t.validate,u=Zl(n,s,d),f=n.let("valid");e.block$data(f,v),e.ok((r=t.valid)!==null&&r!==void 0?r:f);function v(){if(t.errors===!1)g(),t.modifying&&cc(e),$(()=>e.error());else{const m=t.async?y():w();t.modifying&&cc(e),$(()=>Ph(e,m))}}function y(){const m=n.let("ruleErrs",null);return n.try(()=>g((0,Le._)`await `),E=>n.assign(f,!1).if((0,Le._)`${E} instanceof ${c.ValidationError}`,()=>n.assign(m,(0,Le._)`${E}.errors`),()=>n.throw(E))),m}function w(){const m=(0,Le._)`${u}.errors`;return n.assign(m,null),g(Le.nil),m}function g(m=t.async?(0,Le._)`await `:Le.nil){const E=c.opts.passContext?fr.default.this:fr.default.self,N=!("compile"in t&&!i||t.schema===!1);n.assign(f,(0,Le._)`${m}${(0,wh.callValidateCode)(e,u,E,N)}`,t.modifying)}function $(m){var E;n.if((0,Le.not)((E=t.valid)!==null&&E!==void 0?E:f),m)}}wt.funcKeywordCode=Sh;function cc(e){const{gen:t,data:r,it:n}=e;t.if(n.parentData,()=>t.assign(r,(0,Le._)`${n.parentData}[${n.parentDataProperty}]`))}function Ph(e,t){const{gen:r}=e;r.if((0,Le._)`Array.isArray(${t})`,()=>{r.assign(fr.default.vErrors,(0,Le._)`${fr.default.vErrors} === null ? ${t} : ${fr.default.vErrors}.concat(${t})`).assign(fr.default.errors,(0,Le._)`${fr.default.vErrors}.length`),(0,Eh.extendErrors)(e)},()=>e.error())}function Nh({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function Zl(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Le.stringify)(r)})}function Rh(e,t,r=!1){return!t.length||t.some(n=>n==="array"?Array.isArray(e):n==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==n||r&&typeof e>"u")}wt.validSchemaType=Rh;function Oh({schema:e,opts:t,self:r,errSchemaPath:n},s,o){if(Array.isArray(s.keyword)?!s.keyword.includes(o):s.keyword!==o)throw new Error("ajv implementation error");const a=s.dependencies;if(a!=null&&a.some(i=>!Object.prototype.hasOwnProperty.call(e,i)))throw new Error(`parent schema must have dependencies of ${o}: ${a.join(",")}`);if(s.validateSchema&&!s.validateSchema(e[o])){const c=`keyword "${o}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(c);else throw new Error(c)}}wt.validateKeywordUsage=Oh;var xt={};Object.defineProperty(xt,"__esModule",{value:!0});xt.extendSubschemaMode=xt.extendSubschemaData=xt.getSubschema=void 0;const _t=se,Ql=M;function Ih(e,{keyword:t,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:o,topSchemaRef:a}){if(t!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const i=e.schema[t];return r===void 0?{schema:i,schemaPath:(0,_t._)`${e.schemaPath}${(0,_t.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:i[r],schemaPath:(0,_t._)`${e.schemaPath}${(0,_t.getProperty)(t)}${(0,_t.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,Ql.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||o===void 0||a===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:a,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}xt.getSubschema=Ih;function Th(e,t,{dataProp:r,dataPropType:n,data:s,dataTypes:o,propertyName:a}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:i}=t;if(r!==void 0){const{errorPath:d,dataPathArr:u,opts:f}=t,v=i.let("data",(0,_t._)`${t.data}${(0,_t.getProperty)(r)}`,!0);c(v),e.errorPath=(0,_t.str)`${d}${(0,Ql.getErrorPath)(r,n,f.jsPropertySyntax)}`,e.parentDataProperty=(0,_t._)`${r}`,e.dataPathArr=[...u,e.parentDataProperty]}if(s!==void 0){const d=s instanceof _t.Name?s:i.let("data",s,!0);c(d),a!==void 0&&(e.propertyName=a)}o&&(e.dataTypes=o);function c(d){e.data=d,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,d]}}xt.extendSubschemaData=Th;function jh(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:o}){n!==void 0&&(e.compositeRule=n),s!==void 0&&(e.createErrors=s),o!==void 0&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=r}xt.extendSubschemaMode=jh;var je={},ks=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,s,o;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(o=Object.keys(t),n=o.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[s]))return!1;for(s=n;s--!==0;){var a=o[s];if(!e(t[a],r[a]))return!1}return!0}return t!==t&&r!==r},eu={exports:{}},Ht=eu.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};os(t,n,s,e,"",e)};Ht.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Ht.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Ht.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Ht.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function os(e,t,r,n,s,o,a,i,c,d){if(n&&typeof n=="object"&&!Array.isArray(n)){t(n,s,o,a,i,c,d);for(var u in n){var f=n[u];if(Array.isArray(f)){if(u in Ht.arrayKeywords)for(var v=0;v<f.length;v++)os(e,t,r,f[v],s+"/"+u+"/"+v,o,s,u,n,v)}else if(u in Ht.propsKeywords){if(f&&typeof f=="object")for(var y in f)os(e,t,r,f[y],s+"/"+u+"/"+Ah(y),o,s,u,n,y)}else(u in Ht.keywords||e.allKeys&&!(u in Ht.skipKeywords))&&os(e,t,r,f,s+"/"+u,o,s,u,n)}r(n,s,o,a,i,c,d)}}function Ah(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var kh=eu.exports;Object.defineProperty(je,"__esModule",{value:!0});je.getSchemaRefs=je.resolveUrl=je.normalizeId=je._getFullPath=je.getFullPath=je.inlineRef=void 0;const Ch=M,Mh=ks,Dh=kh,Fh=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Lh(e,t=!0){return typeof e=="boolean"?!0:t===!0?!jo(e):t?tu(e)<=t:!1}je.inlineRef=Lh;const zh=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function jo(e){for(const t in e){if(zh.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(jo)||typeof r=="object"&&jo(r))return!0}return!1}function tu(e){let t=0;for(const r in e){if(r==="$ref")return 1/0;if(t++,!Fh.has(r)&&(typeof e[r]=="object"&&(0,Ch.eachItem)(e[r],n=>t+=tu(n)),t===1/0))return 1/0}return t}function ru(e,t="",r){r!==!1&&(t=Fr(t));const n=e.parse(t);return nu(e,n)}je.getFullPath=ru;function nu(e,t){return e.serialize(t).split("#")[0]+"#"}je._getFullPath=nu;const Vh=/#\/?$/;function Fr(e){return e?e.replace(Vh,""):""}je.normalizeId=Fr;function Uh(e,t,r){return r=Fr(r),e.resolve(t,r)}je.resolveUrl=Uh;const qh=/^[a-z_][-a-z0-9._]*$/i;function Gh(e,t){if(typeof e=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,s=Fr(e[r]||t),o={"":s},a=ru(n,s,!1),i={},c=new Set;return Dh(e,{allKeys:!0},(f,v,y,w)=>{if(w===void 0)return;const g=a+v;let $=o[w];typeof f[r]=="string"&&($=m.call(this,f[r])),E.call(this,f.$anchor),E.call(this,f.$dynamicAnchor),o[v]=$;function m(N){const R=this.opts.uriResolver.resolve;if(N=Fr($?R($,N):N),c.has(N))throw u(N);c.add(N);let O=this.refs[N];return typeof O=="string"&&(O=this.refs[O]),typeof O=="object"?d(f,O.schema,N):N!==Fr(g)&&(N[0]==="#"?(d(f,i[N],N),i[N]=f):this.refs[N]=g),N}function E(N){if(typeof N=="string"){if(!qh.test(N))throw new Error(`invalid anchor "${N}"`);m.call(this,`#${N}`)}}}),i;function d(f,v,y){if(v!==void 0&&!Mh(f,v))throw u(y)}function u(f){return new Error(`reference "${f}" resolves to more than one schema`)}}je.getSchemaRefs=Gh;Object.defineProperty(ft,"__esModule",{value:!0});ft.getData=ft.KeywordCxt=ft.validateFunctionCode=void 0;const su=qr,lc=Pe,ca=Rt,gs=Pe,Kh=As,mn=wt,ro=xt,H=se,ee=Ze,Hh=je,Ot=M,sn=In;function Wh(e){if(iu(e)&&(cu(e),au(e))){Yh(e);return}ou(e,()=>(0,su.topBoolOrEmptySchema)(e))}ft.validateFunctionCode=Wh;function ou({gen:e,validateName:t,schema:r,schemaEnv:n,opts:s},o){s.code.es5?e.func(t,(0,H._)`${ee.default.data}, ${ee.default.valCxt}`,n.$async,()=>{e.code((0,H._)`"use strict"; ${uc(r,s)}`),Bh(e,s),e.code(o)}):e.func(t,(0,H._)`${ee.default.data}, ${xh(s)}`,n.$async,()=>e.code(uc(r,s)).code(o))}function xh(e){return(0,H._)`{${ee.default.instancePath}="", ${ee.default.parentData}, ${ee.default.parentDataProperty}, ${ee.default.rootData}=${ee.default.data}${e.dynamicRef?(0,H._)`, ${ee.default.dynamicAnchors}={}`:H.nil}}={}`}function Bh(e,t){e.if(ee.default.valCxt,()=>{e.var(ee.default.instancePath,(0,H._)`${ee.default.valCxt}.${ee.default.instancePath}`),e.var(ee.default.parentData,(0,H._)`${ee.default.valCxt}.${ee.default.parentData}`),e.var(ee.default.parentDataProperty,(0,H._)`${ee.default.valCxt}.${ee.default.parentDataProperty}`),e.var(ee.default.rootData,(0,H._)`${ee.default.valCxt}.${ee.default.rootData}`),t.dynamicRef&&e.var(ee.default.dynamicAnchors,(0,H._)`${ee.default.valCxt}.${ee.default.dynamicAnchors}`)},()=>{e.var(ee.default.instancePath,(0,H._)`""`),e.var(ee.default.parentData,(0,H._)`undefined`),e.var(ee.default.parentDataProperty,(0,H._)`undefined`),e.var(ee.default.rootData,ee.default.data),t.dynamicRef&&e.var(ee.default.dynamicAnchors,(0,H._)`{}`)})}function Yh(e){const{schema:t,opts:r,gen:n}=e;ou(e,()=>{r.$comment&&t.$comment&&uu(e),em(e),n.let(ee.default.vErrors,null),n.let(ee.default.errors,0),r.unevaluated&&Jh(e),lu(e),nm(e)})}function Jh(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,H._)`${r}.evaluated`),t.if((0,H._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,H._)`${e.evaluated}.props`,(0,H._)`undefined`)),t.if((0,H._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,H._)`${e.evaluated}.items`,(0,H._)`undefined`))}function uc(e,t){const r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,H._)`/*# sourceURL=${r} */`:H.nil}function Xh(e,t){if(iu(e)&&(cu(e),au(e))){Zh(e,t);return}(0,su.boolOrEmptySchema)(e,t)}function au({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function iu(e){return typeof e.schema!="boolean"}function Zh(e,t){const{schema:r,gen:n,opts:s}=e;s.$comment&&r.$comment&&uu(e),tm(e),rm(e);const o=n.const("_errs",ee.default.errors);lu(e,o),n.var(t,(0,H._)`${o} === ${ee.default.errors}`)}function cu(e){(0,Ot.checkUnknownRules)(e),Qh(e)}function lu(e,t){if(e.opts.jtd)return dc(e,[],!1,t);const r=(0,lc.getSchemaTypes)(e.schema),n=(0,lc.coerceAndCheckDataType)(e,r);dc(e,r,!n,t)}function Qh(e){const{schema:t,errSchemaPath:r,opts:n,self:s}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,Ot.schemaHasRulesButRef)(t,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function em(e){const{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Ot.checkStrictMode)(e,"default is ignored in the schema root")}function tm(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,Hh.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function rm(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function uu({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:s}){const o=r.$comment;if(s.$comment===!0)e.code((0,H._)`${ee.default.self}.logger.log(${o})`);else if(typeof s.$comment=="function"){const a=(0,H.str)`${n}/$comment`,i=e.scopeValue("root",{ref:t.root});e.code((0,H._)`${ee.default.self}.opts.$comment(${o}, ${a}, ${i}.schema)`)}}function nm(e){const{gen:t,schemaEnv:r,validateName:n,ValidationError:s,opts:o}=e;r.$async?t.if((0,H._)`${ee.default.errors} === 0`,()=>t.return(ee.default.data),()=>t.throw((0,H._)`new ${s}(${ee.default.vErrors})`)):(t.assign((0,H._)`${n}.errors`,ee.default.vErrors),o.unevaluated&&sm(e),t.return((0,H._)`${ee.default.errors} === 0`))}function sm({gen:e,evaluated:t,props:r,items:n}){r instanceof H.Name&&e.assign((0,H._)`${t}.props`,r),n instanceof H.Name&&e.assign((0,H._)`${t}.items`,n)}function dc(e,t,r,n){const{gen:s,schema:o,data:a,allErrors:i,opts:c,self:d}=e,{RULES:u}=d;if(o.$ref&&(c.ignoreKeywordsWithRef||!(0,Ot.schemaHasRulesButRef)(o,u))){s.block(()=>hu(e,"$ref",u.all.$ref.definition));return}c.jtd||om(e,t),s.block(()=>{for(const v of u.rules)f(v);f(u.post)});function f(v){(0,ca.shouldUseGroup)(o,v)&&(v.type?(s.if((0,gs.checkDataType)(v.type,a,c.strictNumbers)),fc(e,v),t.length===1&&t[0]===v.type&&r&&(s.else(),(0,gs.reportTypeError)(e)),s.endIf()):fc(e,v),i||s.if((0,H._)`${ee.default.errors} === ${n||0}`))}}function fc(e,t){const{gen:r,schema:n,opts:{useDefaults:s}}=e;s&&(0,Kh.assignDefaults)(e,t.type),r.block(()=>{for(const o of t.rules)(0,ca.shouldUseRule)(n,o)&&hu(e,o.keyword,o.definition,t.type)})}function om(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(am(e,t),e.opts.allowUnionTypes||im(e,t),cm(e,e.dataTypes))}function am(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{du(e.dataTypes,r)||la(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),um(e,t)}}function im(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&la(e,"use allowUnionTypes to allow union type keyword")}function cm(e,t){const r=e.self.RULES.all;for(const n in r){const s=r[n];if(typeof s=="object"&&(0,ca.shouldUseRule)(e.schema,s)){const{type:o}=s.definition;o.length&&!o.some(a=>lm(t,a))&&la(e,`missing type "${o.join(",")}" for keyword "${n}"`)}}}function lm(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function du(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function um(e,t){const r=[];for(const n of e.dataTypes)du(t,n)?r.push(n):t.includes("integer")&&n==="number"&&r.push("integer");e.dataTypes=r}function la(e,t){const r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,Ot.checkStrictMode)(e,t,e.opts.strictTypes)}let fu=class{constructor(t,r,n){if((0,mn.validateKeywordUsage)(t,r,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Ot.schemaRefOrVal)(t,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",mu(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,mn.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",ee.default.errors))}result(t,r,n){this.failResult((0,H.not)(t),r,n)}failResult(t,r,n){this.gen.if(t),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,H.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:r}=this;this.fail((0,H._)`${r} !== undefined && (${(0,H.or)(this.invalid$data(),t)})`)}error(t,r,n){if(r){this.setParams(r),this._error(t,n),this.setParams({});return}this._error(t,n)}_error(t,r){(t?sn.reportExtraError:sn.reportError)(this,this.def.error,r)}$dataError(){(0,sn.reportError)(this,this.def.$dataError||sn.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,sn.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,n=H.nil){this.gen.block(()=>{this.check$data(t,n),r()})}check$data(t=H.nil,r=H.nil){if(!this.$data)return;const{gen:n,schemaCode:s,schemaType:o,def:a}=this;n.if((0,H.or)((0,H._)`${s} === undefined`,r)),t!==H.nil&&n.assign(t,!0),(o.length||a.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),t!==H.nil&&n.assign(t,!1)),n.else()}invalid$data(){const{gen:t,schemaCode:r,schemaType:n,def:s,it:o}=this;return(0,H.or)(a(),i());function a(){if(n.length){if(!(r instanceof H.Name))throw new Error("ajv implementation error");const c=Array.isArray(n)?n:[n];return(0,H._)`${(0,gs.checkDataTypes)(c,r,o.opts.strictNumbers,gs.DataType.Wrong)}`}return H.nil}function i(){if(s.validateSchema){const c=t.scopeValue("validate$data",{ref:s.validateSchema});return(0,H._)`!${c}(${r})`}return H.nil}}subschema(t,r){const n=(0,ro.getSubschema)(this.it,t);(0,ro.extendSubschemaData)(n,this.it,t),(0,ro.extendSubschemaMode)(n,t);const s={...this.it,...n,items:void 0,props:void 0};return Xh(s,r),s}mergeEvaluated(t,r){const{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&t.props!==void 0&&(n.props=Ot.mergeEvaluated.props(s,t.props,n.props,r)),n.items!==!0&&t.items!==void 0&&(n.items=Ot.mergeEvaluated.items(s,t.items,n.items,r)))}mergeValidEvaluated(t,r){const{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(t,H.Name)),!0}};ft.KeywordCxt=fu;function hu(e,t,r,n){const s=new fu(e,r,t);"code"in r?r.code(s,n):s.$data&&r.validate?(0,mn.funcKeywordCode)(s,r):"macro"in r?(0,mn.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,mn.funcKeywordCode)(s,r)}const dm=/^\/(?:[^~]|~0|~1)*$/,fm=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function mu(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let s,o;if(e==="")return ee.default.rootData;if(e[0]==="/"){if(!dm.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);s=e,o=ee.default.rootData}else{const d=fm.exec(e);if(!d)throw new Error(`Invalid JSON-pointer: ${e}`);const u=+d[1];if(s=d[2],s==="#"){if(u>=t)throw new Error(c("property/index",u));return n[t-u]}if(u>t)throw new Error(c("data",u));if(o=r[t-u],!s)return o}let a=o;const i=s.split("/");for(const d of i)d&&(o=(0,H._)`${o}${(0,H.getProperty)((0,Ot.unescapeJsonPointer)(d))}`,a=(0,H._)`${a} && ${o}`);return a;function c(d,u){return`Cannot access ${d} ${u} levels up, current level is ${t}`}}ft.getData=mu;var Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});let hm=class extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}};Tn.default=hm;var Wr={};Object.defineProperty(Wr,"__esModule",{value:!0});const no=je;let mm=class extends Error{constructor(t,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,no.resolveUrl)(t,r,n),this.missingSchema=(0,no.normalizeId)((0,no.getFullPath)(t,this.missingRef))}};Wr.default=mm;var Ve={};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.resolveSchema=Ve.getCompilingSchema=Ve.resolveRef=Ve.compileSchema=Ve.SchemaEnv=void 0;const nt=se,pm=Tn,ur=Ze,ut=je,hc=M,ym=ft;let Cs=class{constructor(t){var r;this.refs={},this.dynamicAnchors={};let n;typeof t.schema=="object"&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,ut.normalizeId)(n==null?void 0:n[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=n==null?void 0:n.$async,this.refs={}}};Ve.SchemaEnv=Cs;function ua(e){const t=pu.call(this,e);if(t)return t;const r=(0,ut.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:o}=this.opts,a=new nt.CodeGen(this.scope,{es5:n,lines:s,ownProperties:o});let i;e.$async&&(i=a.scopeValue("Error",{ref:pm.default,code:(0,nt._)`require("ajv/dist/runtime/validation_error").default`}));const c=a.scopeName("validate");e.validateName=c;const d={gen:a,allErrors:this.opts.allErrors,data:ur.default.data,parentData:ur.default.parentData,parentDataProperty:ur.default.parentDataProperty,dataNames:[ur.default.data],dataPathArr:[nt.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:a.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,nt.stringify)(e.schema)}:{ref:e.schema}),validateName:c,ValidationError:i,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:nt.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,nt._)`""`,opts:this.opts,self:this};let u;try{this._compilations.add(e),(0,ym.validateFunctionCode)(d),a.optimize(this.opts.code.optimize);const f=a.toString();u=`${a.scopeRefs(ur.default.scope)}return ${f}`,this.opts.code.process&&(u=this.opts.code.process(u,e));const y=new Function(`${ur.default.self}`,`${ur.default.scope}`,u)(this,this.scope.get());if(this.scope.value(c,{ref:y}),y.errors=null,y.schema=e.schema,y.schemaEnv=e,e.$async&&(y.$async=!0),this.opts.code.source===!0&&(y.source={validateName:c,validateCode:f,scopeValues:a._values}),this.opts.unevaluated){const{props:w,items:g}=d;y.evaluated={props:w instanceof nt.Name?void 0:w,items:g instanceof nt.Name?void 0:g,dynamicProps:w instanceof nt.Name,dynamicItems:g instanceof nt.Name},y.source&&(y.source.evaluated=(0,nt.stringify)(y.evaluated))}return e.validate=y,e}catch(f){throw delete e.validate,delete e.validateName,u&&this.logger.error("Error compiling schema, function code:",u),f}finally{this._compilations.delete(e)}}Ve.compileSchema=ua;function $m(e,t,r){var n;r=(0,ut.resolveUrl)(this.opts.uriResolver,t,r);const s=e.refs[r];if(s)return s;let o=vm.call(this,e,r);if(o===void 0){const a=(n=e.localRefs)===null||n===void 0?void 0:n[r],{schemaId:i}=this.opts;a&&(o=new Cs({schema:a,schemaId:i,root:e,baseId:t}))}if(o!==void 0)return e.refs[r]=gm.call(this,o)}Ve.resolveRef=$m;function gm(e){return(0,ut.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:ua.call(this,e)}function pu(e){for(const t of this._compilations)if(_m(t,e))return t}Ve.getCompilingSchema=pu;function _m(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function vm(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||Ms.call(this,e,t)}function Ms(e,t){const r=this.opts.uriResolver.parse(t),n=(0,ut._getFullPath)(this.opts.uriResolver,r);let s=(0,ut.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===s)return so.call(this,r,e);const o=(0,ut.normalizeId)(n),a=this.refs[o]||this.schemas[o];if(typeof a=="string"){const i=Ms.call(this,e,a);return typeof(i==null?void 0:i.schema)!="object"?void 0:so.call(this,r,i)}if(typeof(a==null?void 0:a.schema)=="object"){if(a.validate||ua.call(this,a),o===(0,ut.normalizeId)(t)){const{schema:i}=a,{schemaId:c}=this.opts,d=i[c];return d&&(s=(0,ut.resolveUrl)(this.opts.uriResolver,s,d)),new Cs({schema:i,schemaId:c,root:e,baseId:s})}return so.call(this,r,a)}}Ve.resolveSchema=Ms;const wm=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function so(e,{baseId:t,schema:r,root:n}){var s;if(((s=e.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(const i of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const c=r[(0,hc.unescapeFragment)(i)];if(c===void 0)return;r=c;const d=typeof r=="object"&&r[this.opts.schemaId];!wm.has(i)&&d&&(t=(0,ut.resolveUrl)(this.opts.uriResolver,t,d))}let o;if(typeof r!="boolean"&&r.$ref&&!(0,hc.schemaHasRulesButRef)(r,this.RULES)){const i=(0,ut.resolveUrl)(this.opts.uriResolver,t,r.$ref);o=Ms.call(this,n,i)}const{schemaId:a}=this.opts;if(o=o||new Cs({schema:r,schemaId:a,root:n,baseId:t}),o.schema!==o.root.schema)return o}const Em="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",bm="Meta-schema for $data reference (JSON AnySchema extension proposal)",Sm="object",Pm=["$data"],Nm={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Rm=!1,Om={$id:Em,description:bm,type:Sm,required:Pm,properties:Nm,additionalProperties:Rm};var da={},Ds={exports:{}};const Im=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),yu=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function $u(e){let t="",r=0,n=0;for(n=0;n<e.length;n++)if(r=e[n].charCodeAt(0),r!==48){if(!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";t+=e[n];break}for(n+=1;n<e.length;n++){if(r=e[n].charCodeAt(0),!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";t+=e[n]}return t}const Tm=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function mc(e){return e.length=0,!0}function jm(e,t,r){if(e.length){const n=$u(e);if(n!=="")t.push(n);else return r.error=!0,!1;e.length=0}return!0}function Am(e){let t=0;const r={error:!1,address:"",zone:""},n=[],s=[];let o=!1,a=!1,i=jm;for(let c=0;c<e.length;c++){const d=e[c];if(!(d==="["||d==="]"))if(d===":"){if(o===!0&&(a=!0),!i(s,n,r))break;if(++t>7){r.error=!0;break}c>0&&e[c-1]===":"&&(o=!0),n.push(":");continue}else if(d==="%"){if(!i(s,n,r))break;i=mc}else{s.push(d);continue}}return s.length&&(i===mc?r.zone=s.join(""):a?n.push(s.join("")):n.push($u(s))),r.address=n.join(""),r}function gu(e){if(km(e,":")<2)return{host:e,isIPV6:!1};const t=Am(e);if(t.error)return{host:e,isIPV6:!1};{let r=t.address,n=t.address;return t.zone&&(r+="%"+t.zone,n+="%25"+t.zone),{host:r,isIPV6:!0,escapedHost:n}}}function km(e,t){let r=0;for(let n=0;n<e.length;n++)e[n]===t&&r++;return r}function Cm(e){let t=e;const r=[];let n=-1,s=0;for(;s=t.length;){if(s===1){if(t===".")break;if(t==="/"){r.push("/");break}else{r.push(t);break}}else if(s===2){if(t[0]==="."){if(t[1]===".")break;if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&(t[1]==="."||t[1]==="/")){r.push("/");break}}else if(s===3&&t==="/.."){r.length!==0&&r.pop(),r.push("/");break}if(t[0]==="."){if(t[1]==="."){if(t[2]==="/"){t=t.slice(3);continue}}else if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&t[1]==="."){if(t[2]==="/"){t=t.slice(2);continue}else if(t[2]==="."&&t[3]==="/"){t=t.slice(3),r.length!==0&&r.pop();continue}}if((n=t.indexOf("/",1))===-1){r.push(t);break}else r.push(t.slice(0,n)),t=t.slice(n)}return r.join("")}function Mm(e,t){const r=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=r(e.scheme)),e.userinfo!==void 0&&(e.userinfo=r(e.userinfo)),e.host!==void 0&&(e.host=r(e.host)),e.path!==void 0&&(e.path=r(e.path)),e.query!==void 0&&(e.query=r(e.query)),e.fragment!==void 0&&(e.fragment=r(e.fragment)),e}function Dm(e){const t=[];if(e.userinfo!==void 0&&(t.push(e.userinfo),t.push("@")),e.host!==void 0){let r=unescape(e.host);if(!yu(r)){const n=gu(r);n.isIPV6===!0?r=`[${n.escapedHost}]`:r=e.host}t.push(r)}return(typeof e.port=="number"||typeof e.port=="string")&&(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0}var _u={nonSimpleDomain:Tm,recomposeAuthority:Dm,normalizeComponentEncoding:Mm,removeDotSegments:Cm,isIPv4:yu,isUUID:Im,normalizeIPv6:gu};const{isUUID:Fm}=_u,Lm=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function vu(e){return e.secure===!0?!0:e.secure===!1?!1:e.scheme?e.scheme.length===3&&(e.scheme[0]==="w"||e.scheme[0]==="W")&&(e.scheme[1]==="s"||e.scheme[1]==="S")&&(e.scheme[2]==="s"||e.scheme[2]==="S"):!1}function wu(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function Eu(e){const t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function zm(e){return e.secure=vu(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function Vm(e){if((e.port===(vu(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,r]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}function Um(e,t){if(!e.path)return e.error="URN can not be parsed",e;const r=e.path.match(Lm);if(r){const n=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];const s=`${n}:${t.nid||e.nid}`,o=fa(s);e.path=void 0,o&&(e=o.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function qm(e,t){if(e.nid===void 0)throw new Error("URN without nid cannot be serialized");const r=t.scheme||e.scheme||"urn",n=e.nid.toLowerCase(),s=`${r}:${t.nid||n}`,o=fa(s);o&&(e=o.serialize(e,t));const a=e,i=e.nss;return a.path=`${n||t.nid}:${i}`,t.skipEscape=!0,a}function Gm(e,t){const r=e;return r.uuid=r.nss,r.nss=void 0,!t.tolerant&&(!r.uuid||!Fm(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function Km(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t}const bu={scheme:"http",domainHost:!0,parse:wu,serialize:Eu},Hm={scheme:"https",domainHost:bu.domainHost,parse:wu,serialize:Eu},as={scheme:"ws",domainHost:!0,parse:zm,serialize:Vm},Wm={scheme:"wss",domainHost:as.domainHost,parse:as.parse,serialize:as.serialize},xm={scheme:"urn",parse:Um,serialize:qm,skipNormalize:!0},Bm={scheme:"urn:uuid",parse:Gm,serialize:Km,skipNormalize:!0},_s={http:bu,https:Hm,ws:as,wss:Wm,urn:xm,"urn:uuid":Bm};Object.setPrototypeOf(_s,null);function fa(e){return e&&(_s[e]||_s[e.toLowerCase()])||void 0}var Ym={SCHEMES:_s,getSchemeHandler:fa};const{normalizeIPv6:Jm,removeDotSegments:dn,recomposeAuthority:Xm,normalizeComponentEncoding:Ln,isIPv4:Zm,nonSimpleDomain:Qm}=_u,{SCHEMES:ep,getSchemeHandler:Su}=Ym;function tp(e,t){return typeof e=="string"?e=Et(jt(e,t),t):typeof e=="object"&&(e=jt(Et(e,t),t)),e}function rp(e,t,r){const n=r?Object.assign({scheme:"null"},r):{scheme:"null"},s=Pu(jt(e,n),jt(t,n),n,!0);return n.skipEscape=!0,Et(s,n)}function Pu(e,t,r,n){const s={};return n||(e=jt(Et(e,r),r),t=jt(Et(t,r),r)),r=r||{},!r.tolerant&&t.scheme?(s.scheme=t.scheme,s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=dn(t.path||""),s.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=dn(t.path||""),s.query=t.query):(t.path?(t.path[0]==="/"?s.path=dn(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?s.path="/"+t.path:e.path?s.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:s.path=t.path,s.path=dn(s.path)),s.query=t.query):(s.path=e.path,t.query!==void 0?s.query=t.query:s.query=e.query),s.userinfo=e.userinfo,s.host=e.host,s.port=e.port),s.scheme=e.scheme),s.fragment=t.fragment,s}function np(e,t,r){return typeof e=="string"?(e=unescape(e),e=Et(Ln(jt(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=Et(Ln(e,!0),{...r,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=Et(Ln(jt(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=Et(Ln(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function Et(e,t){const r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},n=Object.assign({},t),s=[],o=Su(n.scheme||r.scheme);o&&o.serialize&&o.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&s.push(r.scheme,":");const a=Xm(r);if(a!==void 0&&(n.reference!=="suffix"&&s.push("//"),s.push(a),r.path&&r.path[0]!=="/"&&s.push("/")),r.path!==void 0){let i=r.path;!n.absolutePath&&(!o||!o.absolutePath)&&(i=dn(i)),a===void 0&&i[0]==="/"&&i[1]==="/"&&(i="/%2F"+i.slice(2)),s.push(i)}return r.query!==void 0&&s.push("?",r.query),r.fragment!==void 0&&s.push("#",r.fragment),s.join("")}const sp=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function jt(e,t){const r=Object.assign({},t),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let s=!1;r.reference==="suffix"&&(r.scheme?e=r.scheme+":"+e:e="//"+e);const o=e.match(sp);if(o){if(n.scheme=o[1],n.userinfo=o[3],n.host=o[4],n.port=parseInt(o[5],10),n.path=o[6]||"",n.query=o[7],n.fragment=o[8],isNaN(n.port)&&(n.port=o[5]),n.host)if(Zm(n.host)===!1){const c=Jm(n.host);n.host=c.host.toLowerCase(),s=c.isIPV6}else s=!0;n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&n.query===void 0&&!n.path?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");const a=Su(r.scheme||n.scheme);if(!r.unicodeSupport&&(!a||!a.unicodeSupport)&&n.host&&(r.domainHost||a&&a.domainHost)&&s===!1&&Qm(n.host))try{n.host=URL.domainToASCII(n.host.toLowerCase())}catch(i){n.error=n.error||"Host's domain name can not be converted to ASCII: "+i}(!a||a&&!a.skipNormalize)&&(e.indexOf("%")!==-1&&(n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),n.host!==void 0&&(n.host=unescape(n.host))),n.path&&(n.path=escape(unescape(n.path))),n.fragment&&(n.fragment=encodeURI(decodeURIComponent(n.fragment)))),a&&a.parse&&a.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}const ha={SCHEMES:ep,normalize:tp,resolve:rp,resolveComponent:Pu,equal:np,serialize:Et,parse:jt};Ds.exports=ha;Ds.exports.default=ha;Ds.exports.fastUri=ha;var Nu=Ds.exports;Object.defineProperty(da,"__esModule",{value:!0});const Ru=Nu;Ru.code='require("ajv/dist/runtime/uri").default';da.default=Ru;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=ft;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=se;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=Tn,s=Wr,o=br,a=Ve,i=se,c=je,d=Pe,u=M,f=Om,v=da,y=(P,p)=>new RegExp(P,p);y.code="new RegExp";const w=["removeAdditional","useDefaults","coerceTypes"],g=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),$={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},m={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},E=200;function N(P){var p,S,_,l,h,b,I,j,G,U,ue,xe,Yt,Jt,Xt,Zt,Qt,er,tr,rr,nr,sr,or,ar,ir;const rt=P.strict,cr=(p=P.code)===null||p===void 0?void 0:p.optimize,tn=cr===!0||cr===void 0?1:cr||0,rn=(_=(S=P.code)===null||S===void 0?void 0:S.regExp)!==null&&_!==void 0?_:y,Xs=(l=P.uriResolver)!==null&&l!==void 0?l:v.default;return{strictSchema:(b=(h=P.strictSchema)!==null&&h!==void 0?h:rt)!==null&&b!==void 0?b:!0,strictNumbers:(j=(I=P.strictNumbers)!==null&&I!==void 0?I:rt)!==null&&j!==void 0?j:!0,strictTypes:(U=(G=P.strictTypes)!==null&&G!==void 0?G:rt)!==null&&U!==void 0?U:"log",strictTuples:(xe=(ue=P.strictTuples)!==null&&ue!==void 0?ue:rt)!==null&&xe!==void 0?xe:"log",strictRequired:(Jt=(Yt=P.strictRequired)!==null&&Yt!==void 0?Yt:rt)!==null&&Jt!==void 0?Jt:!1,code:P.code?{...P.code,optimize:tn,regExp:rn}:{optimize:tn,regExp:rn},loopRequired:(Xt=P.loopRequired)!==null&&Xt!==void 0?Xt:E,loopEnum:(Zt=P.loopEnum)!==null&&Zt!==void 0?Zt:E,meta:(Qt=P.meta)!==null&&Qt!==void 0?Qt:!0,messages:(er=P.messages)!==null&&er!==void 0?er:!0,inlineRefs:(tr=P.inlineRefs)!==null&&tr!==void 0?tr:!0,schemaId:(rr=P.schemaId)!==null&&rr!==void 0?rr:"$id",addUsedSchema:(nr=P.addUsedSchema)!==null&&nr!==void 0?nr:!0,validateSchema:(sr=P.validateSchema)!==null&&sr!==void 0?sr:!0,validateFormats:(or=P.validateFormats)!==null&&or!==void 0?or:!0,unicodeRegExp:(ar=P.unicodeRegExp)!==null&&ar!==void 0?ar:!0,int32range:(ir=P.int32range)!==null&&ir!==void 0?ir:!0,uriResolver:Xs}}class R{constructor(p={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,p=this.opts={...p,...N(p)};const{es5:S,lines:_}=this.opts.code;this.scope=new i.ValueScope({scope:{},prefixes:g,es5:S,lines:_}),this.logger=Y(p.logger);const l=p.validateFormats;p.validateFormats=!1,this.RULES=(0,o.getRules)(),O.call(this,$,p,"NOT SUPPORTED"),O.call(this,m,p,"DEPRECATED","warn"),this._metaOpts=Se.call(this),p.formats&&ge.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),p.keywords&&we.call(this,p.keywords),typeof p.meta=="object"&&this.addMetaSchema(p.meta),re.call(this),p.validateFormats=l}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:p,meta:S,schemaId:_}=this.opts;let l=f;_==="id"&&(l={...f},l.id=l.$id,delete l.$id),S&&p&&this.addMetaSchema(l,l[_],!1)}defaultMeta(){const{meta:p,schemaId:S}=this.opts;return this.opts.defaultMeta=typeof p=="object"?p[S]||p:void 0}validate(p,S){let _;if(typeof p=="string"){if(_=this.getSchema(p),!_)throw new Error(`no schema with key or ref "${p}"`)}else _=this.compile(p);const l=_(S);return"$async"in _||(this.errors=_.errors),l}compile(p,S){const _=this._addSchema(p,S);return _.validate||this._compileSchemaEnv(_)}compileAsync(p,S){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:_}=this.opts;return l.call(this,p,S);async function l(U,ue){await h.call(this,U.$schema);const xe=this._addSchema(U,ue);return xe.validate||b.call(this,xe)}async function h(U){U&&!this.getSchema(U)&&await l.call(this,{$ref:U},!0)}async function b(U){try{return this._compileSchemaEnv(U)}catch(ue){if(!(ue instanceof s.default))throw ue;return I.call(this,ue),await j.call(this,ue.missingSchema),b.call(this,U)}}function I({missingSchema:U,missingRef:ue}){if(this.refs[U])throw new Error(`AnySchema ${U} is loaded but ${ue} cannot be resolved`)}async function j(U){const ue=await G.call(this,U);this.refs[U]||await h.call(this,ue.$schema),this.refs[U]||this.addSchema(ue,U,S)}async function G(U){const ue=this._loading[U];if(ue)return ue;try{return await(this._loading[U]=_(U))}finally{delete this._loading[U]}}}addSchema(p,S,_,l=this.opts.validateSchema){if(Array.isArray(p)){for(const b of p)this.addSchema(b,void 0,_,l);return this}let h;if(typeof p=="object"){const{schemaId:b}=this.opts;if(h=p[b],h!==void 0&&typeof h!="string")throw new Error(`schema ${b} must be string`)}return S=(0,c.normalizeId)(S||h),this._checkUnique(S),this.schemas[S]=this._addSchema(p,_,S,l,!0),this}addMetaSchema(p,S,_=this.opts.validateSchema){return this.addSchema(p,S,!0,_),this}validateSchema(p,S){if(typeof p=="boolean")return!0;let _;if(_=p.$schema,_!==void 0&&typeof _!="string")throw new Error("$schema must be a string");if(_=_||this.opts.defaultMeta||this.defaultMeta(),!_)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const l=this.validate(_,p);if(!l&&S){const h="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(h);else throw new Error(h)}return l}getSchema(p){let S;for(;typeof(S=x.call(this,p))=="string";)p=S;if(S===void 0){const{schemaId:_}=this.opts,l=new a.SchemaEnv({schema:{},schemaId:_});if(S=a.resolveSchema.call(this,l,p),!S)return;this.refs[p]=S}return S.validate||this._compileSchemaEnv(S)}removeSchema(p){if(p instanceof RegExp)return this._removeAllSchemas(this.schemas,p),this._removeAllSchemas(this.refs,p),this;switch(typeof p){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const S=x.call(this,p);return typeof S=="object"&&this._cache.delete(S.schema),delete this.schemas[p],delete this.refs[p],this}case"object":{const S=p;this._cache.delete(S);let _=p[this.opts.schemaId];return _&&(_=(0,c.normalizeId)(_),delete this.schemas[_],delete this.refs[_]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(p){for(const S of p)this.addKeyword(S);return this}addKeyword(p,S){let _;if(typeof p=="string")_=p,typeof S=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),S.keyword=_);else if(typeof p=="object"&&S===void 0){if(S=p,_=S.keyword,Array.isArray(_)&&!_.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(T.call(this,_,S),!S)return(0,u.eachItem)(_,h=>A.call(this,h)),this;F.call(this,S);const l={...S,type:(0,d.getJSONTypes)(S.type),schemaType:(0,d.getJSONTypes)(S.schemaType)};return(0,u.eachItem)(_,l.type.length===0?h=>A.call(this,h,l):h=>l.type.forEach(b=>A.call(this,h,l,b))),this}getKeyword(p){const S=this.RULES.all[p];return typeof S=="object"?S.definition:!!S}removeKeyword(p){const{RULES:S}=this;delete S.keywords[p],delete S.all[p];for(const _ of S.rules){const l=_.rules.findIndex(h=>h.keyword===p);l>=0&&_.rules.splice(l,1)}return this}addFormat(p,S){return typeof S=="string"&&(S=new RegExp(S)),this.formats[p]=S,this}errorsText(p=this.errors,{separator:S=", ",dataVar:_="data"}={}){return!p||p.length===0?"No errors":p.map(l=>`${_}${l.instancePath} ${l.message}`).reduce((l,h)=>l+S+h)}$dataMetaSchema(p,S){const _=this.RULES.all;p=JSON.parse(JSON.stringify(p));for(const l of S){const h=l.split("/").slice(1);let b=p;for(const I of h)b=b[I];for(const I in _){const j=_[I];if(typeof j!="object")continue;const{$data:G}=j.definition,U=b[I];G&&U&&(b[I]=L(U))}}return p}_removeAllSchemas(p,S){for(const _ in p){const l=p[_];(!S||S.test(_))&&(typeof l=="string"?delete p[_]:l&&!l.meta&&(this._cache.delete(l.schema),delete p[_]))}}_addSchema(p,S,_,l=this.opts.validateSchema,h=this.opts.addUsedSchema){let b;const{schemaId:I}=this.opts;if(typeof p=="object")b=p[I];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof p!="boolean")throw new Error("schema must be object or boolean")}let j=this._cache.get(p);if(j!==void 0)return j;_=(0,c.normalizeId)(b||_);const G=c.getSchemaRefs.call(this,p,_);return j=new a.SchemaEnv({schema:p,schemaId:I,meta:S,baseId:_,localRefs:G}),this._cache.set(j.schema,j),h&&!_.startsWith("#")&&(_&&this._checkUnique(_),this.refs[_]=j),l&&this.validateSchema(p,!0),j}_checkUnique(p){if(this.schemas[p]||this.refs[p])throw new Error(`schema with key or id "${p}" already exists`)}_compileSchemaEnv(p){if(p.meta?this._compileMetaSchema(p):a.compileSchema.call(this,p),!p.validate)throw new Error("ajv implementation error");return p.validate}_compileMetaSchema(p){const S=this.opts;this.opts=this._metaOpts;try{a.compileSchema.call(this,p)}finally{this.opts=S}}}R.ValidationError=n.default,R.MissingRefError=s.default,e.default=R;function O(P,p,S,_="error"){for(const l in P){const h=l;h in p&&this.logger[_](`${S}: option ${l}. ${P[h]}`)}}function x(P){return P=(0,c.normalizeId)(P),this.schemas[P]||this.refs[P]}function re(){const P=this.opts.schemas;if(P)if(Array.isArray(P))this.addSchema(P);else for(const p in P)this.addSchema(P[p],p)}function ge(){for(const P in this.opts.formats){const p=this.opts.formats[P];p&&this.addFormat(P,p)}}function we(P){if(Array.isArray(P)){this.addVocabulary(P);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const p in P){const S=P[p];S.keyword||(S.keyword=p),this.addKeyword(S)}}function Se(){const P={...this.opts};for(const p of w)delete P[p];return P}const K={log(){},warn(){},error(){}};function Y(P){if(P===!1)return K;if(P===void 0)return console;if(P.log&&P.warn&&P.error)return P;throw new Error("logger must implement log, warn and error methods")}const fe=/^[a-z_$][a-z0-9_$:-]*$/i;function T(P,p){const{RULES:S}=this;if((0,u.eachItem)(P,_=>{if(S.keywords[_])throw new Error(`Keyword ${_} is already defined`);if(!fe.test(_))throw new Error(`Keyword ${_} has invalid name`)}),!!p&&p.$data&&!("code"in p||"validate"in p))throw new Error('$data keyword must have "code" or "validate" function')}function A(P,p,S){var _;const l=p==null?void 0:p.post;if(S&&l)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:h}=this;let b=l?h.post:h.rules.find(({type:j})=>j===S);if(b||(b={type:S,rules:[]},h.rules.push(b)),h.keywords[P]=!0,!p)return;const I={keyword:P,definition:{...p,type:(0,d.getJSONTypes)(p.type),schemaType:(0,d.getJSONTypes)(p.schemaType)}};p.before?V.call(this,b,I,p.before):b.rules.push(I),h.all[P]=I,(_=p.implements)===null||_===void 0||_.forEach(j=>this.addKeyword(j))}function V(P,p,S){const _=P.rules.findIndex(l=>l.keyword===S);_>=0?P.rules.splice(_,0,p):(P.rules.push(p),this.logger.warn(`rule ${S} is not defined`))}function F(P){let{metaSchema:p}=P;p!==void 0&&(P.$data&&this.opts.$data&&(p=L(p)),P.validateSchema=this.compile(p,!0))}const B={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function L(P){return{anyOf:[P,B]}}})(Ll);var ma={},pa={},ya={};Object.defineProperty(ya,"__esModule",{value:!0});const op={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};ya.default=op;var At={};Object.defineProperty(At,"__esModule",{value:!0});At.callRef=At.getValidate=void 0;const ap=Wr,pc=ce,Ge=se,Or=Ze,yc=Ve,zn=M,ip={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:n}=e,{baseId:s,schemaEnv:o,validateName:a,opts:i,self:c}=n,{root:d}=o;if((r==="#"||r==="#/")&&s===d.baseId)return f();const u=yc.resolveRef.call(c,d,s,r);if(u===void 0)throw new ap.default(n.opts.uriResolver,s,r);if(u instanceof yc.SchemaEnv)return v(u);return y(u);function f(){if(o===d)return is(e,a,o,o.$async);const w=t.scopeValue("root",{ref:d});return is(e,(0,Ge._)`${w}.validate`,d,d.$async)}function v(w){const g=Ou(e,w);is(e,g,w,w.$async)}function y(w){const g=t.scopeValue("schema",i.code.source===!0?{ref:w,code:(0,Ge.stringify)(w)}:{ref:w}),$=t.name("valid"),m=e.subschema({schema:w,dataTypes:[],schemaPath:Ge.nil,topSchemaRef:g,errSchemaPath:r},$);e.mergeEvaluated(m),e.ok($)}}};function Ou(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,Ge._)`${r.scopeValue("wrapper",{ref:t})}.validate`}At.getValidate=Ou;function is(e,t,r,n){const{gen:s,it:o}=e,{allErrors:a,schemaEnv:i,opts:c}=o,d=c.passContext?Or.default.this:Ge.nil;n?u():f();function u(){if(!i.$async)throw new Error("async schema referenced by sync schema");const w=s.let("valid");s.try(()=>{s.code((0,Ge._)`await ${(0,pc.callValidateCode)(e,t,d)}`),y(t),a||s.assign(w,!0)},g=>{s.if((0,Ge._)`!(${g} instanceof ${o.ValidationError})`,()=>s.throw(g)),v(g),a||s.assign(w,!1)}),e.ok(w)}function f(){e.result((0,pc.callValidateCode)(e,t,d),()=>y(t),()=>v(t))}function v(w){const g=(0,Ge._)`${w}.errors`;s.assign(Or.default.vErrors,(0,Ge._)`${Or.default.vErrors} === null ? ${g} : ${Or.default.vErrors}.concat(${g})`),s.assign(Or.default.errors,(0,Ge._)`${Or.default.vErrors}.length`)}function y(w){var g;if(!o.opts.unevaluated)return;const $=(g=r==null?void 0:r.validate)===null||g===void 0?void 0:g.evaluated;if(o.props!==!0)if($&&!$.dynamicProps)$.props!==void 0&&(o.props=zn.mergeEvaluated.props(s,$.props,o.props));else{const m=s.var("props",(0,Ge._)`${w}.evaluated.props`);o.props=zn.mergeEvaluated.props(s,m,o.props,Ge.Name)}if(o.items!==!0)if($&&!$.dynamicItems)$.items!==void 0&&(o.items=zn.mergeEvaluated.items(s,$.items,o.items));else{const m=s.var("items",(0,Ge._)`${w}.evaluated.items`);o.items=zn.mergeEvaluated.items(s,m,o.items,Ge.Name)}}}At.callRef=is;At.default=ip;Object.defineProperty(pa,"__esModule",{value:!0});const cp=ya,lp=At,up=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",cp.default,lp.default];pa.default=up;var $a={},ga={};Object.defineProperty(ga,"__esModule",{value:!0});const vs=se,Ft=vs.operators,ws={maximum:{okStr:"<=",ok:Ft.LTE,fail:Ft.GT},minimum:{okStr:">=",ok:Ft.GTE,fail:Ft.LT},exclusiveMaximum:{okStr:"<",ok:Ft.LT,fail:Ft.GTE},exclusiveMinimum:{okStr:">",ok:Ft.GT,fail:Ft.LTE}},dp={message:({keyword:e,schemaCode:t})=>(0,vs.str)`must be ${ws[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,vs._)`{comparison: ${ws[e].okStr}, limit: ${t}}`},fp={keyword:Object.keys(ws),type:"number",schemaType:"number",$data:!0,error:dp,code(e){const{keyword:t,data:r,schemaCode:n}=e;e.fail$data((0,vs._)`${r} ${ws[t].fail} ${n} || isNaN(${r})`)}};ga.default=fp;var _a={};Object.defineProperty(_a,"__esModule",{value:!0});const pn=se,hp={message:({schemaCode:e})=>(0,pn.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,pn._)`{multipleOf: ${e}}`},mp={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:hp,code(e){const{gen:t,data:r,schemaCode:n,it:s}=e,o=s.opts.multipleOfPrecision,a=t.let("res"),i=o?(0,pn._)`Math.abs(Math.round(${a}) - ${a}) > 1e-${o}`:(0,pn._)`${a} !== parseInt(${a})`;e.fail$data((0,pn._)`(${n} === 0 || (${a} = ${r}/${n}, ${i}))`)}};_a.default=mp;var va={},wa={};Object.defineProperty(wa,"__esModule",{value:!0});function Iu(e){const t=e.length;let r=0,n=0,s;for(;n<t;)r++,s=e.charCodeAt(n++),s>=55296&&s<=56319&&n<t&&(s=e.charCodeAt(n),(s&64512)===56320&&n++);return r}wa.default=Iu;Iu.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(va,"__esModule",{value:!0});const hr=se,pp=M,yp=wa,$p={message({keyword:e,schemaCode:t}){const r=e==="maxLength"?"more":"fewer";return(0,hr.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,hr._)`{limit: ${e}}`},gp={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:$p,code(e){const{keyword:t,data:r,schemaCode:n,it:s}=e,o=t==="maxLength"?hr.operators.GT:hr.operators.LT,a=s.opts.unicode===!1?(0,hr._)`${r}.length`:(0,hr._)`${(0,pp.useFunc)(e.gen,yp.default)}(${r})`;e.fail$data((0,hr._)`${a} ${o} ${n}`)}};va.default=gp;var Ea={};Object.defineProperty(Ea,"__esModule",{value:!0});const _p=ce,Es=se,vp={message:({schemaCode:e})=>(0,Es.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,Es._)`{pattern: ${e}}`},wp={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:vp,code(e){const{data:t,$data:r,schema:n,schemaCode:s,it:o}=e,a=o.opts.unicodeRegExp?"u":"",i=r?(0,Es._)`(new RegExp(${s}, ${a}))`:(0,_p.usePattern)(e,n);e.fail$data((0,Es._)`!${i}.test(${t})`)}};Ea.default=wp;var ba={};Object.defineProperty(ba,"__esModule",{value:!0});const yn=se,Ep={message({keyword:e,schemaCode:t}){const r=e==="maxProperties"?"more":"fewer";return(0,yn.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,yn._)`{limit: ${e}}`},bp={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Ep,code(e){const{keyword:t,data:r,schemaCode:n}=e,s=t==="maxProperties"?yn.operators.GT:yn.operators.LT;e.fail$data((0,yn._)`Object.keys(${r}).length ${s} ${n}`)}};ba.default=bp;var Sa={};Object.defineProperty(Sa,"__esModule",{value:!0});const on=ce,$n=se,Sp=M,Pp={message:({params:{missingProperty:e}})=>(0,$n.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,$n._)`{missingProperty: ${e}}`},Np={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Pp,code(e){const{gen:t,schema:r,schemaCode:n,data:s,$data:o,it:a}=e,{opts:i}=a;if(!o&&r.length===0)return;const c=r.length>=i.loopRequired;if(a.allErrors?d():u(),i.strictRequired){const y=e.parentSchema.properties,{definedProperties:w}=e.it;for(const g of r)if((y==null?void 0:y[g])===void 0&&!w.has(g)){const $=a.schemaEnv.baseId+a.errSchemaPath,m=`required property "${g}" is not defined at "${$}" (strictRequired)`;(0,Sp.checkStrictMode)(a,m,a.opts.strictRequired)}}function d(){if(c||o)e.block$data($n.nil,f);else for(const y of r)(0,on.checkReportMissingProp)(e,y)}function u(){const y=t.let("missing");if(c||o){const w=t.let("valid",!0);e.block$data(w,()=>v(y,w)),e.ok(w)}else t.if((0,on.checkMissingProp)(e,r,y)),(0,on.reportMissingProp)(e,y),t.else()}function f(){t.forOf("prop",n,y=>{e.setParams({missingProperty:y}),t.if((0,on.noPropertyInData)(t,s,y,i.ownProperties),()=>e.error())})}function v(y,w){e.setParams({missingProperty:y}),t.forOf(y,n,()=>{t.assign(w,(0,on.propertyInData)(t,s,y,i.ownProperties)),t.if((0,$n.not)(w),()=>{e.error(),t.break()})},$n.nil)}}};Sa.default=Np;var Pa={};Object.defineProperty(Pa,"__esModule",{value:!0});const gn=se,Rp={message({keyword:e,schemaCode:t}){const r=e==="maxItems"?"more":"fewer";return(0,gn.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,gn._)`{limit: ${e}}`},Op={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Rp,code(e){const{keyword:t,data:r,schemaCode:n}=e,s=t==="maxItems"?gn.operators.GT:gn.operators.LT;e.fail$data((0,gn._)`${r}.length ${s} ${n}`)}};Pa.default=Op;var Na={},jn={};Object.defineProperty(jn,"__esModule",{value:!0});const Tu=ks;Tu.code='require("ajv/dist/runtime/equal").default';jn.default=Tu;Object.defineProperty(Na,"__esModule",{value:!0});const oo=Pe,Ie=se,Ip=M,Tp=jn,jp={message:({params:{i:e,j:t}})=>(0,Ie.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,Ie._)`{i: ${e}, j: ${t}}`},Ap={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:jp,code(e){const{gen:t,data:r,$data:n,schema:s,parentSchema:o,schemaCode:a,it:i}=e;if(!n&&!s)return;const c=t.let("valid"),d=o.items?(0,oo.getSchemaTypes)(o.items):[];e.block$data(c,u,(0,Ie._)`${a} === false`),e.ok(c);function u(){const w=t.let("i",(0,Ie._)`${r}.length`),g=t.let("j");e.setParams({i:w,j:g}),t.assign(c,!0),t.if((0,Ie._)`${w} > 1`,()=>(f()?v:y)(w,g))}function f(){return d.length>0&&!d.some(w=>w==="object"||w==="array")}function v(w,g){const $=t.name("item"),m=(0,oo.checkDataTypes)(d,$,i.opts.strictNumbers,oo.DataType.Wrong),E=t.const("indices",(0,Ie._)`{}`);t.for((0,Ie._)`;${w}--;`,()=>{t.let($,(0,Ie._)`${r}[${w}]`),t.if(m,(0,Ie._)`continue`),d.length>1&&t.if((0,Ie._)`typeof ${$} == "string"`,(0,Ie._)`${$} += "_"`),t.if((0,Ie._)`typeof ${E}[${$}] == "number"`,()=>{t.assign(g,(0,Ie._)`${E}[${$}]`),e.error(),t.assign(c,!1).break()}).code((0,Ie._)`${E}[${$}] = ${w}`)})}function y(w,g){const $=(0,Ip.useFunc)(t,Tp.default),m=t.name("outer");t.label(m).for((0,Ie._)`;${w}--;`,()=>t.for((0,Ie._)`${g} = ${w}; ${g}--;`,()=>t.if((0,Ie._)`${$}(${r}[${w}], ${r}[${g}])`,()=>{e.error(),t.assign(c,!1).break(m)})))}}};Na.default=Ap;var Ra={};Object.defineProperty(Ra,"__esModule",{value:!0});const Ao=se,kp=M,Cp=jn,Mp={message:"must be equal to constant",params:({schemaCode:e})=>(0,Ao._)`{allowedValue: ${e}}`},Dp={keyword:"const",$data:!0,error:Mp,code(e){const{gen:t,data:r,$data:n,schemaCode:s,schema:o}=e;n||o&&typeof o=="object"?e.fail$data((0,Ao._)`!${(0,kp.useFunc)(t,Cp.default)}(${r}, ${s})`):e.fail((0,Ao._)`${o} !== ${r}`)}};Ra.default=Dp;var Oa={};Object.defineProperty(Oa,"__esModule",{value:!0});const fn=se,Fp=M,Lp=jn,zp={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,fn._)`{allowedValues: ${e}}`},Vp={keyword:"enum",schemaType:"array",$data:!0,error:zp,code(e){const{gen:t,data:r,$data:n,schema:s,schemaCode:o,it:a}=e;if(!n&&s.length===0)throw new Error("enum must have non-empty array");const i=s.length>=a.opts.loopEnum;let c;const d=()=>c??(c=(0,Fp.useFunc)(t,Lp.default));let u;if(i||n)u=t.let("valid"),e.block$data(u,f);else{if(!Array.isArray(s))throw new Error("ajv implementation error");const y=t.const("vSchema",o);u=(0,fn.or)(...s.map((w,g)=>v(y,g)))}e.pass(u);function f(){t.assign(u,!1),t.forOf("v",o,y=>t.if((0,fn._)`${d()}(${r}, ${y})`,()=>t.assign(u,!0).break()))}function v(y,w){const g=s[w];return typeof g=="object"&&g!==null?(0,fn._)`${d()}(${r}, ${y}[${w}])`:(0,fn._)`${r} === ${g}`}}};Oa.default=Vp;Object.defineProperty($a,"__esModule",{value:!0});const Up=ga,qp=_a,Gp=va,Kp=Ea,Hp=ba,Wp=Sa,xp=Pa,Bp=Na,Yp=Ra,Jp=Oa,Xp=[Up.default,qp.default,Gp.default,Kp.default,Hp.default,Wp.default,xp.default,Bp.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Yp.default,Jp.default];$a.default=Xp;var Ia={},xr={};Object.defineProperty(xr,"__esModule",{value:!0});xr.validateAdditionalItems=void 0;const mr=se,ko=M,Zp={message:({params:{len:e}})=>(0,mr.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,mr._)`{limit: ${e}}`},Qp={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Zp,code(e){const{parentSchema:t,it:r}=e,{items:n}=t;if(!Array.isArray(n)){(0,ko.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}ju(e,n)}};function ju(e,t){const{gen:r,schema:n,data:s,keyword:o,it:a}=e;a.items=!0;const i=r.const("len",(0,mr._)`${s}.length`);if(n===!1)e.setParams({len:t.length}),e.pass((0,mr._)`${i} <= ${t.length}`);else if(typeof n=="object"&&!(0,ko.alwaysValidSchema)(a,n)){const d=r.var("valid",(0,mr._)`${i} <= ${t.length}`);r.if((0,mr.not)(d),()=>c(d)),e.ok(d)}function c(d){r.forRange("i",t.length,i,u=>{e.subschema({keyword:o,dataProp:u,dataPropType:ko.Type.Num},d),a.allErrors||r.if((0,mr.not)(d),()=>r.break())})}}xr.validateAdditionalItems=ju;xr.default=Qp;var Ta={},Br={};Object.defineProperty(Br,"__esModule",{value:!0});Br.validateTuple=void 0;const $c=se,cs=M,ey=ce,ty={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return Au(e,"additionalItems",t);r.items=!0,!(0,cs.alwaysValidSchema)(r,t)&&e.ok((0,ey.validateArray)(e))}};function Au(e,t,r=e.schema){const{gen:n,parentSchema:s,data:o,keyword:a,it:i}=e;u(s),i.opts.unevaluated&&r.length&&i.items!==!0&&(i.items=cs.mergeEvaluated.items(n,r.length,i.items));const c=n.name("valid"),d=n.const("len",(0,$c._)`${o}.length`);r.forEach((f,v)=>{(0,cs.alwaysValidSchema)(i,f)||(n.if((0,$c._)`${d} > ${v}`,()=>e.subschema({keyword:a,schemaProp:v,dataProp:v},c)),e.ok(c))});function u(f){const{opts:v,errSchemaPath:y}=i,w=r.length,g=w===f.minItems&&(w===f.maxItems||f[t]===!1);if(v.strictTuples&&!g){const $=`"${a}" is ${w}-tuple, but minItems or maxItems/${t} are not specified or different at path "${y}"`;(0,cs.checkStrictMode)(i,$,v.strictTuples)}}}Br.validateTuple=Au;Br.default=ty;Object.defineProperty(Ta,"__esModule",{value:!0});const ry=Br,ny={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,ry.validateTuple)(e,"items")};Ta.default=ny;var ja={};Object.defineProperty(ja,"__esModule",{value:!0});const gc=se,sy=M,oy=ce,ay=xr,iy={message:({params:{len:e}})=>(0,gc.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,gc._)`{limit: ${e}}`},cy={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:iy,code(e){const{schema:t,parentSchema:r,it:n}=e,{prefixItems:s}=r;n.items=!0,!(0,sy.alwaysValidSchema)(n,t)&&(s?(0,ay.validateAdditionalItems)(e,s):e.ok((0,oy.validateArray)(e)))}};ja.default=cy;var Aa={};Object.defineProperty(Aa,"__esModule",{value:!0});const et=se,Vn=M,ly={message:({params:{min:e,max:t}})=>t===void 0?(0,et.str)`must contain at least ${e} valid item(s)`:(0,et.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,et._)`{minContains: ${e}}`:(0,et._)`{minContains: ${e}, maxContains: ${t}}`},uy={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:ly,code(e){const{gen:t,schema:r,parentSchema:n,data:s,it:o}=e;let a,i;const{minContains:c,maxContains:d}=n;o.opts.next?(a=c===void 0?1:c,i=d):a=1;const u=t.const("len",(0,et._)`${s}.length`);if(e.setParams({min:a,max:i}),i===void 0&&a===0){(0,Vn.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(i!==void 0&&a>i){(0,Vn.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,Vn.alwaysValidSchema)(o,r)){let g=(0,et._)`${u} >= ${a}`;i!==void 0&&(g=(0,et._)`${g} && ${u} <= ${i}`),e.pass(g);return}o.items=!0;const f=t.name("valid");i===void 0&&a===1?y(f,()=>t.if(f,()=>t.break())):a===0?(t.let(f,!0),i!==void 0&&t.if((0,et._)`${s}.length > 0`,v)):(t.let(f,!1),v()),e.result(f,()=>e.reset());function v(){const g=t.name("_valid"),$=t.let("count",0);y(g,()=>t.if(g,()=>w($)))}function y(g,$){t.forRange("i",0,u,m=>{e.subschema({keyword:"contains",dataProp:m,dataPropType:Vn.Type.Num,compositeRule:!0},g),$()})}function w(g){t.code((0,et._)`${g}++`),i===void 0?t.if((0,et._)`${g} >= ${a}`,()=>t.assign(f,!0).break()):(t.if((0,et._)`${g} > ${i}`,()=>t.assign(f,!1).break()),a===1?t.assign(f,!0):t.if((0,et._)`${g} >= ${a}`,()=>t.assign(f,!0)))}}};Aa.default=uy;var Fs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=se,r=M,n=ce;e.error={message:({params:{property:c,depsCount:d,deps:u}})=>{const f=d===1?"property":"properties";return(0,t.str)`must have ${f} ${u} when property ${c} is present`},params:({params:{property:c,depsCount:d,deps:u,missingProperty:f}})=>(0,t._)`{property: ${c},
    missingProperty: ${f},
    depsCount: ${d},
    deps: ${u}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(c){const[d,u]=o(c);a(c,d),i(c,u)}};function o({schema:c}){const d={},u={};for(const f in c){if(f==="__proto__")continue;const v=Array.isArray(c[f])?d:u;v[f]=c[f]}return[d,u]}function a(c,d=c.schema){const{gen:u,data:f,it:v}=c;if(Object.keys(d).length===0)return;const y=u.let("missing");for(const w in d){const g=d[w];if(g.length===0)continue;const $=(0,n.propertyInData)(u,f,w,v.opts.ownProperties);c.setParams({property:w,depsCount:g.length,deps:g.join(", ")}),v.allErrors?u.if($,()=>{for(const m of g)(0,n.checkReportMissingProp)(c,m)}):(u.if((0,t._)`${$} && (${(0,n.checkMissingProp)(c,g,y)})`),(0,n.reportMissingProp)(c,y),u.else())}}e.validatePropertyDeps=a;function i(c,d=c.schema){const{gen:u,data:f,keyword:v,it:y}=c,w=u.name("valid");for(const g in d)(0,r.alwaysValidSchema)(y,d[g])||(u.if((0,n.propertyInData)(u,f,g,y.opts.ownProperties),()=>{const $=c.subschema({keyword:v,schemaProp:g},w);c.mergeValidEvaluated($,w)},()=>u.var(w,!0)),c.ok(w))}e.validateSchemaDeps=i,e.default=s})(Fs);var ka={};Object.defineProperty(ka,"__esModule",{value:!0});const ku=se,dy=M,fy={message:"property name must be valid",params:({params:e})=>(0,ku._)`{propertyName: ${e.propertyName}}`},hy={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:fy,code(e){const{gen:t,schema:r,data:n,it:s}=e;if((0,dy.alwaysValidSchema)(s,r))return;const o=t.name("valid");t.forIn("key",n,a=>{e.setParams({propertyName:a}),e.subschema({keyword:"propertyNames",data:a,dataTypes:["string"],propertyName:a,compositeRule:!0},o),t.if((0,ku.not)(o),()=>{e.error(!0),s.allErrors||t.break()})}),e.ok(o)}};ka.default=hy;var Ls={};Object.defineProperty(Ls,"__esModule",{value:!0});const Un=ce,ot=se,my=Ze,qn=M,py={message:"must NOT have additional properties",params:({params:e})=>(0,ot._)`{additionalProperty: ${e.additionalProperty}}`},yy={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:py,code(e){const{gen:t,schema:r,parentSchema:n,data:s,errsCount:o,it:a}=e;if(!o)throw new Error("ajv implementation error");const{allErrors:i,opts:c}=a;if(a.props=!0,c.removeAdditional!=="all"&&(0,qn.alwaysValidSchema)(a,r))return;const d=(0,Un.allSchemaProperties)(n.properties),u=(0,Un.allSchemaProperties)(n.patternProperties);f(),e.ok((0,ot._)`${o} === ${my.default.errors}`);function f(){t.forIn("key",s,$=>{!d.length&&!u.length?w($):t.if(v($),()=>w($))})}function v($){let m;if(d.length>8){const E=(0,qn.schemaRefOrVal)(a,n.properties,"properties");m=(0,Un.isOwnProperty)(t,E,$)}else d.length?m=(0,ot.or)(...d.map(E=>(0,ot._)`${$} === ${E}`)):m=ot.nil;return u.length&&(m=(0,ot.or)(m,...u.map(E=>(0,ot._)`${(0,Un.usePattern)(e,E)}.test(${$})`))),(0,ot.not)(m)}function y($){t.code((0,ot._)`delete ${s}[${$}]`)}function w($){if(c.removeAdditional==="all"||c.removeAdditional&&r===!1){y($);return}if(r===!1){e.setParams({additionalProperty:$}),e.error(),i||t.break();return}if(typeof r=="object"&&!(0,qn.alwaysValidSchema)(a,r)){const m=t.name("valid");c.removeAdditional==="failing"?(g($,m,!1),t.if((0,ot.not)(m),()=>{e.reset(),y($)})):(g($,m),i||t.if((0,ot.not)(m),()=>t.break()))}}function g($,m,E){const N={keyword:"additionalProperties",dataProp:$,dataPropType:qn.Type.Str};E===!1&&Object.assign(N,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(N,m)}}};Ls.default=yy;var Ca={};Object.defineProperty(Ca,"__esModule",{value:!0});const $y=ft,_c=ce,ao=M,vc=Ls,gy={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:n,data:s,it:o}=e;o.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&vc.default.code(new $y.KeywordCxt(o,vc.default,"additionalProperties"));const a=(0,_c.allSchemaProperties)(r);for(const f of a)o.definedProperties.add(f);o.opts.unevaluated&&a.length&&o.props!==!0&&(o.props=ao.mergeEvaluated.props(t,(0,ao.toHash)(a),o.props));const i=a.filter(f=>!(0,ao.alwaysValidSchema)(o,r[f]));if(i.length===0)return;const c=t.name("valid");for(const f of i)d(f)?u(f):(t.if((0,_c.propertyInData)(t,s,f,o.opts.ownProperties)),u(f),o.allErrors||t.else().var(c,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(c);function d(f){return o.opts.useDefaults&&!o.compositeRule&&r[f].default!==void 0}function u(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},c)}}};Ca.default=gy;var Ma={};Object.defineProperty(Ma,"__esModule",{value:!0});const wc=ce,Gn=se,Ec=M,bc=M,_y={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:n,parentSchema:s,it:o}=e,{opts:a}=o,i=(0,wc.allSchemaProperties)(r),c=i.filter(g=>(0,Ec.alwaysValidSchema)(o,r[g]));if(i.length===0||c.length===i.length&&(!o.opts.unevaluated||o.props===!0))return;const d=a.strictSchema&&!a.allowMatchingProperties&&s.properties,u=t.name("valid");o.props!==!0&&!(o.props instanceof Gn.Name)&&(o.props=(0,bc.evaluatedPropsToName)(t,o.props));const{props:f}=o;v();function v(){for(const g of i)d&&y(g),o.allErrors?w(g):(t.var(u,!0),w(g),t.if(u))}function y(g){for(const $ in d)new RegExp(g).test($)&&(0,Ec.checkStrictMode)(o,`property ${$} matches pattern ${g} (use allowMatchingProperties)`)}function w(g){t.forIn("key",n,$=>{t.if((0,Gn._)`${(0,wc.usePattern)(e,g)}.test(${$})`,()=>{const m=c.includes(g);m||e.subschema({keyword:"patternProperties",schemaProp:g,dataProp:$,dataPropType:bc.Type.Str},u),o.opts.unevaluated&&f!==!0?t.assign((0,Gn._)`${f}[${$}]`,!0):!m&&!o.allErrors&&t.if((0,Gn.not)(u),()=>t.break())})})}}};Ma.default=_y;var Da={};Object.defineProperty(Da,"__esModule",{value:!0});const vy=M,wy={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:n}=e;if((0,vy.alwaysValidSchema)(n,r)){e.fail();return}const s=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),e.failResult(s,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};Da.default=wy;var Fa={};Object.defineProperty(Fa,"__esModule",{value:!0});const Ey=ce,by={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Ey.validateUnion,error:{message:"must match a schema in anyOf"}};Fa.default=by;var La={};Object.defineProperty(La,"__esModule",{value:!0});const ls=se,Sy=M,Py={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,ls._)`{passingSchemas: ${e.passing}}`},Ny={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Py,code(e){const{gen:t,schema:r,parentSchema:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;const o=r,a=t.let("valid",!1),i=t.let("passing",null),c=t.name("_valid");e.setParams({passing:i}),t.block(d),e.result(a,()=>e.reset(),()=>e.error(!0));function d(){o.forEach((u,f)=>{let v;(0,Sy.alwaysValidSchema)(s,u)?t.var(c,!0):v=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},c),f>0&&t.if((0,ls._)`${c} && ${a}`).assign(a,!1).assign(i,(0,ls._)`[${i}, ${f}]`).else(),t.if(c,()=>{t.assign(a,!0),t.assign(i,f),v&&e.mergeEvaluated(v,ls.Name)})})}}};La.default=Ny;var za={};Object.defineProperty(za,"__esModule",{value:!0});const Ry=M,Oy={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const s=t.name("valid");r.forEach((o,a)=>{if((0,Ry.alwaysValidSchema)(n,o))return;const i=e.subschema({keyword:"allOf",schemaProp:a},s);e.ok(s),e.mergeEvaluated(i)})}};za.default=Oy;var Va={};Object.defineProperty(Va,"__esModule",{value:!0});const bs=se,Cu=M,Iy={message:({params:e})=>(0,bs.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,bs._)`{failingKeyword: ${e.ifClause}}`},Ty={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Iy,code(e){const{gen:t,parentSchema:r,it:n}=e;r.then===void 0&&r.else===void 0&&(0,Cu.checkStrictMode)(n,'"if" without "then" and "else" is ignored');const s=Sc(n,"then"),o=Sc(n,"else");if(!s&&!o)return;const a=t.let("valid",!0),i=t.name("_valid");if(c(),e.reset(),s&&o){const u=t.let("ifClause");e.setParams({ifClause:u}),t.if(i,d("then",u),d("else",u))}else s?t.if(i,d("then")):t.if((0,bs.not)(i),d("else"));e.pass(a,()=>e.error(!0));function c(){const u=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},i);e.mergeEvaluated(u)}function d(u,f){return()=>{const v=e.subschema({keyword:u},i);t.assign(a,i),e.mergeValidEvaluated(v,a),f?t.assign(f,(0,bs._)`${u}`):e.setParams({ifClause:u})}}}};function Sc(e,t){const r=e.schema[t];return r!==void 0&&!(0,Cu.alwaysValidSchema)(e,r)}Va.default=Ty;var Ua={};Object.defineProperty(Ua,"__esModule",{value:!0});const jy=M,Ay={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,jy.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};Ua.default=Ay;Object.defineProperty(Ia,"__esModule",{value:!0});const ky=xr,Cy=Ta,My=Br,Dy=ja,Fy=Aa,Ly=Fs,zy=ka,Vy=Ls,Uy=Ca,qy=Ma,Gy=Da,Ky=Fa,Hy=La,Wy=za,xy=Va,By=Ua;function Yy(e=!1){const t=[Gy.default,Ky.default,Hy.default,Wy.default,xy.default,By.default,zy.default,Vy.default,Ly.default,Uy.default,qy.default];return e?t.push(Cy.default,Dy.default):t.push(ky.default,My.default),t.push(Fy.default),t}Ia.default=Yy;var qa={},Yr={};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.dynamicAnchor=void 0;const io=se,Jy=Ze,Pc=Ve,Xy=At,Zy={keyword:"$dynamicAnchor",schemaType:"string",code:e=>Mu(e,e.schema)};function Mu(e,t){const{gen:r,it:n}=e;n.schemaEnv.root.dynamicAnchors[t]=!0;const s=(0,io._)`${Jy.default.dynamicAnchors}${(0,io.getProperty)(t)}`,o=n.errSchemaPath==="#"?n.validateName:Qy(e);r.if((0,io._)`!${s}`,()=>r.assign(s,o))}Yr.dynamicAnchor=Mu;function Qy(e){const{schemaEnv:t,schema:r,self:n}=e.it,{root:s,baseId:o,localRefs:a,meta:i}=t.root,{schemaId:c}=n.opts,d=new Pc.SchemaEnv({schema:r,schemaId:c,root:s,baseId:o,localRefs:a,meta:i});return Pc.compileSchema.call(n,d),(0,Xy.getValidate)(e,d)}Yr.default=Zy;var Jr={};Object.defineProperty(Jr,"__esModule",{value:!0});Jr.dynamicRef=void 0;const Nc=se,e$=Ze,Rc=At,t$={keyword:"$dynamicRef",schemaType:"string",code:e=>Du(e,e.schema)};function Du(e,t){const{gen:r,keyword:n,it:s}=e;if(t[0]!=="#")throw new Error(`"${n}" only supports hash fragment reference`);const o=t.slice(1);if(s.allErrors)a();else{const c=r.let("valid",!1);a(c),e.ok(c)}function a(c){if(s.schemaEnv.root.dynamicAnchors[o]){const d=r.let("_v",(0,Nc._)`${e$.default.dynamicAnchors}${(0,Nc.getProperty)(o)}`);r.if(d,i(d,c),i(s.validateName,c))}else i(s.validateName,c)()}function i(c,d){return d?()=>r.block(()=>{(0,Rc.callRef)(e,c),r.let(d,!0)}):()=>(0,Rc.callRef)(e,c)}}Jr.dynamicRef=Du;Jr.default=t$;var Ga={};Object.defineProperty(Ga,"__esModule",{value:!0});const r$=Yr,n$=M,s$={keyword:"$recursiveAnchor",schemaType:"boolean",code(e){e.schema?(0,r$.dynamicAnchor)(e,""):(0,n$.checkStrictMode)(e.it,"$recursiveAnchor: false is ignored")}};Ga.default=s$;var Ka={};Object.defineProperty(Ka,"__esModule",{value:!0});const o$=Jr,a$={keyword:"$recursiveRef",schemaType:"string",code:e=>(0,o$.dynamicRef)(e,e.schema)};Ka.default=a$;Object.defineProperty(qa,"__esModule",{value:!0});const i$=Yr,c$=Jr,l$=Ga,u$=Ka,d$=[i$.default,c$.default,l$.default,u$.default];qa.default=d$;var Ha={},Wa={};Object.defineProperty(Wa,"__esModule",{value:!0});const Oc=Fs,f$={keyword:"dependentRequired",type:"object",schemaType:"object",error:Oc.error,code:e=>(0,Oc.validatePropertyDeps)(e)};Wa.default=f$;var xa={};Object.defineProperty(xa,"__esModule",{value:!0});const h$=Fs,m$={keyword:"dependentSchemas",type:"object",schemaType:"object",code:e=>(0,h$.validateSchemaDeps)(e)};xa.default=m$;var Ba={};Object.defineProperty(Ba,"__esModule",{value:!0});const p$=M,y$={keyword:["maxContains","minContains"],type:"array",schemaType:"number",code({keyword:e,parentSchema:t,it:r}){t.contains===void 0&&(0,p$.checkStrictMode)(r,`"${e}" without "contains" is ignored`)}};Ba.default=y$;Object.defineProperty(Ha,"__esModule",{value:!0});const $$=Wa,g$=xa,_$=Ba,v$=[$$.default,g$.default,_$.default];Ha.default=v$;var Ya={},Ja={};Object.defineProperty(Ja,"__esModule",{value:!0});const Ut=se,Ic=M,w$=Ze,E$={message:"must NOT have unevaluated properties",params:({params:e})=>(0,Ut._)`{unevaluatedProperty: ${e.unevaluatedProperty}}`},b$={keyword:"unevaluatedProperties",type:"object",schemaType:["boolean","object"],trackErrors:!0,error:E$,code(e){const{gen:t,schema:r,data:n,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,props:i}=o;i instanceof Ut.Name?t.if((0,Ut._)`${i} !== true`,()=>t.forIn("key",n,f=>t.if(d(i,f),()=>c(f)))):i!==!0&&t.forIn("key",n,f=>i===void 0?c(f):t.if(u(i,f),()=>c(f))),o.props=!0,e.ok((0,Ut._)`${s} === ${w$.default.errors}`);function c(f){if(r===!1){e.setParams({unevaluatedProperty:f}),e.error(),a||t.break();return}if(!(0,Ic.alwaysValidSchema)(o,r)){const v=t.name("valid");e.subschema({keyword:"unevaluatedProperties",dataProp:f,dataPropType:Ic.Type.Str},v),a||t.if((0,Ut.not)(v),()=>t.break())}}function d(f,v){return(0,Ut._)`!${f} || !${f}[${v}]`}function u(f,v){const y=[];for(const w in f)f[w]===!0&&y.push((0,Ut._)`${v} !== ${w}`);return(0,Ut.and)(...y)}}};Ja.default=b$;var Xa={};Object.defineProperty(Xa,"__esModule",{value:!0});const pr=se,Tc=M,S$={message:({params:{len:e}})=>(0,pr.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,pr._)`{limit: ${e}}`},P$={keyword:"unevaluatedItems",type:"array",schemaType:["boolean","object"],error:S$,code(e){const{gen:t,schema:r,data:n,it:s}=e,o=s.items||0;if(o===!0)return;const a=t.const("len",(0,pr._)`${n}.length`);if(r===!1)e.setParams({len:o}),e.fail((0,pr._)`${a} > ${o}`);else if(typeof r=="object"&&!(0,Tc.alwaysValidSchema)(s,r)){const c=t.var("valid",(0,pr._)`${a} <= ${o}`);t.if((0,pr.not)(c),()=>i(c,o)),e.ok(c)}s.items=!0;function i(c,d){t.forRange("i",d,a,u=>{e.subschema({keyword:"unevaluatedItems",dataProp:u,dataPropType:Tc.Type.Num},c),s.allErrors||t.if((0,pr.not)(c),()=>t.break())})}}};Xa.default=P$;Object.defineProperty(Ya,"__esModule",{value:!0});const N$=Ja,R$=Xa,O$=[N$.default,R$.default];Ya.default=O$;var Za={},Qa={};Object.defineProperty(Qa,"__esModule",{value:!0});const Ee=se,I$={message:({schemaCode:e})=>(0,Ee.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,Ee._)`{format: ${e}}`},T$={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:I$,code(e,t){const{gen:r,data:n,$data:s,schema:o,schemaCode:a,it:i}=e,{opts:c,errSchemaPath:d,schemaEnv:u,self:f}=i;if(!c.validateFormats)return;s?v():y();function v(){const w=r.scopeValue("formats",{ref:f.formats,code:c.code.formats}),g=r.const("fDef",(0,Ee._)`${w}[${a}]`),$=r.let("fType"),m=r.let("format");r.if((0,Ee._)`typeof ${g} == "object" && !(${g} instanceof RegExp)`,()=>r.assign($,(0,Ee._)`${g}.type || "string"`).assign(m,(0,Ee._)`${g}.validate`),()=>r.assign($,(0,Ee._)`"string"`).assign(m,g)),e.fail$data((0,Ee.or)(E(),N()));function E(){return c.strictSchema===!1?Ee.nil:(0,Ee._)`${a} && !${m}`}function N(){const R=u.$async?(0,Ee._)`(${g}.async ? await ${m}(${n}) : ${m}(${n}))`:(0,Ee._)`${m}(${n})`,O=(0,Ee._)`(typeof ${m} == "function" ? ${R} : ${m}.test(${n}))`;return(0,Ee._)`${m} && ${m} !== true && ${$} === ${t} && !${O}`}}function y(){const w=f.formats[o];if(!w){E();return}if(w===!0)return;const[g,$,m]=N(w);g===t&&e.pass(R());function E(){if(c.strictSchema===!1){f.logger.warn(O());return}throw new Error(O());function O(){return`unknown format "${o}" ignored in schema at path "${d}"`}}function N(O){const x=O instanceof RegExp?(0,Ee.regexpCode)(O):c.code.formats?(0,Ee._)`${c.code.formats}${(0,Ee.getProperty)(o)}`:void 0,re=r.scopeValue("formats",{key:o,ref:O,code:x});return typeof O=="object"&&!(O instanceof RegExp)?[O.type||"string",O.validate,(0,Ee._)`${re}.validate`]:["string",O,re]}function R(){if(typeof w=="object"&&!(w instanceof RegExp)&&w.async){if(!u.$async)throw new Error("async format in sync schema");return(0,Ee._)`await ${m}(${n})`}return typeof $=="function"?(0,Ee._)`${m}(${n})`:(0,Ee._)`${m}.test(${n})`}}}};Qa.default=T$;Object.defineProperty(Za,"__esModule",{value:!0});const j$=Qa,A$=[j$.default];Za.default=A$;var Gr={};Object.defineProperty(Gr,"__esModule",{value:!0});Gr.contentVocabulary=Gr.metadataVocabulary=void 0;Gr.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Gr.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(ma,"__esModule",{value:!0});const k$=pa,C$=$a,M$=Ia,D$=qa,F$=Ha,L$=Ya,z$=Za,jc=Gr,V$=[D$.default,k$.default,C$.default,(0,M$.default)(!0),z$.default,jc.metadataVocabulary,jc.contentVocabulary,F$.default,L$.default];ma.default=V$;var ei={},zs={};Object.defineProperty(zs,"__esModule",{value:!0});zs.DiscrError=void 0;var Ac;(function(e){e.Tag="tag",e.Mapping="mapping"})(Ac||(zs.DiscrError=Ac={}));Object.defineProperty(ei,"__esModule",{value:!0});const Ar=se,Co=zs,kc=Ve,U$=Wr,q$=M,G$={message:({params:{discrError:e,tagName:t}})=>e===Co.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,Ar._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},K$={keyword:"discriminator",type:"object",schemaType:"object",error:G$,code(e){const{gen:t,data:r,schema:n,parentSchema:s,it:o}=e,{oneOf:a}=s;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");const i=n.propertyName;if(typeof i!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!a)throw new Error("discriminator: requires oneOf keyword");const c=t.let("valid",!1),d=t.const("tag",(0,Ar._)`${r}${(0,Ar.getProperty)(i)}`);t.if((0,Ar._)`typeof ${d} == "string"`,()=>u(),()=>e.error(!1,{discrError:Co.DiscrError.Tag,tag:d,tagName:i})),e.ok(c);function u(){const y=v();t.if(!1);for(const w in y)t.elseIf((0,Ar._)`${d} === ${w}`),t.assign(c,f(y[w]));t.else(),e.error(!1,{discrError:Co.DiscrError.Mapping,tag:d,tagName:i}),t.endIf()}function f(y){const w=t.name("valid"),g=e.subschema({keyword:"oneOf",schemaProp:y},w);return e.mergeEvaluated(g,Ar.Name),w}function v(){var y;const w={},g=m(s);let $=!0;for(let R=0;R<a.length;R++){let O=a[R];if(O!=null&&O.$ref&&!(0,q$.schemaHasRulesButRef)(O,o.self.RULES)){const re=O.$ref;if(O=kc.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,re),O instanceof kc.SchemaEnv&&(O=O.schema),O===void 0)throw new U$.default(o.opts.uriResolver,o.baseId,re)}const x=(y=O==null?void 0:O.properties)===null||y===void 0?void 0:y[i];if(typeof x!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${i}"`);$=$&&(g||m(O)),E(x,R)}if(!$)throw new Error(`discriminator: "${i}" must be required`);return w;function m({required:R}){return Array.isArray(R)&&R.includes(i)}function E(R,O){if(R.const)N(R.const,O);else if(R.enum)for(const x of R.enum)N(x,O);else throw new Error(`discriminator: "properties/${i}" must have "const" or "enum"`)}function N(R,O){if(typeof R!="string"||R in w)throw new Error(`discriminator: "${i}" values must be unique strings`);w[R]=O}}}};ei.default=K$;var ti={};const H$="https://json-schema.org/draft/2020-12/schema",W$="https://json-schema.org/draft/2020-12/schema",x$={"https://json-schema.org/draft/2020-12/vocab/core":!0,"https://json-schema.org/draft/2020-12/vocab/applicator":!0,"https://json-schema.org/draft/2020-12/vocab/unevaluated":!0,"https://json-schema.org/draft/2020-12/vocab/validation":!0,"https://json-schema.org/draft/2020-12/vocab/meta-data":!0,"https://json-schema.org/draft/2020-12/vocab/format-annotation":!0,"https://json-schema.org/draft/2020-12/vocab/content":!0},B$="meta",Y$="Core and Validation specifications meta-schema",J$=[{$ref:"meta/core"},{$ref:"meta/applicator"},{$ref:"meta/unevaluated"},{$ref:"meta/validation"},{$ref:"meta/meta-data"},{$ref:"meta/format-annotation"},{$ref:"meta/content"}],X$=["object","boolean"],Z$="This meta-schema also defines keywords that have appeared in previous drafts in order to prevent incompatible extensions as they remain in common use.",Q$={definitions:{$comment:'"definitions" has been replaced by "$defs".',type:"object",additionalProperties:{$dynamicRef:"#meta"},deprecated:!0,default:{}},dependencies:{$comment:'"dependencies" has been split and replaced by "dependentSchemas" and "dependentRequired" in order to serve their differing semantics.',type:"object",additionalProperties:{anyOf:[{$dynamicRef:"#meta"},{$ref:"meta/validation#/$defs/stringArray"}]},deprecated:!0,default:{}},$recursiveAnchor:{$comment:'"$recursiveAnchor" has been replaced by "$dynamicAnchor".',$ref:"meta/core#/$defs/anchorString",deprecated:!0},$recursiveRef:{$comment:'"$recursiveRef" has been replaced by "$dynamicRef".',$ref:"meta/core#/$defs/uriReferenceString",deprecated:!0}},eg={$schema:H$,$id:W$,$vocabulary:x$,$dynamicAnchor:B$,title:Y$,allOf:J$,type:X$,$comment:Z$,properties:Q$},tg="https://json-schema.org/draft/2020-12/schema",rg="https://json-schema.org/draft/2020-12/meta/applicator",ng={"https://json-schema.org/draft/2020-12/vocab/applicator":!0},sg="meta",og="Applicator vocabulary meta-schema",ag=["object","boolean"],ig={prefixItems:{$ref:"#/$defs/schemaArray"},items:{$dynamicRef:"#meta"},contains:{$dynamicRef:"#meta"},additionalProperties:{$dynamicRef:"#meta"},properties:{type:"object",additionalProperties:{$dynamicRef:"#meta"},default:{}},patternProperties:{type:"object",additionalProperties:{$dynamicRef:"#meta"},propertyNames:{format:"regex"},default:{}},dependentSchemas:{type:"object",additionalProperties:{$dynamicRef:"#meta"},default:{}},propertyNames:{$dynamicRef:"#meta"},if:{$dynamicRef:"#meta"},then:{$dynamicRef:"#meta"},else:{$dynamicRef:"#meta"},allOf:{$ref:"#/$defs/schemaArray"},anyOf:{$ref:"#/$defs/schemaArray"},oneOf:{$ref:"#/$defs/schemaArray"},not:{$dynamicRef:"#meta"}},cg={schemaArray:{type:"array",minItems:1,items:{$dynamicRef:"#meta"}}},lg={$schema:tg,$id:rg,$vocabulary:ng,$dynamicAnchor:sg,title:og,type:ag,properties:ig,$defs:cg},ug="https://json-schema.org/draft/2020-12/schema",dg="https://json-schema.org/draft/2020-12/meta/unevaluated",fg={"https://json-schema.org/draft/2020-12/vocab/unevaluated":!0},hg="meta",mg="Unevaluated applicator vocabulary meta-schema",pg=["object","boolean"],yg={unevaluatedItems:{$dynamicRef:"#meta"},unevaluatedProperties:{$dynamicRef:"#meta"}},$g={$schema:ug,$id:dg,$vocabulary:fg,$dynamicAnchor:hg,title:mg,type:pg,properties:yg},gg="https://json-schema.org/draft/2020-12/schema",_g="https://json-schema.org/draft/2020-12/meta/content",vg={"https://json-schema.org/draft/2020-12/vocab/content":!0},wg="meta",Eg="Content vocabulary meta-schema",bg=["object","boolean"],Sg={contentEncoding:{type:"string"},contentMediaType:{type:"string"},contentSchema:{$dynamicRef:"#meta"}},Pg={$schema:gg,$id:_g,$vocabulary:vg,$dynamicAnchor:wg,title:Eg,type:bg,properties:Sg},Ng="https://json-schema.org/draft/2020-12/schema",Rg="https://json-schema.org/draft/2020-12/meta/core",Og={"https://json-schema.org/draft/2020-12/vocab/core":!0},Ig="meta",Tg="Core vocabulary meta-schema",jg=["object","boolean"],Ag={$id:{$ref:"#/$defs/uriReferenceString",$comment:"Non-empty fragments not allowed.",pattern:"^[^#]*#?$"},$schema:{$ref:"#/$defs/uriString"},$ref:{$ref:"#/$defs/uriReferenceString"},$anchor:{$ref:"#/$defs/anchorString"},$dynamicRef:{$ref:"#/$defs/uriReferenceString"},$dynamicAnchor:{$ref:"#/$defs/anchorString"},$vocabulary:{type:"object",propertyNames:{$ref:"#/$defs/uriString"},additionalProperties:{type:"boolean"}},$comment:{type:"string"},$defs:{type:"object",additionalProperties:{$dynamicRef:"#meta"}}},kg={anchorString:{type:"string",pattern:"^[A-Za-z_][-A-Za-z0-9._]*$"},uriString:{type:"string",format:"uri"},uriReferenceString:{type:"string",format:"uri-reference"}},Cg={$schema:Ng,$id:Rg,$vocabulary:Og,$dynamicAnchor:Ig,title:Tg,type:jg,properties:Ag,$defs:kg},Mg="https://json-schema.org/draft/2020-12/schema",Dg="https://json-schema.org/draft/2020-12/meta/format-annotation",Fg={"https://json-schema.org/draft/2020-12/vocab/format-annotation":!0},Lg="meta",zg="Format vocabulary meta-schema for annotation results",Vg=["object","boolean"],Ug={format:{type:"string"}},qg={$schema:Mg,$id:Dg,$vocabulary:Fg,$dynamicAnchor:Lg,title:zg,type:Vg,properties:Ug},Gg="https://json-schema.org/draft/2020-12/schema",Kg="https://json-schema.org/draft/2020-12/meta/meta-data",Hg={"https://json-schema.org/draft/2020-12/vocab/meta-data":!0},Wg="meta",xg="Meta-data vocabulary meta-schema",Bg=["object","boolean"],Yg={title:{type:"string"},description:{type:"string"},default:!0,deprecated:{type:"boolean",default:!1},readOnly:{type:"boolean",default:!1},writeOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0}},Jg={$schema:Gg,$id:Kg,$vocabulary:Hg,$dynamicAnchor:Wg,title:xg,type:Bg,properties:Yg},Xg="https://json-schema.org/draft/2020-12/schema",Zg="https://json-schema.org/draft/2020-12/meta/validation",Qg={"https://json-schema.org/draft/2020-12/vocab/validation":!0},e_="meta",t_="Validation vocabulary meta-schema",r_=["object","boolean"],n_={type:{anyOf:[{$ref:"#/$defs/simpleTypes"},{type:"array",items:{$ref:"#/$defs/simpleTypes"},minItems:1,uniqueItems:!0}]},const:!0,enum:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/$defs/nonNegativeInteger"},minLength:{$ref:"#/$defs/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},maxItems:{$ref:"#/$defs/nonNegativeInteger"},minItems:{$ref:"#/$defs/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},maxContains:{$ref:"#/$defs/nonNegativeInteger"},minContains:{$ref:"#/$defs/nonNegativeInteger",default:1},maxProperties:{$ref:"#/$defs/nonNegativeInteger"},minProperties:{$ref:"#/$defs/nonNegativeIntegerDefault0"},required:{$ref:"#/$defs/stringArray"},dependentRequired:{type:"object",additionalProperties:{$ref:"#/$defs/stringArray"}}},s_={nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{$ref:"#/$defs/nonNegativeInteger",default:0},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},o_={$schema:Xg,$id:Zg,$vocabulary:Qg,$dynamicAnchor:e_,title:t_,type:r_,properties:n_,$defs:s_};Object.defineProperty(ti,"__esModule",{value:!0});const a_=eg,i_=lg,c_=$g,l_=Pg,u_=Cg,d_=qg,f_=Jg,h_=o_,m_=["/properties"];function p_(e){return[a_,i_,c_,l_,u_,t(this,d_),f_,t(this,h_)].forEach(r=>this.addMetaSchema(r,void 0,!1)),this;function t(r,n){return e?r.$dataMetaSchema(n,m_):n}}ti.default=p_;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv2020=void 0;const r=Ll,n=ma,s=ei,o=ti,a="https://json-schema.org/draft/2020-12/schema";class i extends r.default{constructor(y={}){super({...y,dynamicRef:!0,next:!0,unevaluated:!0})}_addVocabularies(){super._addVocabularies(),n.default.forEach(y=>this.addVocabulary(y)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema();const{$data:y,meta:w}=this.opts;w&&(o.default.call(this,y),this.refs["http://json-schema.org/schema"]=a)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv2020=i,e.exports=t=i,e.exports.Ajv2020=i,Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var c=ft;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return c.KeywordCxt}});var d=se;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return d._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return d.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return d.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return d.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return d.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return d.CodeGen}});var u=Tn;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return u.default}});var f=Wr;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return f.default}})})(Ro,Ro.exports);var y_=Ro.exports,Mo={exports:{}},Fu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatNames=e.fastFormats=e.fullFormats=void 0;function t(K,Y){return{validate:K,compare:Y}}e.fullFormats={date:t(o,a),time:t(c(!0),d),"date-time":t(v(!0),y),"iso-time":t(c(),u),"iso-date-time":t(v(),w),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:m,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:Se,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:N,int32:{type:"number",validate:x},int64:{type:"number",validate:re},float:{type:"number",validate:ge},double:{type:"number",validate:ge},password:!0,binary:!0},e.fastFormats={...e.fullFormats,date:t(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,a),time:t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,d),"date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,y),"iso-time":t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,u),"iso-date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,w),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},e.formatNames=Object.keys(e.fullFormats);function r(K){return K%4===0&&(K%100!==0||K%400===0)}const n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s=[0,31,28,31,30,31,30,31,31,30,31,30,31];function o(K){const Y=n.exec(K);if(!Y)return!1;const fe=+Y[1],T=+Y[2],A=+Y[3];return T>=1&&T<=12&&A>=1&&A<=(T===2&&r(fe)?29:s[T])}function a(K,Y){if(K&&Y)return K>Y?1:K<Y?-1:0}const i=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function c(K){return function(fe){const T=i.exec(fe);if(!T)return!1;const A=+T[1],V=+T[2],F=+T[3],B=T[4],L=T[5]==="-"?-1:1,P=+(T[6]||0),p=+(T[7]||0);if(P>23||p>59||K&&!B)return!1;if(A<=23&&V<=59&&F<60)return!0;const S=V-p*L,_=A-P*L-(S<0?1:0);return(_===23||_===-1)&&(S===59||S===-1)&&F<61}}function d(K,Y){if(!(K&&Y))return;const fe=new Date("2020-01-01T"+K).valueOf(),T=new Date("2020-01-01T"+Y).valueOf();if(fe&&T)return fe-T}function u(K,Y){if(!(K&&Y))return;const fe=i.exec(K),T=i.exec(Y);if(fe&&T)return K=fe[1]+fe[2]+fe[3],Y=T[1]+T[2]+T[3],K>Y?1:K<Y?-1:0}const f=/t|\s/i;function v(K){const Y=c(K);return function(T){const A=T.split(f);return A.length===2&&o(A[0])&&Y(A[1])}}function y(K,Y){if(!(K&&Y))return;const fe=new Date(K).valueOf(),T=new Date(Y).valueOf();if(fe&&T)return fe-T}function w(K,Y){if(!(K&&Y))return;const[fe,T]=K.split(f),[A,V]=Y.split(f),F=a(fe,A);if(F!==void 0)return F||d(T,V)}const g=/\/|:/,$=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function m(K){return g.test(K)&&$.test(K)}const E=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function N(K){return E.lastIndex=0,E.test(K)}const R=-2147483648,O=2**31-1;function x(K){return Number.isInteger(K)&&K<=O&&K>=R}function re(K){return Number.isInteger(K)}function ge(){return!0}const we=/[^\\]\\Z/;function Se(K){if(we.test(K))return!1;try{return new RegExp(K),!0}catch{return!1}}})(Fu);var Lu={},Do={exports:{}},zu={},ht={},Kr={},An={},ie={},On={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(E){if(super(),!e.IDENTIFIER.test(E))throw new Error("CodeGen: name must be a valid identifier");this.str=E}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(E){super(),this._items=typeof E=="string"?[E]:E}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const E=this._items[0];return E===""||E==='""'}get str(){var E;return(E=this._str)!==null&&E!==void 0?E:this._str=this._items.reduce((N,R)=>`${N}${R}`,"")}get names(){var E;return(E=this._names)!==null&&E!==void 0?E:this._names=this._items.reduce((N,R)=>(R instanceof r&&(N[R.str]=(N[R.str]||0)+1),N),{})}}e._Code=n,e.nil=new n("");function s(m,...E){const N=[m[0]];let R=0;for(;R<E.length;)i(N,E[R]),N.push(m[++R]);return new n(N)}e._=s;const o=new n("+");function a(m,...E){const N=[y(m[0])];let R=0;for(;R<E.length;)N.push(o),i(N,E[R]),N.push(o,y(m[++R]));return c(N),new n(N)}e.str=a;function i(m,E){E instanceof n?m.push(...E._items):E instanceof r?m.push(E):m.push(f(E))}e.addCodeArg=i;function c(m){let E=1;for(;E<m.length-1;){if(m[E]===o){const N=d(m[E-1],m[E+1]);if(N!==void 0){m.splice(E-1,3,N);continue}m[E++]="+"}E++}}function d(m,E){if(E==='""')return m;if(m==='""')return E;if(typeof m=="string")return E instanceof r||m[m.length-1]!=='"'?void 0:typeof E!="string"?`${m.slice(0,-1)}${E}"`:E[0]==='"'?m.slice(0,-1)+E.slice(1):void 0;if(typeof E=="string"&&E[0]==='"'&&!(m instanceof r))return`"${m}${E.slice(1)}`}function u(m,E){return E.emptyStr()?m:m.emptyStr()?E:a`${m}${E}`}e.strConcat=u;function f(m){return typeof m=="number"||typeof m=="boolean"||m===null?m:y(Array.isArray(m)?m.join(","):m)}function v(m){return new n(y(m))}e.stringify=v;function y(m){return JSON.stringify(m).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=y;function w(m){return typeof m=="string"&&e.IDENTIFIER.test(m)?new n(`.${m}`):s`[${m}]`}e.getProperty=w;function g(m){if(typeof m=="string"&&e.IDENTIFIER.test(m))return new n(`${m}`);throw new Error(`CodeGen: invalid export name: ${m}, use explicit $id name mapping`)}e.getEsmExportName=g;function $(m){return new n(m.toString())}e.regexpCode=$})(On);var Fo={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=On;class r extends Error{constructor(d){super(`CodeGen: "code" for ${d} not defined`),this.value=d.value}}var n;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(n||(e.UsedValueState=n={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class s{constructor({prefixes:d,parent:u}={}){this._names={},this._prefixes=d,this._parent=u}toName(d){return d instanceof t.Name?d:this.name(d)}name(d){return new t.Name(this._newName(d))}_newName(d){const u=this._names[d]||this._nameGroup(d);return`${d}${u.index++}`}_nameGroup(d){var u,f;if(!((f=(u=this._parent)===null||u===void 0?void 0:u._prefixes)===null||f===void 0)&&f.has(d)||this._prefixes&&!this._prefixes.has(d))throw new Error(`CodeGen: prefix "${d}" is not allowed in this scope`);return this._names[d]={prefix:d,index:0}}}e.Scope=s;class o extends t.Name{constructor(d,u){super(u),this.prefix=d}setValue(d,{property:u,itemIndex:f}){this.value=d,this.scopePath=(0,t._)`.${new t.Name(u)}[${f}]`}}e.ValueScopeName=o;const a=(0,t._)`\n`;class i extends s{constructor(d){super(d),this._values={},this._scope=d.scope,this.opts={...d,_n:d.lines?a:t.nil}}get(){return this._scope}name(d){return new o(d,this._newName(d))}value(d,u){var f;if(u.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const v=this.toName(d),{prefix:y}=v,w=(f=u.key)!==null&&f!==void 0?f:u.ref;let g=this._values[y];if(g){const E=g.get(w);if(E)return E}else g=this._values[y]=new Map;g.set(w,v);const $=this._scope[y]||(this._scope[y]=[]),m=$.length;return $[m]=u.ref,v.setValue(u,{property:y,itemIndex:m}),v}getValue(d,u){const f=this._values[d];if(f)return f.get(u)}scopeRefs(d,u=this._values){return this._reduceValues(u,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${d}${f.scopePath}`})}scopeCode(d=this._values,u,f){return this._reduceValues(d,v=>{if(v.value===void 0)throw new Error(`CodeGen: name "${v}" has no value`);return v.value.code},u,f)}_reduceValues(d,u,f={},v){let y=t.nil;for(const w in d){const g=d[w];if(!g)continue;const $=f[w]=f[w]||new Map;g.forEach(m=>{if($.has(m))return;$.set(m,n.Started);let E=u(m);if(E){const N=this.opts.es5?e.varKinds.var:e.varKinds.const;y=(0,t._)`${y}${N} ${m} = ${E};${this.opts._n}`}else if(E=v==null?void 0:v(m))y=(0,t._)`${y}${E}${this.opts._n}`;else throw new r(m);$.set(m,n.Completed)})}return y}}e.ValueScope=i})(Fo);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=On,r=Fo;var n=On;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var s=Fo;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class o{optimizeNodes(){return this}optimizeNames(l,h){return this}}class a extends o{constructor(l,h,b){super(),this.varKind=l,this.name=h,this.rhs=b}render({es5:l,_n:h}){const b=l?r.varKinds.var:this.varKind,I=this.rhs===void 0?"":` = ${this.rhs}`;return`${b} ${this.name}${I};`+h}optimizeNames(l,h){if(l[this.name.str])return this.rhs&&(this.rhs=T(this.rhs,l,h)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class i extends o{constructor(l,h,b){super(),this.lhs=l,this.rhs=h,this.sideEffects=b}render({_n:l}){return`${this.lhs} = ${this.rhs};`+l}optimizeNames(l,h){if(!(this.lhs instanceof t.Name&&!l[this.lhs.str]&&!this.sideEffects))return this.rhs=T(this.rhs,l,h),this}get names(){const l=this.lhs instanceof t.Name?{}:{...this.lhs.names};return fe(l,this.rhs)}}class c extends i{constructor(l,h,b,I){super(l,b,I),this.op=h}render({_n:l}){return`${this.lhs} ${this.op}= ${this.rhs};`+l}}class d extends o{constructor(l){super(),this.label=l,this.names={}}render({_n:l}){return`${this.label}:`+l}}class u extends o{constructor(l){super(),this.label=l,this.names={}}render({_n:l}){return`break${this.label?` ${this.label}`:""};`+l}}class f extends o{constructor(l){super(),this.error=l}render({_n:l}){return`throw ${this.error};`+l}get names(){return this.error.names}}class v extends o{constructor(l){super(),this.code=l}render({_n:l}){return`${this.code};`+l}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(l,h){return this.code=T(this.code,l,h),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class y extends o{constructor(l=[]){super(),this.nodes=l}render(l){return this.nodes.reduce((h,b)=>h+b.render(l),"")}optimizeNodes(){const{nodes:l}=this;let h=l.length;for(;h--;){const b=l[h].optimizeNodes();Array.isArray(b)?l.splice(h,1,...b):b?l[h]=b:l.splice(h,1)}return l.length>0?this:void 0}optimizeNames(l,h){const{nodes:b}=this;let I=b.length;for(;I--;){const j=b[I];j.optimizeNames(l,h)||(A(l,j.names),b.splice(I,1))}return b.length>0?this:void 0}get names(){return this.nodes.reduce((l,h)=>Y(l,h.names),{})}}class w extends y{render(l){return"{"+l._n+super.render(l)+"}"+l._n}}class g extends y{}class $ extends w{}$.kind="else";class m extends w{constructor(l,h){super(h),this.condition=l}render(l){let h=`if(${this.condition})`+super.render(l);return this.else&&(h+="else "+this.else.render(l)),h}optimizeNodes(){super.optimizeNodes();const l=this.condition;if(l===!0)return this.nodes;let h=this.else;if(h){const b=h.optimizeNodes();h=this.else=Array.isArray(b)?new $(b):b}if(h)return l===!1?h instanceof m?h:h.nodes:this.nodes.length?this:new m(V(l),h instanceof m?[h]:h.nodes);if(!(l===!1||!this.nodes.length))return this}optimizeNames(l,h){var b;if(this.else=(b=this.else)===null||b===void 0?void 0:b.optimizeNames(l,h),!!(super.optimizeNames(l,h)||this.else))return this.condition=T(this.condition,l,h),this}get names(){const l=super.names;return fe(l,this.condition),this.else&&Y(l,this.else.names),l}}m.kind="if";class E extends w{}E.kind="for";class N extends E{constructor(l){super(),this.iteration=l}render(l){return`for(${this.iteration})`+super.render(l)}optimizeNames(l,h){if(super.optimizeNames(l,h))return this.iteration=T(this.iteration,l,h),this}get names(){return Y(super.names,this.iteration.names)}}class R extends E{constructor(l,h,b,I){super(),this.varKind=l,this.name=h,this.from=b,this.to=I}render(l){const h=l.es5?r.varKinds.var:this.varKind,{name:b,from:I,to:j}=this;return`for(${h} ${b}=${I}; ${b}<${j}; ${b}++)`+super.render(l)}get names(){const l=fe(super.names,this.from);return fe(l,this.to)}}class O extends E{constructor(l,h,b,I){super(),this.loop=l,this.varKind=h,this.name=b,this.iterable=I}render(l){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(l)}optimizeNames(l,h){if(super.optimizeNames(l,h))return this.iterable=T(this.iterable,l,h),this}get names(){return Y(super.names,this.iterable.names)}}class x extends w{constructor(l,h,b){super(),this.name=l,this.args=h,this.async=b}render(l){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(l)}}x.kind="func";class re extends y{render(l){return"return "+super.render(l)}}re.kind="return";class ge extends w{render(l){let h="try"+super.render(l);return this.catch&&(h+=this.catch.render(l)),this.finally&&(h+=this.finally.render(l)),h}optimizeNodes(){var l,h;return super.optimizeNodes(),(l=this.catch)===null||l===void 0||l.optimizeNodes(),(h=this.finally)===null||h===void 0||h.optimizeNodes(),this}optimizeNames(l,h){var b,I;return super.optimizeNames(l,h),(b=this.catch)===null||b===void 0||b.optimizeNames(l,h),(I=this.finally)===null||I===void 0||I.optimizeNames(l,h),this}get names(){const l=super.names;return this.catch&&Y(l,this.catch.names),this.finally&&Y(l,this.finally.names),l}}class we extends w{constructor(l){super(),this.error=l}render(l){return`catch(${this.error})`+super.render(l)}}we.kind="catch";class Se extends w{render(l){return"finally"+super.render(l)}}Se.kind="finally";class K{constructor(l,h={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...h,_n:h.lines?`
`:""},this._extScope=l,this._scope=new r.Scope({parent:l}),this._nodes=[new g]}toString(){return this._root.render(this.opts)}name(l){return this._scope.name(l)}scopeName(l){return this._extScope.name(l)}scopeValue(l,h){const b=this._extScope.value(l,h);return(this._values[b.prefix]||(this._values[b.prefix]=new Set)).add(b),b}getScopeValue(l,h){return this._extScope.getValue(l,h)}scopeRefs(l){return this._extScope.scopeRefs(l,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(l,h,b,I){const j=this._scope.toName(h);return b!==void 0&&I&&(this._constants[j.str]=b),this._leafNode(new a(l,j,b)),j}const(l,h,b){return this._def(r.varKinds.const,l,h,b)}let(l,h,b){return this._def(r.varKinds.let,l,h,b)}var(l,h,b){return this._def(r.varKinds.var,l,h,b)}assign(l,h,b){return this._leafNode(new i(l,h,b))}add(l,h){return this._leafNode(new c(l,e.operators.ADD,h))}code(l){return typeof l=="function"?l():l!==t.nil&&this._leafNode(new v(l)),this}object(...l){const h=["{"];for(const[b,I]of l)h.length>1&&h.push(","),h.push(b),(b!==I||this.opts.es5)&&(h.push(":"),(0,t.addCodeArg)(h,I));return h.push("}"),new t._Code(h)}if(l,h,b){if(this._blockNode(new m(l)),h&&b)this.code(h).else().code(b).endIf();else if(h)this.code(h).endIf();else if(b)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(l){return this._elseNode(new m(l))}else(){return this._elseNode(new $)}endIf(){return this._endBlockNode(m,$)}_for(l,h){return this._blockNode(l),h&&this.code(h).endFor(),this}for(l,h){return this._for(new N(l),h)}forRange(l,h,b,I,j=this.opts.es5?r.varKinds.var:r.varKinds.let){const G=this._scope.toName(l);return this._for(new R(j,G,h,b),()=>I(G))}forOf(l,h,b,I=r.varKinds.const){const j=this._scope.toName(l);if(this.opts.es5){const G=h instanceof t.Name?h:this.var("_arr",h);return this.forRange("_i",0,(0,t._)`${G}.length`,U=>{this.var(j,(0,t._)`${G}[${U}]`),b(j)})}return this._for(new O("of",I,j,h),()=>b(j))}forIn(l,h,b,I=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(l,(0,t._)`Object.keys(${h})`,b);const j=this._scope.toName(l);return this._for(new O("in",I,j,h),()=>b(j))}endFor(){return this._endBlockNode(E)}label(l){return this._leafNode(new d(l))}break(l){return this._leafNode(new u(l))}return(l){const h=new re;if(this._blockNode(h),this.code(l),h.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(re)}try(l,h,b){if(!h&&!b)throw new Error('CodeGen: "try" without "catch" and "finally"');const I=new ge;if(this._blockNode(I),this.code(l),h){const j=this.name("e");this._currNode=I.catch=new we(j),h(j)}return b&&(this._currNode=I.finally=new Se,this.code(b)),this._endBlockNode(we,Se)}throw(l){return this._leafNode(new f(l))}block(l,h){return this._blockStarts.push(this._nodes.length),l&&this.code(l).endBlock(h),this}endBlock(l){const h=this._blockStarts.pop();if(h===void 0)throw new Error("CodeGen: not in self-balancing block");const b=this._nodes.length-h;if(b<0||l!==void 0&&b!==l)throw new Error(`CodeGen: wrong number of nodes: ${b} vs ${l} expected`);return this._nodes.length=h,this}func(l,h=t.nil,b,I){return this._blockNode(new x(l,h,b)),I&&this.code(I).endFunc(),this}endFunc(){return this._endBlockNode(x)}optimize(l=1){for(;l-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(l){return this._currNode.nodes.push(l),this}_blockNode(l){this._currNode.nodes.push(l),this._nodes.push(l)}_endBlockNode(l,h){const b=this._currNode;if(b instanceof l||h&&b instanceof h)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${h?`${l.kind}/${h.kind}`:l.kind}"`)}_elseNode(l){const h=this._currNode;if(!(h instanceof m))throw new Error('CodeGen: "else" without "if"');return this._currNode=h.else=l,this}get _root(){return this._nodes[0]}get _currNode(){const l=this._nodes;return l[l.length-1]}set _currNode(l){const h=this._nodes;h[h.length-1]=l}}e.CodeGen=K;function Y(_,l){for(const h in l)_[h]=(_[h]||0)+(l[h]||0);return _}function fe(_,l){return l instanceof t._CodeOrName?Y(_,l.names):_}function T(_,l,h){if(_ instanceof t.Name)return b(_);if(!I(_))return _;return new t._Code(_._items.reduce((j,G)=>(G instanceof t.Name&&(G=b(G)),G instanceof t._Code?j.push(...G._items):j.push(G),j),[]));function b(j){const G=h[j.str];return G===void 0||l[j.str]!==1?j:(delete l[j.str],G)}function I(j){return j instanceof t._Code&&j._items.some(G=>G instanceof t.Name&&l[G.str]===1&&h[G.str]!==void 0)}}function A(_,l){for(const h in l)_[h]=(_[h]||0)-(l[h]||0)}function V(_){return typeof _=="boolean"||typeof _=="number"||_===null?!_:(0,t._)`!${S(_)}`}e.not=V;const F=p(e.operators.AND);function B(..._){return _.reduce(F)}e.and=B;const L=p(e.operators.OR);function P(..._){return _.reduce(L)}e.or=P;function p(_){return(l,h)=>l===t.nil?h:h===t.nil?l:(0,t._)`${S(l)} ${_} ${S(h)}`}function S(_){return _ instanceof t.Name?_:(0,t._)`(${_})`}})(ie);var D={};Object.defineProperty(D,"__esModule",{value:!0});D.checkStrictMode=D.getErrorPath=D.Type=D.useFunc=D.setEvaluated=D.evaluatedPropsToName=D.mergeEvaluated=D.eachItem=D.unescapeJsonPointer=D.escapeJsonPointer=D.escapeFragment=D.unescapeFragment=D.schemaRefOrVal=D.schemaHasRulesButRef=D.schemaHasRules=D.checkUnknownRules=D.alwaysValidSchema=D.toHash=void 0;const pe=ie,$_=On;function g_(e){const t={};for(const r of e)t[r]=!0;return t}D.toHash=g_;function __(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(Vu(e,t),!Uu(t,e.self.RULES.all))}D.alwaysValidSchema=__;function Vu(e,t=e.schema){const{opts:r,self:n}=e;if(!r.strictSchema||typeof t=="boolean")return;const s=n.RULES.keywords;for(const o in t)s[o]||Ku(e,`unknown keyword: "${o}"`)}D.checkUnknownRules=Vu;function Uu(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(t[r])return!0;return!1}D.schemaHasRules=Uu;function v_(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}D.schemaHasRulesButRef=v_;function w_({topSchemaRef:e,schemaPath:t},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,pe._)`${r}`}return(0,pe._)`${e}${t}${(0,pe.getProperty)(n)}`}D.schemaRefOrVal=w_;function E_(e){return qu(decodeURIComponent(e))}D.unescapeFragment=E_;function b_(e){return encodeURIComponent(ri(e))}D.escapeFragment=b_;function ri(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}D.escapeJsonPointer=ri;function qu(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}D.unescapeJsonPointer=qu;function S_(e,t){if(Array.isArray(e))for(const r of e)t(r);else t(e)}D.eachItem=S_;function Cc({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:n}){return(s,o,a,i)=>{const c=a===void 0?o:a instanceof pe.Name?(o instanceof pe.Name?e(s,o,a):t(s,o,a),a):o instanceof pe.Name?(t(s,a,o),o):r(o,a);return i===pe.Name&&!(c instanceof pe.Name)?n(s,c):c}}D.mergeEvaluated={props:Cc({mergeNames:(e,t,r)=>e.if((0,pe._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,pe._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,pe._)`${r} || {}`).code((0,pe._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,pe._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,pe._)`${r} || {}`),ni(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:Gu}),items:Cc({mergeNames:(e,t,r)=>e.if((0,pe._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,pe._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,pe._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,pe._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function Gu(e,t){if(t===!0)return e.var("props",!0);const r=e.var("props",(0,pe._)`{}`);return t!==void 0&&ni(e,r,t),r}D.evaluatedPropsToName=Gu;function ni(e,t,r){Object.keys(r).forEach(n=>e.assign((0,pe._)`${t}${(0,pe.getProperty)(n)}`,!0))}D.setEvaluated=ni;const Mc={};function P_(e,t){return e.scopeValue("func",{ref:t,code:Mc[t.code]||(Mc[t.code]=new $_._Code(t.code))})}D.useFunc=P_;var Lo;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(Lo||(D.Type=Lo={}));function N_(e,t,r){if(e instanceof pe.Name){const n=t===Lo.Num;return r?n?(0,pe._)`"[" + ${e} + "]"`:(0,pe._)`"['" + ${e} + "']"`:n?(0,pe._)`"/" + ${e}`:(0,pe._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,pe.getProperty)(e).toString():"/"+ri(e)}D.getErrorPath=N_;function Ku(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}D.checkStrictMode=Ku;var St={};Object.defineProperty(St,"__esModule",{value:!0});const Me=ie,R_={data:new Me.Name("data"),valCxt:new Me.Name("valCxt"),instancePath:new Me.Name("instancePath"),parentData:new Me.Name("parentData"),parentDataProperty:new Me.Name("parentDataProperty"),rootData:new Me.Name("rootData"),dynamicAnchors:new Me.Name("dynamicAnchors"),vErrors:new Me.Name("vErrors"),errors:new Me.Name("errors"),this:new Me.Name("this"),self:new Me.Name("self"),scope:new Me.Name("scope"),json:new Me.Name("json"),jsonPos:new Me.Name("jsonPos"),jsonLen:new Me.Name("jsonLen"),jsonPart:new Me.Name("jsonPart")};St.default=R_;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=ie,r=D,n=St;e.keywordError={message:({keyword:$})=>(0,t.str)`must pass "${$}" keyword validation`},e.keyword$DataError={message:({keyword:$,schemaType:m})=>m?(0,t.str)`"${$}" keyword must be ${m} ($data)`:(0,t.str)`"${$}" keyword is invalid ($data)`};function s($,m=e.keywordError,E,N){const{it:R}=$,{gen:O,compositeRule:x,allErrors:re}=R,ge=f($,m,E);N??(x||re)?c(O,ge):d(R,(0,t._)`[${ge}]`)}e.reportError=s;function o($,m=e.keywordError,E){const{it:N}=$,{gen:R,compositeRule:O,allErrors:x}=N,re=f($,m,E);c(R,re),O||x||d(N,n.default.vErrors)}e.reportExtraError=o;function a($,m){$.assign(n.default.errors,m),$.if((0,t._)`${n.default.vErrors} !== null`,()=>$.if(m,()=>$.assign((0,t._)`${n.default.vErrors}.length`,m),()=>$.assign(n.default.vErrors,null)))}e.resetErrorsCount=a;function i({gen:$,keyword:m,schemaValue:E,data:N,errsCount:R,it:O}){if(R===void 0)throw new Error("ajv implementation error");const x=$.name("err");$.forRange("i",R,n.default.errors,re=>{$.const(x,(0,t._)`${n.default.vErrors}[${re}]`),$.if((0,t._)`${x}.instancePath === undefined`,()=>$.assign((0,t._)`${x}.instancePath`,(0,t.strConcat)(n.default.instancePath,O.errorPath))),$.assign((0,t._)`${x}.schemaPath`,(0,t.str)`${O.errSchemaPath}/${m}`),O.opts.verbose&&($.assign((0,t._)`${x}.schema`,E),$.assign((0,t._)`${x}.data`,N))})}e.extendErrors=i;function c($,m){const E=$.const("err",m);$.if((0,t._)`${n.default.vErrors} === null`,()=>$.assign(n.default.vErrors,(0,t._)`[${E}]`),(0,t._)`${n.default.vErrors}.push(${E})`),$.code((0,t._)`${n.default.errors}++`)}function d($,m){const{gen:E,validateName:N,schemaEnv:R}=$;R.$async?E.throw((0,t._)`new ${$.ValidationError}(${m})`):(E.assign((0,t._)`${N}.errors`,m),E.return(!1))}const u={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f($,m,E){const{createErrors:N}=$.it;return N===!1?(0,t._)`{}`:v($,m,E)}function v($,m,E={}){const{gen:N,it:R}=$,O=[y(R,E),w($,E)];return g($,m,O),N.object(...O)}function y({errorPath:$},{instancePath:m}){const E=m?(0,t.str)`${$}${(0,r.getErrorPath)(m,r.Type.Str)}`:$;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,E)]}function w({keyword:$,it:{errSchemaPath:m}},{schemaPath:E,parentSchema:N}){let R=N?m:(0,t.str)`${m}/${$}`;return E&&(R=(0,t.str)`${R}${(0,r.getErrorPath)(E,r.Type.Str)}`),[u.schemaPath,R]}function g($,{params:m,message:E},N){const{keyword:R,data:O,schemaValue:x,it:re}=$,{opts:ge,propertyName:we,topSchemaRef:Se,schemaPath:K}=re;N.push([u.keyword,R],[u.params,typeof m=="function"?m($):m||(0,t._)`{}`]),ge.messages&&N.push([u.message,typeof E=="function"?E($):E]),ge.verbose&&N.push([u.schema,x],[u.parentSchema,(0,t._)`${Se}${K}`],[n.default.data,O]),we&&N.push([u.propertyName,we])}})(An);Object.defineProperty(Kr,"__esModule",{value:!0});Kr.boolOrEmptySchema=Kr.topBoolOrEmptySchema=void 0;const O_=An,I_=ie,T_=St,j_={message:"boolean schema is false"};function A_(e){const{gen:t,schema:r,validateName:n}=e;r===!1?Hu(e,!1):typeof r=="object"&&r.$async===!0?t.return(T_.default.data):(t.assign((0,I_._)`${n}.errors`,null),t.return(!0))}Kr.topBoolOrEmptySchema=A_;function k_(e,t){const{gen:r,schema:n}=e;n===!1?(r.var(t,!1),Hu(e)):r.var(t,!0)}Kr.boolOrEmptySchema=k_;function Hu(e,t){const{gen:r,data:n}=e,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,O_.reportError)(s,j_,void 0,t)}var Ne={},Sr={};Object.defineProperty(Sr,"__esModule",{value:!0});Sr.getRules=Sr.isJSONType=void 0;const C_=["string","number","integer","boolean","null","object","array"],M_=new Set(C_);function D_(e){return typeof e=="string"&&M_.has(e)}Sr.isJSONType=D_;function F_(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Sr.getRules=F_;var It={};Object.defineProperty(It,"__esModule",{value:!0});It.shouldUseRule=It.shouldUseGroup=It.schemaHasRulesForType=void 0;function L_({schema:e,self:t},r){const n=t.RULES.types[r];return n&&n!==!0&&Wu(e,n)}It.schemaHasRulesForType=L_;function Wu(e,t){return t.rules.some(r=>xu(e,r))}It.shouldUseGroup=Wu;function xu(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(n=>e[n]!==void 0))}It.shouldUseRule=xu;Object.defineProperty(Ne,"__esModule",{value:!0});Ne.reportTypeError=Ne.checkDataTypes=Ne.checkDataType=Ne.coerceAndCheckDataType=Ne.getJSONTypes=Ne.getSchemaTypes=Ne.DataType=void 0;const z_=Sr,V_=It,U_=An,ae=ie,Bu=D;var Lr;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Lr||(Ne.DataType=Lr={}));function q_(e){const t=Yu(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Ne.getSchemaTypes=q_;function Yu(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(z_.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Ne.getJSONTypes=Yu;function G_(e,t){const{gen:r,data:n,opts:s}=e,o=K_(t,s.coerceTypes),a=t.length>0&&!(o.length===0&&t.length===1&&(0,V_.schemaHasRulesForType)(e,t[0]));if(a){const i=si(t,n,s.strictNumbers,Lr.Wrong);r.if(i,()=>{o.length?H_(e,t,o):oi(e)})}return a}Ne.coerceAndCheckDataType=G_;const Ju=new Set(["string","number","integer","boolean","null"]);function K_(e,t){return t?e.filter(r=>Ju.has(r)||t==="array"&&r==="array"):[]}function H_(e,t,r){const{gen:n,data:s,opts:o}=e,a=n.let("dataType",(0,ae._)`typeof ${s}`),i=n.let("coerced",(0,ae._)`undefined`);o.coerceTypes==="array"&&n.if((0,ae._)`${a} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,ae._)`${s}[0]`).assign(a,(0,ae._)`typeof ${s}`).if(si(t,s,o.strictNumbers),()=>n.assign(i,s))),n.if((0,ae._)`${i} !== undefined`);for(const d of r)(Ju.has(d)||d==="array"&&o.coerceTypes==="array")&&c(d);n.else(),oi(e),n.endIf(),n.if((0,ae._)`${i} !== undefined`,()=>{n.assign(s,i),W_(e,i)});function c(d){switch(d){case"string":n.elseIf((0,ae._)`${a} == "number" || ${a} == "boolean"`).assign(i,(0,ae._)`"" + ${s}`).elseIf((0,ae._)`${s} === null`).assign(i,(0,ae._)`""`);return;case"number":n.elseIf((0,ae._)`${a} == "boolean" || ${s} === null
              || (${a} == "string" && ${s} && ${s} == +${s})`).assign(i,(0,ae._)`+${s}`);return;case"integer":n.elseIf((0,ae._)`${a} === "boolean" || ${s} === null
              || (${a} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(i,(0,ae._)`+${s}`);return;case"boolean":n.elseIf((0,ae._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(i,!1).elseIf((0,ae._)`${s} === "true" || ${s} === 1`).assign(i,!0);return;case"null":n.elseIf((0,ae._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(i,null);return;case"array":n.elseIf((0,ae._)`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${s} === null`).assign(i,(0,ae._)`[${s}]`)}}}function W_({gen:e,parentData:t,parentDataProperty:r},n){e.if((0,ae._)`${t} !== undefined`,()=>e.assign((0,ae._)`${t}[${r}]`,n))}function zo(e,t,r,n=Lr.Correct){const s=n===Lr.Correct?ae.operators.EQ:ae.operators.NEQ;let o;switch(e){case"null":return(0,ae._)`${t} ${s} null`;case"array":o=(0,ae._)`Array.isArray(${t})`;break;case"object":o=(0,ae._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=a((0,ae._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=a();break;default:return(0,ae._)`typeof ${t} ${s} ${e}`}return n===Lr.Correct?o:(0,ae.not)(o);function a(i=ae.nil){return(0,ae.and)((0,ae._)`typeof ${t} == "number"`,i,r?(0,ae._)`isFinite(${t})`:ae.nil)}}Ne.checkDataType=zo;function si(e,t,r,n){if(e.length===1)return zo(e[0],t,r,n);let s;const o=(0,Bu.toHash)(e);if(o.array&&o.object){const a=(0,ae._)`typeof ${t} != "object"`;s=o.null?a:(0,ae._)`!${t} || ${a}`,delete o.null,delete o.array,delete o.object}else s=ae.nil;o.number&&delete o.integer;for(const a in o)s=(0,ae.and)(s,zo(a,t,r,n));return s}Ne.checkDataTypes=si;const x_={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,ae._)`{type: ${e}}`:(0,ae._)`{type: ${t}}`};function oi(e){const t=B_(e);(0,U_.reportError)(t,x_)}Ne.reportTypeError=oi;function B_(e){const{gen:t,data:r,schema:n}=e,s=(0,Bu.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:e}}var Vs={};Object.defineProperty(Vs,"__esModule",{value:!0});Vs.assignDefaults=void 0;const Ir=ie,Y_=D;function J_(e,t){const{properties:r,items:n}=e.schema;if(t==="object"&&r)for(const s in r)Dc(e,s,r[s].default);else t==="array"&&Array.isArray(n)&&n.forEach((s,o)=>Dc(e,o,s.default))}Vs.assignDefaults=J_;function Dc(e,t,r){const{gen:n,compositeRule:s,data:o,opts:a}=e;if(r===void 0)return;const i=(0,Ir._)`${o}${(0,Ir.getProperty)(t)}`;if(s){(0,Y_.checkStrictMode)(e,`default is ignored for: ${i}`);return}let c=(0,Ir._)`${i} === undefined`;a.useDefaults==="empty"&&(c=(0,Ir._)`${c} || ${i} === null || ${i} === ""`),n.if(c,(0,Ir._)`${i} = ${(0,Ir.stringify)(r)}`)}var bt={},le={};Object.defineProperty(le,"__esModule",{value:!0});le.validateUnion=le.validateArray=le.usePattern=le.callValidateCode=le.schemaProperties=le.allSchemaProperties=le.noPropertyInData=le.propertyInData=le.isOwnProperty=le.hasPropFunc=le.reportMissingProp=le.checkMissingProp=le.checkReportMissingProp=void 0;const $e=ie,ai=D,Lt=St,X_=D;function Z_(e,t){const{gen:r,data:n,it:s}=e;r.if(ci(r,n,t,s.opts.ownProperties),()=>{e.setParams({missingProperty:(0,$e._)`${t}`},!0),e.error()})}le.checkReportMissingProp=Z_;function Q_({gen:e,data:t,it:{opts:r}},n,s){return(0,$e.or)(...n.map(o=>(0,$e.and)(ci(e,t,o,r.ownProperties),(0,$e._)`${s} = ${o}`)))}le.checkMissingProp=Q_;function ev(e,t){e.setParams({missingProperty:t},!0),e.error()}le.reportMissingProp=ev;function Xu(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,$e._)`Object.prototype.hasOwnProperty`})}le.hasPropFunc=Xu;function ii(e,t,r){return(0,$e._)`${Xu(e)}.call(${t}, ${r})`}le.isOwnProperty=ii;function tv(e,t,r,n){const s=(0,$e._)`${t}${(0,$e.getProperty)(r)} !== undefined`;return n?(0,$e._)`${s} && ${ii(e,t,r)}`:s}le.propertyInData=tv;function ci(e,t,r,n){const s=(0,$e._)`${t}${(0,$e.getProperty)(r)} === undefined`;return n?(0,$e.or)(s,(0,$e.not)(ii(e,t,r))):s}le.noPropertyInData=ci;function Zu(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}le.allSchemaProperties=Zu;function rv(e,t){return Zu(t).filter(r=>!(0,ai.alwaysValidSchema)(e,t[r]))}le.schemaProperties=rv;function nv({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:o},it:a},i,c,d){const u=d?(0,$e._)`${e}, ${t}, ${n}${s}`:t,f=[[Lt.default.instancePath,(0,$e.strConcat)(Lt.default.instancePath,o)],[Lt.default.parentData,a.parentData],[Lt.default.parentDataProperty,a.parentDataProperty],[Lt.default.rootData,Lt.default.rootData]];a.opts.dynamicRef&&f.push([Lt.default.dynamicAnchors,Lt.default.dynamicAnchors]);const v=(0,$e._)`${u}, ${r.object(...f)}`;return c!==$e.nil?(0,$e._)`${i}.call(${c}, ${v})`:(0,$e._)`${i}(${v})`}le.callValidateCode=nv;const sv=(0,$e._)`new RegExp`;function ov({gen:e,it:{opts:t}},r){const n=t.unicodeRegExp?"u":"",{regExp:s}=t.code,o=s(r,n);return e.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,$e._)`${s.code==="new RegExp"?sv:(0,X_.useFunc)(e,s)}(${r}, ${n})`})}le.usePattern=ov;function av(e){const{gen:t,data:r,keyword:n,it:s}=e,o=t.name("valid");if(s.allErrors){const i=t.let("valid",!0);return a(()=>t.assign(i,!1)),i}return t.var(o,!0),a(()=>t.break()),o;function a(i){const c=t.const("len",(0,$e._)`${r}.length`);t.forRange("i",0,c,d=>{e.subschema({keyword:n,dataProp:d,dataPropType:ai.Type.Num},o),t.if((0,$e.not)(o),i)})}}le.validateArray=av;function iv(e){const{gen:t,schema:r,keyword:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(c=>(0,ai.alwaysValidSchema)(s,c))&&!s.opts.unevaluated)return;const a=t.let("valid",!1),i=t.name("_valid");t.block(()=>r.forEach((c,d)=>{const u=e.subschema({keyword:n,schemaProp:d,compositeRule:!0},i);t.assign(a,(0,$e._)`${a} || ${i}`),e.mergeValidEvaluated(u,i)||t.if((0,$e.not)(a))})),e.result(a,()=>e.reset(),()=>e.error(!0))}le.validateUnion=iv;Object.defineProperty(bt,"__esModule",{value:!0});bt.validateKeywordUsage=bt.validSchemaType=bt.funcKeywordCode=bt.macroKeywordCode=void 0;const ze=ie,yr=St,cv=le,lv=An;function uv(e,t){const{gen:r,keyword:n,schema:s,parentSchema:o,it:a}=e,i=t.macro.call(a.self,s,o,a),c=Qu(r,n,i);a.opts.validateSchema!==!1&&a.self.validateSchema(i,!0);const d=r.name("valid");e.subschema({schema:i,schemaPath:ze.nil,errSchemaPath:`${a.errSchemaPath}/${n}`,topSchemaRef:c,compositeRule:!0},d),e.pass(d,()=>e.error(!0))}bt.macroKeywordCode=uv;function dv(e,t){var r;const{gen:n,keyword:s,schema:o,parentSchema:a,$data:i,it:c}=e;hv(c,t);const d=!i&&t.compile?t.compile.call(c.self,o,a,c):t.validate,u=Qu(n,s,d),f=n.let("valid");e.block$data(f,v),e.ok((r=t.valid)!==null&&r!==void 0?r:f);function v(){if(t.errors===!1)g(),t.modifying&&Fc(e),$(()=>e.error());else{const m=t.async?y():w();t.modifying&&Fc(e),$(()=>fv(e,m))}}function y(){const m=n.let("ruleErrs",null);return n.try(()=>g((0,ze._)`await `),E=>n.assign(f,!1).if((0,ze._)`${E} instanceof ${c.ValidationError}`,()=>n.assign(m,(0,ze._)`${E}.errors`),()=>n.throw(E))),m}function w(){const m=(0,ze._)`${u}.errors`;return n.assign(m,null),g(ze.nil),m}function g(m=t.async?(0,ze._)`await `:ze.nil){const E=c.opts.passContext?yr.default.this:yr.default.self,N=!("compile"in t&&!i||t.schema===!1);n.assign(f,(0,ze._)`${m}${(0,cv.callValidateCode)(e,u,E,N)}`,t.modifying)}function $(m){var E;n.if((0,ze.not)((E=t.valid)!==null&&E!==void 0?E:f),m)}}bt.funcKeywordCode=dv;function Fc(e){const{gen:t,data:r,it:n}=e;t.if(n.parentData,()=>t.assign(r,(0,ze._)`${n.parentData}[${n.parentDataProperty}]`))}function fv(e,t){const{gen:r}=e;r.if((0,ze._)`Array.isArray(${t})`,()=>{r.assign(yr.default.vErrors,(0,ze._)`${yr.default.vErrors} === null ? ${t} : ${yr.default.vErrors}.concat(${t})`).assign(yr.default.errors,(0,ze._)`${yr.default.vErrors}.length`),(0,lv.extendErrors)(e)},()=>e.error())}function hv({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function Qu(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,ze.stringify)(r)})}function mv(e,t,r=!1){return!t.length||t.some(n=>n==="array"?Array.isArray(e):n==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==n||r&&typeof e>"u")}bt.validSchemaType=mv;function pv({schema:e,opts:t,self:r,errSchemaPath:n},s,o){if(Array.isArray(s.keyword)?!s.keyword.includes(o):s.keyword!==o)throw new Error("ajv implementation error");const a=s.dependencies;if(a!=null&&a.some(i=>!Object.prototype.hasOwnProperty.call(e,i)))throw new Error(`parent schema must have dependencies of ${o}: ${a.join(",")}`);if(s.validateSchema&&!s.validateSchema(e[o])){const c=`keyword "${o}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(c);else throw new Error(c)}}bt.validateKeywordUsage=pv;var Bt={};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.extendSubschemaMode=Bt.extendSubschemaData=Bt.getSubschema=void 0;const vt=ie,ed=D;function yv(e,{keyword:t,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:o,topSchemaRef:a}){if(t!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const i=e.schema[t];return r===void 0?{schema:i,schemaPath:(0,vt._)`${e.schemaPath}${(0,vt.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:i[r],schemaPath:(0,vt._)`${e.schemaPath}${(0,vt.getProperty)(t)}${(0,vt.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,ed.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||o===void 0||a===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:a,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}Bt.getSubschema=yv;function $v(e,t,{dataProp:r,dataPropType:n,data:s,dataTypes:o,propertyName:a}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:i}=t;if(r!==void 0){const{errorPath:d,dataPathArr:u,opts:f}=t,v=i.let("data",(0,vt._)`${t.data}${(0,vt.getProperty)(r)}`,!0);c(v),e.errorPath=(0,vt.str)`${d}${(0,ed.getErrorPath)(r,n,f.jsPropertySyntax)}`,e.parentDataProperty=(0,vt._)`${r}`,e.dataPathArr=[...u,e.parentDataProperty]}if(s!==void 0){const d=s instanceof vt.Name?s:i.let("data",s,!0);c(d),a!==void 0&&(e.propertyName=a)}o&&(e.dataTypes=o);function c(d){e.data=d,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,d]}}Bt.extendSubschemaData=$v;function gv(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:o}){n!==void 0&&(e.compositeRule=n),s!==void 0&&(e.createErrors=s),o!==void 0&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=r}Bt.extendSubschemaMode=gv;var Ae={},td={exports:{}},Wt=td.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};us(t,n,s,e,"",e)};Wt.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Wt.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Wt.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Wt.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function us(e,t,r,n,s,o,a,i,c,d){if(n&&typeof n=="object"&&!Array.isArray(n)){t(n,s,o,a,i,c,d);for(var u in n){var f=n[u];if(Array.isArray(f)){if(u in Wt.arrayKeywords)for(var v=0;v<f.length;v++)us(e,t,r,f[v],s+"/"+u+"/"+v,o,s,u,n,v)}else if(u in Wt.propsKeywords){if(f&&typeof f=="object")for(var y in f)us(e,t,r,f[y],s+"/"+u+"/"+_v(y),o,s,u,n,y)}else(u in Wt.keywords||e.allKeys&&!(u in Wt.skipKeywords))&&us(e,t,r,f,s+"/"+u,o,s,u,n)}r(n,s,o,a,i,c,d)}}function _v(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var vv=td.exports;Object.defineProperty(Ae,"__esModule",{value:!0});Ae.getSchemaRefs=Ae.resolveUrl=Ae.normalizeId=Ae._getFullPath=Ae.getFullPath=Ae.inlineRef=void 0;const wv=D,Ev=ks,bv=vv,Sv=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Pv(e,t=!0){return typeof e=="boolean"?!0:t===!0?!Vo(e):t?rd(e)<=t:!1}Ae.inlineRef=Pv;const Nv=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Vo(e){for(const t in e){if(Nv.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(Vo)||typeof r=="object"&&Vo(r))return!0}return!1}function rd(e){let t=0;for(const r in e){if(r==="$ref")return 1/0;if(t++,!Sv.has(r)&&(typeof e[r]=="object"&&(0,wv.eachItem)(e[r],n=>t+=rd(n)),t===1/0))return 1/0}return t}function nd(e,t="",r){r!==!1&&(t=zr(t));const n=e.parse(t);return sd(e,n)}Ae.getFullPath=nd;function sd(e,t){return e.serialize(t).split("#")[0]+"#"}Ae._getFullPath=sd;const Rv=/#\/?$/;function zr(e){return e?e.replace(Rv,""):""}Ae.normalizeId=zr;function Ov(e,t,r){return r=zr(r),e.resolve(t,r)}Ae.resolveUrl=Ov;const Iv=/^[a-z_][-a-z0-9._]*$/i;function Tv(e,t){if(typeof e=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,s=zr(e[r]||t),o={"":s},a=nd(n,s,!1),i={},c=new Set;return bv(e,{allKeys:!0},(f,v,y,w)=>{if(w===void 0)return;const g=a+v;let $=o[w];typeof f[r]=="string"&&($=m.call(this,f[r])),E.call(this,f.$anchor),E.call(this,f.$dynamicAnchor),o[v]=$;function m(N){const R=this.opts.uriResolver.resolve;if(N=zr($?R($,N):N),c.has(N))throw u(N);c.add(N);let O=this.refs[N];return typeof O=="string"&&(O=this.refs[O]),typeof O=="object"?d(f,O.schema,N):N!==zr(g)&&(N[0]==="#"?(d(f,i[N],N),i[N]=f):this.refs[N]=g),N}function E(N){if(typeof N=="string"){if(!Iv.test(N))throw new Error(`invalid anchor "${N}"`);m.call(this,`#${N}`)}}}),i;function d(f,v,y){if(v!==void 0&&!Ev(f,v))throw u(y)}function u(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Ae.getSchemaRefs=Tv;Object.defineProperty(ht,"__esModule",{value:!0});ht.getData=ht.KeywordCxt=ht.validateFunctionCode=void 0;const od=Kr,Lc=Ne,li=It,Ss=Ne,jv=Vs,_n=bt,co=Bt,W=ie,te=St,Av=Ae,Tt=D,an=An;function kv(e){if(cd(e)&&(ld(e),id(e))){Dv(e);return}ad(e,()=>(0,od.topBoolOrEmptySchema)(e))}ht.validateFunctionCode=kv;function ad({gen:e,validateName:t,schema:r,schemaEnv:n,opts:s},o){s.code.es5?e.func(t,(0,W._)`${te.default.data}, ${te.default.valCxt}`,n.$async,()=>{e.code((0,W._)`"use strict"; ${zc(r,s)}`),Mv(e,s),e.code(o)}):e.func(t,(0,W._)`${te.default.data}, ${Cv(s)}`,n.$async,()=>e.code(zc(r,s)).code(o))}function Cv(e){return(0,W._)`{${te.default.instancePath}="", ${te.default.parentData}, ${te.default.parentDataProperty}, ${te.default.rootData}=${te.default.data}${e.dynamicRef?(0,W._)`, ${te.default.dynamicAnchors}={}`:W.nil}}={}`}function Mv(e,t){e.if(te.default.valCxt,()=>{e.var(te.default.instancePath,(0,W._)`${te.default.valCxt}.${te.default.instancePath}`),e.var(te.default.parentData,(0,W._)`${te.default.valCxt}.${te.default.parentData}`),e.var(te.default.parentDataProperty,(0,W._)`${te.default.valCxt}.${te.default.parentDataProperty}`),e.var(te.default.rootData,(0,W._)`${te.default.valCxt}.${te.default.rootData}`),t.dynamicRef&&e.var(te.default.dynamicAnchors,(0,W._)`${te.default.valCxt}.${te.default.dynamicAnchors}`)},()=>{e.var(te.default.instancePath,(0,W._)`""`),e.var(te.default.parentData,(0,W._)`undefined`),e.var(te.default.parentDataProperty,(0,W._)`undefined`),e.var(te.default.rootData,te.default.data),t.dynamicRef&&e.var(te.default.dynamicAnchors,(0,W._)`{}`)})}function Dv(e){const{schema:t,opts:r,gen:n}=e;ad(e,()=>{r.$comment&&t.$comment&&dd(e),Uv(e),n.let(te.default.vErrors,null),n.let(te.default.errors,0),r.unevaluated&&Fv(e),ud(e),Kv(e)})}function Fv(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,W._)`${r}.evaluated`),t.if((0,W._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,W._)`${e.evaluated}.props`,(0,W._)`undefined`)),t.if((0,W._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,W._)`${e.evaluated}.items`,(0,W._)`undefined`))}function zc(e,t){const r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,W._)`/*# sourceURL=${r} */`:W.nil}function Lv(e,t){if(cd(e)&&(ld(e),id(e))){zv(e,t);return}(0,od.boolOrEmptySchema)(e,t)}function id({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function cd(e){return typeof e.schema!="boolean"}function zv(e,t){const{schema:r,gen:n,opts:s}=e;s.$comment&&r.$comment&&dd(e),qv(e),Gv(e);const o=n.const("_errs",te.default.errors);ud(e,o),n.var(t,(0,W._)`${o} === ${te.default.errors}`)}function ld(e){(0,Tt.checkUnknownRules)(e),Vv(e)}function ud(e,t){if(e.opts.jtd)return Vc(e,[],!1,t);const r=(0,Lc.getSchemaTypes)(e.schema),n=(0,Lc.coerceAndCheckDataType)(e,r);Vc(e,r,!n,t)}function Vv(e){const{schema:t,errSchemaPath:r,opts:n,self:s}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,Tt.schemaHasRulesButRef)(t,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function Uv(e){const{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Tt.checkStrictMode)(e,"default is ignored in the schema root")}function qv(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,Av.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function Gv(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function dd({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:s}){const o=r.$comment;if(s.$comment===!0)e.code((0,W._)`${te.default.self}.logger.log(${o})`);else if(typeof s.$comment=="function"){const a=(0,W.str)`${n}/$comment`,i=e.scopeValue("root",{ref:t.root});e.code((0,W._)`${te.default.self}.opts.$comment(${o}, ${a}, ${i}.schema)`)}}function Kv(e){const{gen:t,schemaEnv:r,validateName:n,ValidationError:s,opts:o}=e;r.$async?t.if((0,W._)`${te.default.errors} === 0`,()=>t.return(te.default.data),()=>t.throw((0,W._)`new ${s}(${te.default.vErrors})`)):(t.assign((0,W._)`${n}.errors`,te.default.vErrors),o.unevaluated&&Hv(e),t.return((0,W._)`${te.default.errors} === 0`))}function Hv({gen:e,evaluated:t,props:r,items:n}){r instanceof W.Name&&e.assign((0,W._)`${t}.props`,r),n instanceof W.Name&&e.assign((0,W._)`${t}.items`,n)}function Vc(e,t,r,n){const{gen:s,schema:o,data:a,allErrors:i,opts:c,self:d}=e,{RULES:u}=d;if(o.$ref&&(c.ignoreKeywordsWithRef||!(0,Tt.schemaHasRulesButRef)(o,u))){s.block(()=>md(e,"$ref",u.all.$ref.definition));return}c.jtd||Wv(e,t),s.block(()=>{for(const v of u.rules)f(v);f(u.post)});function f(v){(0,li.shouldUseGroup)(o,v)&&(v.type?(s.if((0,Ss.checkDataType)(v.type,a,c.strictNumbers)),Uc(e,v),t.length===1&&t[0]===v.type&&r&&(s.else(),(0,Ss.reportTypeError)(e)),s.endIf()):Uc(e,v),i||s.if((0,W._)`${te.default.errors} === ${n||0}`))}}function Uc(e,t){const{gen:r,schema:n,opts:{useDefaults:s}}=e;s&&(0,jv.assignDefaults)(e,t.type),r.block(()=>{for(const o of t.rules)(0,li.shouldUseRule)(n,o)&&md(e,o.keyword,o.definition,t.type)})}function Wv(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(xv(e,t),e.opts.allowUnionTypes||Bv(e,t),Yv(e,e.dataTypes))}function xv(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{fd(e.dataTypes,r)||ui(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),Xv(e,t)}}function Bv(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&ui(e,"use allowUnionTypes to allow union type keyword")}function Yv(e,t){const r=e.self.RULES.all;for(const n in r){const s=r[n];if(typeof s=="object"&&(0,li.shouldUseRule)(e.schema,s)){const{type:o}=s.definition;o.length&&!o.some(a=>Jv(t,a))&&ui(e,`missing type "${o.join(",")}" for keyword "${n}"`)}}}function Jv(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function fd(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function Xv(e,t){const r=[];for(const n of e.dataTypes)fd(t,n)?r.push(n):t.includes("integer")&&n==="number"&&r.push("integer");e.dataTypes=r}function ui(e,t){const r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,Tt.checkStrictMode)(e,t,e.opts.strictTypes)}class hd{constructor(t,r,n){if((0,_n.validateKeywordUsage)(t,r,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Tt.schemaRefOrVal)(t,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",pd(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,_n.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",te.default.errors))}result(t,r,n){this.failResult((0,W.not)(t),r,n)}failResult(t,r,n){this.gen.if(t),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,W.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:r}=this;this.fail((0,W._)`${r} !== undefined && (${(0,W.or)(this.invalid$data(),t)})`)}error(t,r,n){if(r){this.setParams(r),this._error(t,n),this.setParams({});return}this._error(t,n)}_error(t,r){(t?an.reportExtraError:an.reportError)(this,this.def.error,r)}$dataError(){(0,an.reportError)(this,this.def.$dataError||an.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,an.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,n=W.nil){this.gen.block(()=>{this.check$data(t,n),r()})}check$data(t=W.nil,r=W.nil){if(!this.$data)return;const{gen:n,schemaCode:s,schemaType:o,def:a}=this;n.if((0,W.or)((0,W._)`${s} === undefined`,r)),t!==W.nil&&n.assign(t,!0),(o.length||a.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),t!==W.nil&&n.assign(t,!1)),n.else()}invalid$data(){const{gen:t,schemaCode:r,schemaType:n,def:s,it:o}=this;return(0,W.or)(a(),i());function a(){if(n.length){if(!(r instanceof W.Name))throw new Error("ajv implementation error");const c=Array.isArray(n)?n:[n];return(0,W._)`${(0,Ss.checkDataTypes)(c,r,o.opts.strictNumbers,Ss.DataType.Wrong)}`}return W.nil}function i(){if(s.validateSchema){const c=t.scopeValue("validate$data",{ref:s.validateSchema});return(0,W._)`!${c}(${r})`}return W.nil}}subschema(t,r){const n=(0,co.getSubschema)(this.it,t);(0,co.extendSubschemaData)(n,this.it,t),(0,co.extendSubschemaMode)(n,t);const s={...this.it,...n,items:void 0,props:void 0};return Lv(s,r),s}mergeEvaluated(t,r){const{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&t.props!==void 0&&(n.props=Tt.mergeEvaluated.props(s,t.props,n.props,r)),n.items!==!0&&t.items!==void 0&&(n.items=Tt.mergeEvaluated.items(s,t.items,n.items,r)))}mergeValidEvaluated(t,r){const{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(t,W.Name)),!0}}ht.KeywordCxt=hd;function md(e,t,r,n){const s=new hd(e,r,t);"code"in r?r.code(s,n):s.$data&&r.validate?(0,_n.funcKeywordCode)(s,r):"macro"in r?(0,_n.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,_n.funcKeywordCode)(s,r)}const Zv=/^\/(?:[^~]|~0|~1)*$/,Qv=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function pd(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let s,o;if(e==="")return te.default.rootData;if(e[0]==="/"){if(!Zv.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);s=e,o=te.default.rootData}else{const d=Qv.exec(e);if(!d)throw new Error(`Invalid JSON-pointer: ${e}`);const u=+d[1];if(s=d[2],s==="#"){if(u>=t)throw new Error(c("property/index",u));return n[t-u]}if(u>t)throw new Error(c("data",u));if(o=r[t-u],!s)return o}let a=o;const i=s.split("/");for(const d of i)d&&(o=(0,W._)`${o}${(0,W.getProperty)((0,Tt.unescapeJsonPointer)(d))}`,a=(0,W._)`${a} && ${o}`);return a;function c(d,u){return`Cannot access ${d} ${u} levels up, current level is ${t}`}}ht.getData=pd;var kn={};Object.defineProperty(kn,"__esModule",{value:!0});class e0 extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}kn.default=e0;var Xr={};Object.defineProperty(Xr,"__esModule",{value:!0});const lo=Ae;class t0 extends Error{constructor(t,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,lo.resolveUrl)(t,r,n),this.missingSchema=(0,lo.normalizeId)((0,lo.getFullPath)(t,this.missingRef))}}Xr.default=t0;var We={};Object.defineProperty(We,"__esModule",{value:!0});We.resolveSchema=We.getCompilingSchema=We.resolveRef=We.compileSchema=We.SchemaEnv=void 0;const st=ie,r0=kn,dr=St,dt=Ae,qc=D,n0=ht;class Us{constructor(t){var r;this.refs={},this.dynamicAnchors={};let n;typeof t.schema=="object"&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,dt.normalizeId)(n==null?void 0:n[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=n==null?void 0:n.$async,this.refs={}}}We.SchemaEnv=Us;function di(e){const t=yd.call(this,e);if(t)return t;const r=(0,dt.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:o}=this.opts,a=new st.CodeGen(this.scope,{es5:n,lines:s,ownProperties:o});let i;e.$async&&(i=a.scopeValue("Error",{ref:r0.default,code:(0,st._)`require("ajv/dist/runtime/validation_error").default`}));const c=a.scopeName("validate");e.validateName=c;const d={gen:a,allErrors:this.opts.allErrors,data:dr.default.data,parentData:dr.default.parentData,parentDataProperty:dr.default.parentDataProperty,dataNames:[dr.default.data],dataPathArr:[st.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:a.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,st.stringify)(e.schema)}:{ref:e.schema}),validateName:c,ValidationError:i,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:st.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,st._)`""`,opts:this.opts,self:this};let u;try{this._compilations.add(e),(0,n0.validateFunctionCode)(d),a.optimize(this.opts.code.optimize);const f=a.toString();u=`${a.scopeRefs(dr.default.scope)}return ${f}`,this.opts.code.process&&(u=this.opts.code.process(u,e));const y=new Function(`${dr.default.self}`,`${dr.default.scope}`,u)(this,this.scope.get());if(this.scope.value(c,{ref:y}),y.errors=null,y.schema=e.schema,y.schemaEnv=e,e.$async&&(y.$async=!0),this.opts.code.source===!0&&(y.source={validateName:c,validateCode:f,scopeValues:a._values}),this.opts.unevaluated){const{props:w,items:g}=d;y.evaluated={props:w instanceof st.Name?void 0:w,items:g instanceof st.Name?void 0:g,dynamicProps:w instanceof st.Name,dynamicItems:g instanceof st.Name},y.source&&(y.source.evaluated=(0,st.stringify)(y.evaluated))}return e.validate=y,e}catch(f){throw delete e.validate,delete e.validateName,u&&this.logger.error("Error compiling schema, function code:",u),f}finally{this._compilations.delete(e)}}We.compileSchema=di;function s0(e,t,r){var n;r=(0,dt.resolveUrl)(this.opts.uriResolver,t,r);const s=e.refs[r];if(s)return s;let o=i0.call(this,e,r);if(o===void 0){const a=(n=e.localRefs)===null||n===void 0?void 0:n[r],{schemaId:i}=this.opts;a&&(o=new Us({schema:a,schemaId:i,root:e,baseId:t}))}if(o!==void 0)return e.refs[r]=o0.call(this,o)}We.resolveRef=s0;function o0(e){return(0,dt.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:di.call(this,e)}function yd(e){for(const t of this._compilations)if(a0(t,e))return t}We.getCompilingSchema=yd;function a0(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function i0(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||qs.call(this,e,t)}function qs(e,t){const r=this.opts.uriResolver.parse(t),n=(0,dt._getFullPath)(this.opts.uriResolver,r);let s=(0,dt.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===s)return uo.call(this,r,e);const o=(0,dt.normalizeId)(n),a=this.refs[o]||this.schemas[o];if(typeof a=="string"){const i=qs.call(this,e,a);return typeof(i==null?void 0:i.schema)!="object"?void 0:uo.call(this,r,i)}if(typeof(a==null?void 0:a.schema)=="object"){if(a.validate||di.call(this,a),o===(0,dt.normalizeId)(t)){const{schema:i}=a,{schemaId:c}=this.opts,d=i[c];return d&&(s=(0,dt.resolveUrl)(this.opts.uriResolver,s,d)),new Us({schema:i,schemaId:c,root:e,baseId:s})}return uo.call(this,r,a)}}We.resolveSchema=qs;const c0=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function uo(e,{baseId:t,schema:r,root:n}){var s;if(((s=e.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(const i of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const c=r[(0,qc.unescapeFragment)(i)];if(c===void 0)return;r=c;const d=typeof r=="object"&&r[this.opts.schemaId];!c0.has(i)&&d&&(t=(0,dt.resolveUrl)(this.opts.uriResolver,t,d))}let o;if(typeof r!="boolean"&&r.$ref&&!(0,qc.schemaHasRulesButRef)(r,this.RULES)){const i=(0,dt.resolveUrl)(this.opts.uriResolver,t,r.$ref);o=qs.call(this,n,i)}const{schemaId:a}=this.opts;if(o=o||new Us({schema:r,schemaId:a,root:n,baseId:t}),o.schema!==o.root.schema)return o}const l0="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",u0="Meta-schema for $data reference (JSON AnySchema extension proposal)",d0="object",f0=["$data"],h0={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},m0=!1,p0={$id:l0,description:u0,type:d0,required:f0,properties:h0,additionalProperties:m0};var fi={};Object.defineProperty(fi,"__esModule",{value:!0});const $d=Nu;$d.code='require("ajv/dist/runtime/uri").default';fi.default=$d;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=ht;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=ie;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=kn,s=Xr,o=Sr,a=We,i=ie,c=Ae,d=Ne,u=D,f=p0,v=fi,y=(P,p)=>new RegExp(P,p);y.code="new RegExp";const w=["removeAdditional","useDefaults","coerceTypes"],g=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),$={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},m={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},E=200;function N(P){var p,S,_,l,h,b,I,j,G,U,ue,xe,Yt,Jt,Xt,Zt,Qt,er,tr,rr,nr,sr,or,ar,ir;const rt=P.strict,cr=(p=P.code)===null||p===void 0?void 0:p.optimize,tn=cr===!0||cr===void 0?1:cr||0,rn=(_=(S=P.code)===null||S===void 0?void 0:S.regExp)!==null&&_!==void 0?_:y,Xs=(l=P.uriResolver)!==null&&l!==void 0?l:v.default;return{strictSchema:(b=(h=P.strictSchema)!==null&&h!==void 0?h:rt)!==null&&b!==void 0?b:!0,strictNumbers:(j=(I=P.strictNumbers)!==null&&I!==void 0?I:rt)!==null&&j!==void 0?j:!0,strictTypes:(U=(G=P.strictTypes)!==null&&G!==void 0?G:rt)!==null&&U!==void 0?U:"log",strictTuples:(xe=(ue=P.strictTuples)!==null&&ue!==void 0?ue:rt)!==null&&xe!==void 0?xe:"log",strictRequired:(Jt=(Yt=P.strictRequired)!==null&&Yt!==void 0?Yt:rt)!==null&&Jt!==void 0?Jt:!1,code:P.code?{...P.code,optimize:tn,regExp:rn}:{optimize:tn,regExp:rn},loopRequired:(Xt=P.loopRequired)!==null&&Xt!==void 0?Xt:E,loopEnum:(Zt=P.loopEnum)!==null&&Zt!==void 0?Zt:E,meta:(Qt=P.meta)!==null&&Qt!==void 0?Qt:!0,messages:(er=P.messages)!==null&&er!==void 0?er:!0,inlineRefs:(tr=P.inlineRefs)!==null&&tr!==void 0?tr:!0,schemaId:(rr=P.schemaId)!==null&&rr!==void 0?rr:"$id",addUsedSchema:(nr=P.addUsedSchema)!==null&&nr!==void 0?nr:!0,validateSchema:(sr=P.validateSchema)!==null&&sr!==void 0?sr:!0,validateFormats:(or=P.validateFormats)!==null&&or!==void 0?or:!0,unicodeRegExp:(ar=P.unicodeRegExp)!==null&&ar!==void 0?ar:!0,int32range:(ir=P.int32range)!==null&&ir!==void 0?ir:!0,uriResolver:Xs}}class R{constructor(p={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,p=this.opts={...p,...N(p)};const{es5:S,lines:_}=this.opts.code;this.scope=new i.ValueScope({scope:{},prefixes:g,es5:S,lines:_}),this.logger=Y(p.logger);const l=p.validateFormats;p.validateFormats=!1,this.RULES=(0,o.getRules)(),O.call(this,$,p,"NOT SUPPORTED"),O.call(this,m,p,"DEPRECATED","warn"),this._metaOpts=Se.call(this),p.formats&&ge.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),p.keywords&&we.call(this,p.keywords),typeof p.meta=="object"&&this.addMetaSchema(p.meta),re.call(this),p.validateFormats=l}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:p,meta:S,schemaId:_}=this.opts;let l=f;_==="id"&&(l={...f},l.id=l.$id,delete l.$id),S&&p&&this.addMetaSchema(l,l[_],!1)}defaultMeta(){const{meta:p,schemaId:S}=this.opts;return this.opts.defaultMeta=typeof p=="object"?p[S]||p:void 0}validate(p,S){let _;if(typeof p=="string"){if(_=this.getSchema(p),!_)throw new Error(`no schema with key or ref "${p}"`)}else _=this.compile(p);const l=_(S);return"$async"in _||(this.errors=_.errors),l}compile(p,S){const _=this._addSchema(p,S);return _.validate||this._compileSchemaEnv(_)}compileAsync(p,S){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:_}=this.opts;return l.call(this,p,S);async function l(U,ue){await h.call(this,U.$schema);const xe=this._addSchema(U,ue);return xe.validate||b.call(this,xe)}async function h(U){U&&!this.getSchema(U)&&await l.call(this,{$ref:U},!0)}async function b(U){try{return this._compileSchemaEnv(U)}catch(ue){if(!(ue instanceof s.default))throw ue;return I.call(this,ue),await j.call(this,ue.missingSchema),b.call(this,U)}}function I({missingSchema:U,missingRef:ue}){if(this.refs[U])throw new Error(`AnySchema ${U} is loaded but ${ue} cannot be resolved`)}async function j(U){const ue=await G.call(this,U);this.refs[U]||await h.call(this,ue.$schema),this.refs[U]||this.addSchema(ue,U,S)}async function G(U){const ue=this._loading[U];if(ue)return ue;try{return await(this._loading[U]=_(U))}finally{delete this._loading[U]}}}addSchema(p,S,_,l=this.opts.validateSchema){if(Array.isArray(p)){for(const b of p)this.addSchema(b,void 0,_,l);return this}let h;if(typeof p=="object"){const{schemaId:b}=this.opts;if(h=p[b],h!==void 0&&typeof h!="string")throw new Error(`schema ${b} must be string`)}return S=(0,c.normalizeId)(S||h),this._checkUnique(S),this.schemas[S]=this._addSchema(p,_,S,l,!0),this}addMetaSchema(p,S,_=this.opts.validateSchema){return this.addSchema(p,S,!0,_),this}validateSchema(p,S){if(typeof p=="boolean")return!0;let _;if(_=p.$schema,_!==void 0&&typeof _!="string")throw new Error("$schema must be a string");if(_=_||this.opts.defaultMeta||this.defaultMeta(),!_)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const l=this.validate(_,p);if(!l&&S){const h="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(h);else throw new Error(h)}return l}getSchema(p){let S;for(;typeof(S=x.call(this,p))=="string";)p=S;if(S===void 0){const{schemaId:_}=this.opts,l=new a.SchemaEnv({schema:{},schemaId:_});if(S=a.resolveSchema.call(this,l,p),!S)return;this.refs[p]=S}return S.validate||this._compileSchemaEnv(S)}removeSchema(p){if(p instanceof RegExp)return this._removeAllSchemas(this.schemas,p),this._removeAllSchemas(this.refs,p),this;switch(typeof p){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const S=x.call(this,p);return typeof S=="object"&&this._cache.delete(S.schema),delete this.schemas[p],delete this.refs[p],this}case"object":{const S=p;this._cache.delete(S);let _=p[this.opts.schemaId];return _&&(_=(0,c.normalizeId)(_),delete this.schemas[_],delete this.refs[_]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(p){for(const S of p)this.addKeyword(S);return this}addKeyword(p,S){let _;if(typeof p=="string")_=p,typeof S=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),S.keyword=_);else if(typeof p=="object"&&S===void 0){if(S=p,_=S.keyword,Array.isArray(_)&&!_.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(T.call(this,_,S),!S)return(0,u.eachItem)(_,h=>A.call(this,h)),this;F.call(this,S);const l={...S,type:(0,d.getJSONTypes)(S.type),schemaType:(0,d.getJSONTypes)(S.schemaType)};return(0,u.eachItem)(_,l.type.length===0?h=>A.call(this,h,l):h=>l.type.forEach(b=>A.call(this,h,l,b))),this}getKeyword(p){const S=this.RULES.all[p];return typeof S=="object"?S.definition:!!S}removeKeyword(p){const{RULES:S}=this;delete S.keywords[p],delete S.all[p];for(const _ of S.rules){const l=_.rules.findIndex(h=>h.keyword===p);l>=0&&_.rules.splice(l,1)}return this}addFormat(p,S){return typeof S=="string"&&(S=new RegExp(S)),this.formats[p]=S,this}errorsText(p=this.errors,{separator:S=", ",dataVar:_="data"}={}){return!p||p.length===0?"No errors":p.map(l=>`${_}${l.instancePath} ${l.message}`).reduce((l,h)=>l+S+h)}$dataMetaSchema(p,S){const _=this.RULES.all;p=JSON.parse(JSON.stringify(p));for(const l of S){const h=l.split("/").slice(1);let b=p;for(const I of h)b=b[I];for(const I in _){const j=_[I];if(typeof j!="object")continue;const{$data:G}=j.definition,U=b[I];G&&U&&(b[I]=L(U))}}return p}_removeAllSchemas(p,S){for(const _ in p){const l=p[_];(!S||S.test(_))&&(typeof l=="string"?delete p[_]:l&&!l.meta&&(this._cache.delete(l.schema),delete p[_]))}}_addSchema(p,S,_,l=this.opts.validateSchema,h=this.opts.addUsedSchema){let b;const{schemaId:I}=this.opts;if(typeof p=="object")b=p[I];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof p!="boolean")throw new Error("schema must be object or boolean")}let j=this._cache.get(p);if(j!==void 0)return j;_=(0,c.normalizeId)(b||_);const G=c.getSchemaRefs.call(this,p,_);return j=new a.SchemaEnv({schema:p,schemaId:I,meta:S,baseId:_,localRefs:G}),this._cache.set(j.schema,j),h&&!_.startsWith("#")&&(_&&this._checkUnique(_),this.refs[_]=j),l&&this.validateSchema(p,!0),j}_checkUnique(p){if(this.schemas[p]||this.refs[p])throw new Error(`schema with key or id "${p}" already exists`)}_compileSchemaEnv(p){if(p.meta?this._compileMetaSchema(p):a.compileSchema.call(this,p),!p.validate)throw new Error("ajv implementation error");return p.validate}_compileMetaSchema(p){const S=this.opts;this.opts=this._metaOpts;try{a.compileSchema.call(this,p)}finally{this.opts=S}}}R.ValidationError=n.default,R.MissingRefError=s.default,e.default=R;function O(P,p,S,_="error"){for(const l in P){const h=l;h in p&&this.logger[_](`${S}: option ${l}. ${P[h]}`)}}function x(P){return P=(0,c.normalizeId)(P),this.schemas[P]||this.refs[P]}function re(){const P=this.opts.schemas;if(P)if(Array.isArray(P))this.addSchema(P);else for(const p in P)this.addSchema(P[p],p)}function ge(){for(const P in this.opts.formats){const p=this.opts.formats[P];p&&this.addFormat(P,p)}}function we(P){if(Array.isArray(P)){this.addVocabulary(P);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const p in P){const S=P[p];S.keyword||(S.keyword=p),this.addKeyword(S)}}function Se(){const P={...this.opts};for(const p of w)delete P[p];return P}const K={log(){},warn(){},error(){}};function Y(P){if(P===!1)return K;if(P===void 0)return console;if(P.log&&P.warn&&P.error)return P;throw new Error("logger must implement log, warn and error methods")}const fe=/^[a-z_$][a-z0-9_$:-]*$/i;function T(P,p){const{RULES:S}=this;if((0,u.eachItem)(P,_=>{if(S.keywords[_])throw new Error(`Keyword ${_} is already defined`);if(!fe.test(_))throw new Error(`Keyword ${_} has invalid name`)}),!!p&&p.$data&&!("code"in p||"validate"in p))throw new Error('$data keyword must have "code" or "validate" function')}function A(P,p,S){var _;const l=p==null?void 0:p.post;if(S&&l)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:h}=this;let b=l?h.post:h.rules.find(({type:j})=>j===S);if(b||(b={type:S,rules:[]},h.rules.push(b)),h.keywords[P]=!0,!p)return;const I={keyword:P,definition:{...p,type:(0,d.getJSONTypes)(p.type),schemaType:(0,d.getJSONTypes)(p.schemaType)}};p.before?V.call(this,b,I,p.before):b.rules.push(I),h.all[P]=I,(_=p.implements)===null||_===void 0||_.forEach(j=>this.addKeyword(j))}function V(P,p,S){const _=P.rules.findIndex(l=>l.keyword===S);_>=0?P.rules.splice(_,0,p):(P.rules.push(p),this.logger.warn(`rule ${S} is not defined`))}function F(P){let{metaSchema:p}=P;p!==void 0&&(P.$data&&this.opts.$data&&(p=L(p)),P.validateSchema=this.compile(p,!0))}const B={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function L(P){return{anyOf:[P,B]}}})(zu);var hi={},mi={},pi={};Object.defineProperty(pi,"__esModule",{value:!0});const y0={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};pi.default=y0;var Pr={};Object.defineProperty(Pr,"__esModule",{value:!0});Pr.callRef=Pr.getValidate=void 0;const $0=Xr,Gc=le,Ke=ie,Tr=St,Kc=We,Kn=D,g0={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:n}=e,{baseId:s,schemaEnv:o,validateName:a,opts:i,self:c}=n,{root:d}=o;if((r==="#"||r==="#/")&&s===d.baseId)return f();const u=Kc.resolveRef.call(c,d,s,r);if(u===void 0)throw new $0.default(n.opts.uriResolver,s,r);if(u instanceof Kc.SchemaEnv)return v(u);return y(u);function f(){if(o===d)return ds(e,a,o,o.$async);const w=t.scopeValue("root",{ref:d});return ds(e,(0,Ke._)`${w}.validate`,d,d.$async)}function v(w){const g=gd(e,w);ds(e,g,w,w.$async)}function y(w){const g=t.scopeValue("schema",i.code.source===!0?{ref:w,code:(0,Ke.stringify)(w)}:{ref:w}),$=t.name("valid"),m=e.subschema({schema:w,dataTypes:[],schemaPath:Ke.nil,topSchemaRef:g,errSchemaPath:r},$);e.mergeEvaluated(m),e.ok($)}}};function gd(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,Ke._)`${r.scopeValue("wrapper",{ref:t})}.validate`}Pr.getValidate=gd;function ds(e,t,r,n){const{gen:s,it:o}=e,{allErrors:a,schemaEnv:i,opts:c}=o,d=c.passContext?Tr.default.this:Ke.nil;n?u():f();function u(){if(!i.$async)throw new Error("async schema referenced by sync schema");const w=s.let("valid");s.try(()=>{s.code((0,Ke._)`await ${(0,Gc.callValidateCode)(e,t,d)}`),y(t),a||s.assign(w,!0)},g=>{s.if((0,Ke._)`!(${g} instanceof ${o.ValidationError})`,()=>s.throw(g)),v(g),a||s.assign(w,!1)}),e.ok(w)}function f(){e.result((0,Gc.callValidateCode)(e,t,d),()=>y(t),()=>v(t))}function v(w){const g=(0,Ke._)`${w}.errors`;s.assign(Tr.default.vErrors,(0,Ke._)`${Tr.default.vErrors} === null ? ${g} : ${Tr.default.vErrors}.concat(${g})`),s.assign(Tr.default.errors,(0,Ke._)`${Tr.default.vErrors}.length`)}function y(w){var g;if(!o.opts.unevaluated)return;const $=(g=r==null?void 0:r.validate)===null||g===void 0?void 0:g.evaluated;if(o.props!==!0)if($&&!$.dynamicProps)$.props!==void 0&&(o.props=Kn.mergeEvaluated.props(s,$.props,o.props));else{const m=s.var("props",(0,Ke._)`${w}.evaluated.props`);o.props=Kn.mergeEvaluated.props(s,m,o.props,Ke.Name)}if(o.items!==!0)if($&&!$.dynamicItems)$.items!==void 0&&(o.items=Kn.mergeEvaluated.items(s,$.items,o.items));else{const m=s.var("items",(0,Ke._)`${w}.evaluated.items`);o.items=Kn.mergeEvaluated.items(s,m,o.items,Ke.Name)}}}Pr.callRef=ds;Pr.default=g0;Object.defineProperty(mi,"__esModule",{value:!0});const _0=pi,v0=Pr,w0=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",_0.default,v0.default];mi.default=w0;var yi={},$i={};Object.defineProperty($i,"__esModule",{value:!0});const Ps=ie,zt=Ps.operators,Ns={maximum:{okStr:"<=",ok:zt.LTE,fail:zt.GT},minimum:{okStr:">=",ok:zt.GTE,fail:zt.LT},exclusiveMaximum:{okStr:"<",ok:zt.LT,fail:zt.GTE},exclusiveMinimum:{okStr:">",ok:zt.GT,fail:zt.LTE}},E0={message:({keyword:e,schemaCode:t})=>(0,Ps.str)`must be ${Ns[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,Ps._)`{comparison: ${Ns[e].okStr}, limit: ${t}}`},b0={keyword:Object.keys(Ns),type:"number",schemaType:"number",$data:!0,error:E0,code(e){const{keyword:t,data:r,schemaCode:n}=e;e.fail$data((0,Ps._)`${r} ${Ns[t].fail} ${n} || isNaN(${r})`)}};$i.default=b0;var gi={};Object.defineProperty(gi,"__esModule",{value:!0});const vn=ie,S0={message:({schemaCode:e})=>(0,vn.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,vn._)`{multipleOf: ${e}}`},P0={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:S0,code(e){const{gen:t,data:r,schemaCode:n,it:s}=e,o=s.opts.multipleOfPrecision,a=t.let("res"),i=o?(0,vn._)`Math.abs(Math.round(${a}) - ${a}) > 1e-${o}`:(0,vn._)`${a} !== parseInt(${a})`;e.fail$data((0,vn._)`(${n} === 0 || (${a} = ${r}/${n}, ${i}))`)}};gi.default=P0;var _i={},vi={};Object.defineProperty(vi,"__esModule",{value:!0});function _d(e){const t=e.length;let r=0,n=0,s;for(;n<t;)r++,s=e.charCodeAt(n++),s>=55296&&s<=56319&&n<t&&(s=e.charCodeAt(n),(s&64512)===56320&&n++);return r}vi.default=_d;_d.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(_i,"__esModule",{value:!0});const $r=ie,N0=D,R0=vi,O0={message({keyword:e,schemaCode:t}){const r=e==="maxLength"?"more":"fewer";return(0,$r.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,$r._)`{limit: ${e}}`},I0={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:O0,code(e){const{keyword:t,data:r,schemaCode:n,it:s}=e,o=t==="maxLength"?$r.operators.GT:$r.operators.LT,a=s.opts.unicode===!1?(0,$r._)`${r}.length`:(0,$r._)`${(0,N0.useFunc)(e.gen,R0.default)}(${r})`;e.fail$data((0,$r._)`${a} ${o} ${n}`)}};_i.default=I0;var wi={};Object.defineProperty(wi,"__esModule",{value:!0});const T0=le,Rs=ie,j0={message:({schemaCode:e})=>(0,Rs.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,Rs._)`{pattern: ${e}}`},A0={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:j0,code(e){const{data:t,$data:r,schema:n,schemaCode:s,it:o}=e,a=o.opts.unicodeRegExp?"u":"",i=r?(0,Rs._)`(new RegExp(${s}, ${a}))`:(0,T0.usePattern)(e,n);e.fail$data((0,Rs._)`!${i}.test(${t})`)}};wi.default=A0;var Ei={};Object.defineProperty(Ei,"__esModule",{value:!0});const wn=ie,k0={message({keyword:e,schemaCode:t}){const r=e==="maxProperties"?"more":"fewer";return(0,wn.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,wn._)`{limit: ${e}}`},C0={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:k0,code(e){const{keyword:t,data:r,schemaCode:n}=e,s=t==="maxProperties"?wn.operators.GT:wn.operators.LT;e.fail$data((0,wn._)`Object.keys(${r}).length ${s} ${n}`)}};Ei.default=C0;var bi={};Object.defineProperty(bi,"__esModule",{value:!0});const cn=le,En=ie,M0=D,D0={message:({params:{missingProperty:e}})=>(0,En.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,En._)`{missingProperty: ${e}}`},F0={keyword:"required",type:"object",schemaType:"array",$data:!0,error:D0,code(e){const{gen:t,schema:r,schemaCode:n,data:s,$data:o,it:a}=e,{opts:i}=a;if(!o&&r.length===0)return;const c=r.length>=i.loopRequired;if(a.allErrors?d():u(),i.strictRequired){const y=e.parentSchema.properties,{definedProperties:w}=e.it;for(const g of r)if((y==null?void 0:y[g])===void 0&&!w.has(g)){const $=a.schemaEnv.baseId+a.errSchemaPath,m=`required property "${g}" is not defined at "${$}" (strictRequired)`;(0,M0.checkStrictMode)(a,m,a.opts.strictRequired)}}function d(){if(c||o)e.block$data(En.nil,f);else for(const y of r)(0,cn.checkReportMissingProp)(e,y)}function u(){const y=t.let("missing");if(c||o){const w=t.let("valid",!0);e.block$data(w,()=>v(y,w)),e.ok(w)}else t.if((0,cn.checkMissingProp)(e,r,y)),(0,cn.reportMissingProp)(e,y),t.else()}function f(){t.forOf("prop",n,y=>{e.setParams({missingProperty:y}),t.if((0,cn.noPropertyInData)(t,s,y,i.ownProperties),()=>e.error())})}function v(y,w){e.setParams({missingProperty:y}),t.forOf(y,n,()=>{t.assign(w,(0,cn.propertyInData)(t,s,y,i.ownProperties)),t.if((0,En.not)(w),()=>{e.error(),t.break()})},En.nil)}}};bi.default=F0;var Si={};Object.defineProperty(Si,"__esModule",{value:!0});const bn=ie,L0={message({keyword:e,schemaCode:t}){const r=e==="maxItems"?"more":"fewer";return(0,bn.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,bn._)`{limit: ${e}}`},z0={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:L0,code(e){const{keyword:t,data:r,schemaCode:n}=e,s=t==="maxItems"?bn.operators.GT:bn.operators.LT;e.fail$data((0,bn._)`${r}.length ${s} ${n}`)}};Si.default=z0;var Pi={},Cn={};Object.defineProperty(Cn,"__esModule",{value:!0});const vd=ks;vd.code='require("ajv/dist/runtime/equal").default';Cn.default=vd;Object.defineProperty(Pi,"__esModule",{value:!0});const fo=Ne,Te=ie,V0=D,U0=Cn,q0={message:({params:{i:e,j:t}})=>(0,Te.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,Te._)`{i: ${e}, j: ${t}}`},G0={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:q0,code(e){const{gen:t,data:r,$data:n,schema:s,parentSchema:o,schemaCode:a,it:i}=e;if(!n&&!s)return;const c=t.let("valid"),d=o.items?(0,fo.getSchemaTypes)(o.items):[];e.block$data(c,u,(0,Te._)`${a} === false`),e.ok(c);function u(){const w=t.let("i",(0,Te._)`${r}.length`),g=t.let("j");e.setParams({i:w,j:g}),t.assign(c,!0),t.if((0,Te._)`${w} > 1`,()=>(f()?v:y)(w,g))}function f(){return d.length>0&&!d.some(w=>w==="object"||w==="array")}function v(w,g){const $=t.name("item"),m=(0,fo.checkDataTypes)(d,$,i.opts.strictNumbers,fo.DataType.Wrong),E=t.const("indices",(0,Te._)`{}`);t.for((0,Te._)`;${w}--;`,()=>{t.let($,(0,Te._)`${r}[${w}]`),t.if(m,(0,Te._)`continue`),d.length>1&&t.if((0,Te._)`typeof ${$} == "string"`,(0,Te._)`${$} += "_"`),t.if((0,Te._)`typeof ${E}[${$}] == "number"`,()=>{t.assign(g,(0,Te._)`${E}[${$}]`),e.error(),t.assign(c,!1).break()}).code((0,Te._)`${E}[${$}] = ${w}`)})}function y(w,g){const $=(0,V0.useFunc)(t,U0.default),m=t.name("outer");t.label(m).for((0,Te._)`;${w}--;`,()=>t.for((0,Te._)`${g} = ${w}; ${g}--;`,()=>t.if((0,Te._)`${$}(${r}[${w}], ${r}[${g}])`,()=>{e.error(),t.assign(c,!1).break(m)})))}}};Pi.default=G0;var Ni={};Object.defineProperty(Ni,"__esModule",{value:!0});const Uo=ie,K0=D,H0=Cn,W0={message:"must be equal to constant",params:({schemaCode:e})=>(0,Uo._)`{allowedValue: ${e}}`},x0={keyword:"const",$data:!0,error:W0,code(e){const{gen:t,data:r,$data:n,schemaCode:s,schema:o}=e;n||o&&typeof o=="object"?e.fail$data((0,Uo._)`!${(0,K0.useFunc)(t,H0.default)}(${r}, ${s})`):e.fail((0,Uo._)`${o} !== ${r}`)}};Ni.default=x0;var Ri={};Object.defineProperty(Ri,"__esModule",{value:!0});const hn=ie,B0=D,Y0=Cn,J0={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,hn._)`{allowedValues: ${e}}`},X0={keyword:"enum",schemaType:"array",$data:!0,error:J0,code(e){const{gen:t,data:r,$data:n,schema:s,schemaCode:o,it:a}=e;if(!n&&s.length===0)throw new Error("enum must have non-empty array");const i=s.length>=a.opts.loopEnum;let c;const d=()=>c??(c=(0,B0.useFunc)(t,Y0.default));let u;if(i||n)u=t.let("valid"),e.block$data(u,f);else{if(!Array.isArray(s))throw new Error("ajv implementation error");const y=t.const("vSchema",o);u=(0,hn.or)(...s.map((w,g)=>v(y,g)))}e.pass(u);function f(){t.assign(u,!1),t.forOf("v",o,y=>t.if((0,hn._)`${d()}(${r}, ${y})`,()=>t.assign(u,!0).break()))}function v(y,w){const g=s[w];return typeof g=="object"&&g!==null?(0,hn._)`${d()}(${r}, ${y}[${w}])`:(0,hn._)`${r} === ${g}`}}};Ri.default=X0;Object.defineProperty(yi,"__esModule",{value:!0});const Z0=$i,Q0=gi,ew=_i,tw=wi,rw=Ei,nw=bi,sw=Si,ow=Pi,aw=Ni,iw=Ri,cw=[Z0.default,Q0.default,ew.default,tw.default,rw.default,nw.default,sw.default,ow.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},aw.default,iw.default];yi.default=cw;var Oi={},Zr={};Object.defineProperty(Zr,"__esModule",{value:!0});Zr.validateAdditionalItems=void 0;const gr=ie,qo=D,lw={message:({params:{len:e}})=>(0,gr.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,gr._)`{limit: ${e}}`},uw={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:lw,code(e){const{parentSchema:t,it:r}=e,{items:n}=t;if(!Array.isArray(n)){(0,qo.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}wd(e,n)}};function wd(e,t){const{gen:r,schema:n,data:s,keyword:o,it:a}=e;a.items=!0;const i=r.const("len",(0,gr._)`${s}.length`);if(n===!1)e.setParams({len:t.length}),e.pass((0,gr._)`${i} <= ${t.length}`);else if(typeof n=="object"&&!(0,qo.alwaysValidSchema)(a,n)){const d=r.var("valid",(0,gr._)`${i} <= ${t.length}`);r.if((0,gr.not)(d),()=>c(d)),e.ok(d)}function c(d){r.forRange("i",t.length,i,u=>{e.subschema({keyword:o,dataProp:u,dataPropType:qo.Type.Num},d),a.allErrors||r.if((0,gr.not)(d),()=>r.break())})}}Zr.validateAdditionalItems=wd;Zr.default=uw;var Ii={},Qr={};Object.defineProperty(Qr,"__esModule",{value:!0});Qr.validateTuple=void 0;const Hc=ie,fs=D,dw=le,fw={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return Ed(e,"additionalItems",t);r.items=!0,!(0,fs.alwaysValidSchema)(r,t)&&e.ok((0,dw.validateArray)(e))}};function Ed(e,t,r=e.schema){const{gen:n,parentSchema:s,data:o,keyword:a,it:i}=e;u(s),i.opts.unevaluated&&r.length&&i.items!==!0&&(i.items=fs.mergeEvaluated.items(n,r.length,i.items));const c=n.name("valid"),d=n.const("len",(0,Hc._)`${o}.length`);r.forEach((f,v)=>{(0,fs.alwaysValidSchema)(i,f)||(n.if((0,Hc._)`${d} > ${v}`,()=>e.subschema({keyword:a,schemaProp:v,dataProp:v},c)),e.ok(c))});function u(f){const{opts:v,errSchemaPath:y}=i,w=r.length,g=w===f.minItems&&(w===f.maxItems||f[t]===!1);if(v.strictTuples&&!g){const $=`"${a}" is ${w}-tuple, but minItems or maxItems/${t} are not specified or different at path "${y}"`;(0,fs.checkStrictMode)(i,$,v.strictTuples)}}}Qr.validateTuple=Ed;Qr.default=fw;Object.defineProperty(Ii,"__esModule",{value:!0});const hw=Qr,mw={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,hw.validateTuple)(e,"items")};Ii.default=mw;var Ti={};Object.defineProperty(Ti,"__esModule",{value:!0});const Wc=ie,pw=D,yw=le,$w=Zr,gw={message:({params:{len:e}})=>(0,Wc.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Wc._)`{limit: ${e}}`},_w={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:gw,code(e){const{schema:t,parentSchema:r,it:n}=e,{prefixItems:s}=r;n.items=!0,!(0,pw.alwaysValidSchema)(n,t)&&(s?(0,$w.validateAdditionalItems)(e,s):e.ok((0,yw.validateArray)(e)))}};Ti.default=_w;var ji={};Object.defineProperty(ji,"__esModule",{value:!0});const tt=ie,Hn=D,vw={message:({params:{min:e,max:t}})=>t===void 0?(0,tt.str)`must contain at least ${e} valid item(s)`:(0,tt.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,tt._)`{minContains: ${e}}`:(0,tt._)`{minContains: ${e}, maxContains: ${t}}`},ww={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:vw,code(e){const{gen:t,schema:r,parentSchema:n,data:s,it:o}=e;let a,i;const{minContains:c,maxContains:d}=n;o.opts.next?(a=c===void 0?1:c,i=d):a=1;const u=t.const("len",(0,tt._)`${s}.length`);if(e.setParams({min:a,max:i}),i===void 0&&a===0){(0,Hn.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(i!==void 0&&a>i){(0,Hn.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,Hn.alwaysValidSchema)(o,r)){let g=(0,tt._)`${u} >= ${a}`;i!==void 0&&(g=(0,tt._)`${g} && ${u} <= ${i}`),e.pass(g);return}o.items=!0;const f=t.name("valid");i===void 0&&a===1?y(f,()=>t.if(f,()=>t.break())):a===0?(t.let(f,!0),i!==void 0&&t.if((0,tt._)`${s}.length > 0`,v)):(t.let(f,!1),v()),e.result(f,()=>e.reset());function v(){const g=t.name("_valid"),$=t.let("count",0);y(g,()=>t.if(g,()=>w($)))}function y(g,$){t.forRange("i",0,u,m=>{e.subschema({keyword:"contains",dataProp:m,dataPropType:Hn.Type.Num,compositeRule:!0},g),$()})}function w(g){t.code((0,tt._)`${g}++`),i===void 0?t.if((0,tt._)`${g} >= ${a}`,()=>t.assign(f,!0).break()):(t.if((0,tt._)`${g} > ${i}`,()=>t.assign(f,!1).break()),a===1?t.assign(f,!0):t.if((0,tt._)`${g} >= ${a}`,()=>t.assign(f,!0)))}}};ji.default=ww;var bd={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=ie,r=D,n=le;e.error={message:({params:{property:c,depsCount:d,deps:u}})=>{const f=d===1?"property":"properties";return(0,t.str)`must have ${f} ${u} when property ${c} is present`},params:({params:{property:c,depsCount:d,deps:u,missingProperty:f}})=>(0,t._)`{property: ${c},
    missingProperty: ${f},
    depsCount: ${d},
    deps: ${u}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(c){const[d,u]=o(c);a(c,d),i(c,u)}};function o({schema:c}){const d={},u={};for(const f in c){if(f==="__proto__")continue;const v=Array.isArray(c[f])?d:u;v[f]=c[f]}return[d,u]}function a(c,d=c.schema){const{gen:u,data:f,it:v}=c;if(Object.keys(d).length===0)return;const y=u.let("missing");for(const w in d){const g=d[w];if(g.length===0)continue;const $=(0,n.propertyInData)(u,f,w,v.opts.ownProperties);c.setParams({property:w,depsCount:g.length,deps:g.join(", ")}),v.allErrors?u.if($,()=>{for(const m of g)(0,n.checkReportMissingProp)(c,m)}):(u.if((0,t._)`${$} && (${(0,n.checkMissingProp)(c,g,y)})`),(0,n.reportMissingProp)(c,y),u.else())}}e.validatePropertyDeps=a;function i(c,d=c.schema){const{gen:u,data:f,keyword:v,it:y}=c,w=u.name("valid");for(const g in d)(0,r.alwaysValidSchema)(y,d[g])||(u.if((0,n.propertyInData)(u,f,g,y.opts.ownProperties),()=>{const $=c.subschema({keyword:v,schemaProp:g},w);c.mergeValidEvaluated($,w)},()=>u.var(w,!0)),c.ok(w))}e.validateSchemaDeps=i,e.default=s})(bd);var Ai={};Object.defineProperty(Ai,"__esModule",{value:!0});const Sd=ie,Ew=D,bw={message:"property name must be valid",params:({params:e})=>(0,Sd._)`{propertyName: ${e.propertyName}}`},Sw={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:bw,code(e){const{gen:t,schema:r,data:n,it:s}=e;if((0,Ew.alwaysValidSchema)(s,r))return;const o=t.name("valid");t.forIn("key",n,a=>{e.setParams({propertyName:a}),e.subschema({keyword:"propertyNames",data:a,dataTypes:["string"],propertyName:a,compositeRule:!0},o),t.if((0,Sd.not)(o),()=>{e.error(!0),s.allErrors||t.break()})}),e.ok(o)}};Ai.default=Sw;var Gs={};Object.defineProperty(Gs,"__esModule",{value:!0});const Wn=le,at=ie,Pw=St,xn=D,Nw={message:"must NOT have additional properties",params:({params:e})=>(0,at._)`{additionalProperty: ${e.additionalProperty}}`},Rw={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Nw,code(e){const{gen:t,schema:r,parentSchema:n,data:s,errsCount:o,it:a}=e;if(!o)throw new Error("ajv implementation error");const{allErrors:i,opts:c}=a;if(a.props=!0,c.removeAdditional!=="all"&&(0,xn.alwaysValidSchema)(a,r))return;const d=(0,Wn.allSchemaProperties)(n.properties),u=(0,Wn.allSchemaProperties)(n.patternProperties);f(),e.ok((0,at._)`${o} === ${Pw.default.errors}`);function f(){t.forIn("key",s,$=>{!d.length&&!u.length?w($):t.if(v($),()=>w($))})}function v($){let m;if(d.length>8){const E=(0,xn.schemaRefOrVal)(a,n.properties,"properties");m=(0,Wn.isOwnProperty)(t,E,$)}else d.length?m=(0,at.or)(...d.map(E=>(0,at._)`${$} === ${E}`)):m=at.nil;return u.length&&(m=(0,at.or)(m,...u.map(E=>(0,at._)`${(0,Wn.usePattern)(e,E)}.test(${$})`))),(0,at.not)(m)}function y($){t.code((0,at._)`delete ${s}[${$}]`)}function w($){if(c.removeAdditional==="all"||c.removeAdditional&&r===!1){y($);return}if(r===!1){e.setParams({additionalProperty:$}),e.error(),i||t.break();return}if(typeof r=="object"&&!(0,xn.alwaysValidSchema)(a,r)){const m=t.name("valid");c.removeAdditional==="failing"?(g($,m,!1),t.if((0,at.not)(m),()=>{e.reset(),y($)})):(g($,m),i||t.if((0,at.not)(m),()=>t.break()))}}function g($,m,E){const N={keyword:"additionalProperties",dataProp:$,dataPropType:xn.Type.Str};E===!1&&Object.assign(N,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(N,m)}}};Gs.default=Rw;var ki={};Object.defineProperty(ki,"__esModule",{value:!0});const Ow=ht,xc=le,ho=D,Bc=Gs,Iw={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:n,data:s,it:o}=e;o.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&Bc.default.code(new Ow.KeywordCxt(o,Bc.default,"additionalProperties"));const a=(0,xc.allSchemaProperties)(r);for(const f of a)o.definedProperties.add(f);o.opts.unevaluated&&a.length&&o.props!==!0&&(o.props=ho.mergeEvaluated.props(t,(0,ho.toHash)(a),o.props));const i=a.filter(f=>!(0,ho.alwaysValidSchema)(o,r[f]));if(i.length===0)return;const c=t.name("valid");for(const f of i)d(f)?u(f):(t.if((0,xc.propertyInData)(t,s,f,o.opts.ownProperties)),u(f),o.allErrors||t.else().var(c,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(c);function d(f){return o.opts.useDefaults&&!o.compositeRule&&r[f].default!==void 0}function u(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},c)}}};ki.default=Iw;var Ci={};Object.defineProperty(Ci,"__esModule",{value:!0});const Yc=le,Bn=ie,Jc=D,Xc=D,Tw={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:n,parentSchema:s,it:o}=e,{opts:a}=o,i=(0,Yc.allSchemaProperties)(r),c=i.filter(g=>(0,Jc.alwaysValidSchema)(o,r[g]));if(i.length===0||c.length===i.length&&(!o.opts.unevaluated||o.props===!0))return;const d=a.strictSchema&&!a.allowMatchingProperties&&s.properties,u=t.name("valid");o.props!==!0&&!(o.props instanceof Bn.Name)&&(o.props=(0,Xc.evaluatedPropsToName)(t,o.props));const{props:f}=o;v();function v(){for(const g of i)d&&y(g),o.allErrors?w(g):(t.var(u,!0),w(g),t.if(u))}function y(g){for(const $ in d)new RegExp(g).test($)&&(0,Jc.checkStrictMode)(o,`property ${$} matches pattern ${g} (use allowMatchingProperties)`)}function w(g){t.forIn("key",n,$=>{t.if((0,Bn._)`${(0,Yc.usePattern)(e,g)}.test(${$})`,()=>{const m=c.includes(g);m||e.subschema({keyword:"patternProperties",schemaProp:g,dataProp:$,dataPropType:Xc.Type.Str},u),o.opts.unevaluated&&f!==!0?t.assign((0,Bn._)`${f}[${$}]`,!0):!m&&!o.allErrors&&t.if((0,Bn.not)(u),()=>t.break())})})}}};Ci.default=Tw;var Mi={};Object.defineProperty(Mi,"__esModule",{value:!0});const jw=D,Aw={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:n}=e;if((0,jw.alwaysValidSchema)(n,r)){e.fail();return}const s=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),e.failResult(s,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};Mi.default=Aw;var Di={};Object.defineProperty(Di,"__esModule",{value:!0});const kw=le,Cw={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:kw.validateUnion,error:{message:"must match a schema in anyOf"}};Di.default=Cw;var Fi={};Object.defineProperty(Fi,"__esModule",{value:!0});const hs=ie,Mw=D,Dw={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,hs._)`{passingSchemas: ${e.passing}}`},Fw={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Dw,code(e){const{gen:t,schema:r,parentSchema:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;const o=r,a=t.let("valid",!1),i=t.let("passing",null),c=t.name("_valid");e.setParams({passing:i}),t.block(d),e.result(a,()=>e.reset(),()=>e.error(!0));function d(){o.forEach((u,f)=>{let v;(0,Mw.alwaysValidSchema)(s,u)?t.var(c,!0):v=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},c),f>0&&t.if((0,hs._)`${c} && ${a}`).assign(a,!1).assign(i,(0,hs._)`[${i}, ${f}]`).else(),t.if(c,()=>{t.assign(a,!0),t.assign(i,f),v&&e.mergeEvaluated(v,hs.Name)})})}}};Fi.default=Fw;var Li={};Object.defineProperty(Li,"__esModule",{value:!0});const Lw=D,zw={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const s=t.name("valid");r.forEach((o,a)=>{if((0,Lw.alwaysValidSchema)(n,o))return;const i=e.subschema({keyword:"allOf",schemaProp:a},s);e.ok(s),e.mergeEvaluated(i)})}};Li.default=zw;var zi={};Object.defineProperty(zi,"__esModule",{value:!0});const Os=ie,Pd=D,Vw={message:({params:e})=>(0,Os.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,Os._)`{failingKeyword: ${e.ifClause}}`},Uw={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Vw,code(e){const{gen:t,parentSchema:r,it:n}=e;r.then===void 0&&r.else===void 0&&(0,Pd.checkStrictMode)(n,'"if" without "then" and "else" is ignored');const s=Zc(n,"then"),o=Zc(n,"else");if(!s&&!o)return;const a=t.let("valid",!0),i=t.name("_valid");if(c(),e.reset(),s&&o){const u=t.let("ifClause");e.setParams({ifClause:u}),t.if(i,d("then",u),d("else",u))}else s?t.if(i,d("then")):t.if((0,Os.not)(i),d("else"));e.pass(a,()=>e.error(!0));function c(){const u=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},i);e.mergeEvaluated(u)}function d(u,f){return()=>{const v=e.subschema({keyword:u},i);t.assign(a,i),e.mergeValidEvaluated(v,a),f?t.assign(f,(0,Os._)`${u}`):e.setParams({ifClause:u})}}}};function Zc(e,t){const r=e.schema[t];return r!==void 0&&!(0,Pd.alwaysValidSchema)(e,r)}zi.default=Uw;var Vi={};Object.defineProperty(Vi,"__esModule",{value:!0});const qw=D,Gw={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,qw.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};Vi.default=Gw;Object.defineProperty(Oi,"__esModule",{value:!0});const Kw=Zr,Hw=Ii,Ww=Qr,xw=Ti,Bw=ji,Yw=bd,Jw=Ai,Xw=Gs,Zw=ki,Qw=Ci,eE=Mi,tE=Di,rE=Fi,nE=Li,sE=zi,oE=Vi;function aE(e=!1){const t=[eE.default,tE.default,rE.default,nE.default,sE.default,oE.default,Jw.default,Xw.default,Yw.default,Zw.default,Qw.default];return e?t.push(Hw.default,xw.default):t.push(Kw.default,Ww.default),t.push(Bw.default),t}Oi.default=aE;var Ui={},qi={};Object.defineProperty(qi,"__esModule",{value:!0});const be=ie,iE={message:({schemaCode:e})=>(0,be.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,be._)`{format: ${e}}`},cE={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:iE,code(e,t){const{gen:r,data:n,$data:s,schema:o,schemaCode:a,it:i}=e,{opts:c,errSchemaPath:d,schemaEnv:u,self:f}=i;if(!c.validateFormats)return;s?v():y();function v(){const w=r.scopeValue("formats",{ref:f.formats,code:c.code.formats}),g=r.const("fDef",(0,be._)`${w}[${a}]`),$=r.let("fType"),m=r.let("format");r.if((0,be._)`typeof ${g} == "object" && !(${g} instanceof RegExp)`,()=>r.assign($,(0,be._)`${g}.type || "string"`).assign(m,(0,be._)`${g}.validate`),()=>r.assign($,(0,be._)`"string"`).assign(m,g)),e.fail$data((0,be.or)(E(),N()));function E(){return c.strictSchema===!1?be.nil:(0,be._)`${a} && !${m}`}function N(){const R=u.$async?(0,be._)`(${g}.async ? await ${m}(${n}) : ${m}(${n}))`:(0,be._)`${m}(${n})`,O=(0,be._)`(typeof ${m} == "function" ? ${R} : ${m}.test(${n}))`;return(0,be._)`${m} && ${m} !== true && ${$} === ${t} && !${O}`}}function y(){const w=f.formats[o];if(!w){E();return}if(w===!0)return;const[g,$,m]=N(w);g===t&&e.pass(R());function E(){if(c.strictSchema===!1){f.logger.warn(O());return}throw new Error(O());function O(){return`unknown format "${o}" ignored in schema at path "${d}"`}}function N(O){const x=O instanceof RegExp?(0,be.regexpCode)(O):c.code.formats?(0,be._)`${c.code.formats}${(0,be.getProperty)(o)}`:void 0,re=r.scopeValue("formats",{key:o,ref:O,code:x});return typeof O=="object"&&!(O instanceof RegExp)?[O.type||"string",O.validate,(0,be._)`${re}.validate`]:["string",O,re]}function R(){if(typeof w=="object"&&!(w instanceof RegExp)&&w.async){if(!u.$async)throw new Error("async format in sync schema");return(0,be._)`await ${m}(${n})`}return typeof $=="function"?(0,be._)`${m}(${n})`:(0,be._)`${m}.test(${n})`}}}};qi.default=cE;Object.defineProperty(Ui,"__esModule",{value:!0});const lE=qi,uE=[lE.default];Ui.default=uE;var Hr={};Object.defineProperty(Hr,"__esModule",{value:!0});Hr.contentVocabulary=Hr.metadataVocabulary=void 0;Hr.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Hr.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(hi,"__esModule",{value:!0});const dE=mi,fE=yi,hE=Oi,mE=Ui,Qc=Hr,pE=[dE.default,fE.default,(0,hE.default)(),mE.default,Qc.metadataVocabulary,Qc.contentVocabulary];hi.default=pE;var Gi={},Ks={};Object.defineProperty(Ks,"__esModule",{value:!0});Ks.DiscrError=void 0;var el;(function(e){e.Tag="tag",e.Mapping="mapping"})(el||(Ks.DiscrError=el={}));Object.defineProperty(Gi,"__esModule",{value:!0});const kr=ie,Go=Ks,tl=We,yE=Xr,$E=D,gE={message:({params:{discrError:e,tagName:t}})=>e===Go.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,kr._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},_E={keyword:"discriminator",type:"object",schemaType:"object",error:gE,code(e){const{gen:t,data:r,schema:n,parentSchema:s,it:o}=e,{oneOf:a}=s;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");const i=n.propertyName;if(typeof i!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!a)throw new Error("discriminator: requires oneOf keyword");const c=t.let("valid",!1),d=t.const("tag",(0,kr._)`${r}${(0,kr.getProperty)(i)}`);t.if((0,kr._)`typeof ${d} == "string"`,()=>u(),()=>e.error(!1,{discrError:Go.DiscrError.Tag,tag:d,tagName:i})),e.ok(c);function u(){const y=v();t.if(!1);for(const w in y)t.elseIf((0,kr._)`${d} === ${w}`),t.assign(c,f(y[w]));t.else(),e.error(!1,{discrError:Go.DiscrError.Mapping,tag:d,tagName:i}),t.endIf()}function f(y){const w=t.name("valid"),g=e.subschema({keyword:"oneOf",schemaProp:y},w);return e.mergeEvaluated(g,kr.Name),w}function v(){var y;const w={},g=m(s);let $=!0;for(let R=0;R<a.length;R++){let O=a[R];if(O!=null&&O.$ref&&!(0,$E.schemaHasRulesButRef)(O,o.self.RULES)){const re=O.$ref;if(O=tl.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,re),O instanceof tl.SchemaEnv&&(O=O.schema),O===void 0)throw new yE.default(o.opts.uriResolver,o.baseId,re)}const x=(y=O==null?void 0:O.properties)===null||y===void 0?void 0:y[i];if(typeof x!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${i}"`);$=$&&(g||m(O)),E(x,R)}if(!$)throw new Error(`discriminator: "${i}" must be required`);return w;function m({required:R}){return Array.isArray(R)&&R.includes(i)}function E(R,O){if(R.const)N(R.const,O);else if(R.enum)for(const x of R.enum)N(x,O);else throw new Error(`discriminator: "properties/${i}" must have "const" or "enum"`)}function N(R,O){if(typeof R!="string"||R in w)throw new Error(`discriminator: "${i}" values must be unique strings`);w[R]=O}}}};Gi.default=_E;const vE="http://json-schema.org/draft-07/schema#",wE="http://json-schema.org/draft-07/schema#",EE="Core schema meta-schema",bE={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},SE=["object","boolean"],PE={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},NE={$schema:vE,$id:wE,title:EE,definitions:bE,type:SE,properties:PE,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const r=zu,n=hi,s=Gi,o=NE,a=["/properties"],i="http://json-schema.org/draft-07/schema";class c extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(w=>this.addVocabulary(w)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const w=this.opts.$data?this.$dataMetaSchema(o,a):o;this.addMetaSchema(w,i,!1),this.refs["http://json-schema.org/schema"]=i}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(i)?i:void 0)}}t.Ajv=c,e.exports=t=c,e.exports.Ajv=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var d=ht;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var u=ie;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});var f=kn;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var v=Xr;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return v.default}})})(Do,Do.exports);var RE=Do.exports;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatLimitDefinition=void 0;const t=RE,r=ie,n=r.operators,s={formatMaximum:{okStr:"<=",ok:n.LTE,fail:n.GT},formatMinimum:{okStr:">=",ok:n.GTE,fail:n.LT},formatExclusiveMaximum:{okStr:"<",ok:n.LT,fail:n.GTE},formatExclusiveMinimum:{okStr:">",ok:n.GT,fail:n.LTE}},o={message:({keyword:i,schemaCode:c})=>(0,r.str)`should be ${s[i].okStr} ${c}`,params:({keyword:i,schemaCode:c})=>(0,r._)`{comparison: ${s[i].okStr}, limit: ${c}}`};e.formatLimitDefinition={keyword:Object.keys(s),type:"string",schemaType:"string",$data:!0,error:o,code(i){const{gen:c,data:d,schemaCode:u,keyword:f,it:v}=i,{opts:y,self:w}=v;if(!y.validateFormats)return;const g=new t.KeywordCxt(v,w.RULES.all.format.definition,"format");g.$data?$():m();function $(){const N=c.scopeValue("formats",{ref:w.formats,code:y.code.formats}),R=c.const("fmt",(0,r._)`${N}[${g.schemaCode}]`);i.fail$data((0,r.or)((0,r._)`typeof ${R} != "object"`,(0,r._)`${R} instanceof RegExp`,(0,r._)`typeof ${R}.compare != "function"`,E(R)))}function m(){const N=g.schema,R=w.formats[N];if(!R||R===!0)return;if(typeof R!="object"||R instanceof RegExp||typeof R.compare!="function")throw new Error(`"${f}": format "${N}" does not define "compare" function`);const O=c.scopeValue("formats",{key:N,ref:R,code:y.code.formats?(0,r._)`${y.code.formats}${(0,r.getProperty)(N)}`:void 0});i.fail$data(E(O))}function E(N){return(0,r._)`${N}.compare(${d}, ${u}) ${s[f].fail} 0`}},dependencies:["format"]};const a=i=>(i.addKeyword(e.formatLimitDefinition),i);e.default=a})(Lu);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=Fu,n=Lu,s=ie,o=new s.Name("fullFormats"),a=new s.Name("fastFormats"),i=(d,u={keywords:!0})=>{if(Array.isArray(u))return c(d,u,r.fullFormats,o),d;const[f,v]=u.mode==="fast"?[r.fastFormats,a]:[r.fullFormats,o],y=u.formats||r.formatNames;return c(d,y,f,v),u.keywords&&(0,n.default)(d),d};i.get=(d,u="full")=>{const v=(u==="fast"?r.fastFormats:r.fullFormats)[d];if(!v)throw new Error(`Unknown format "${d}"`);return v};function c(d,u,f,v){var y,w;(y=(w=d.opts.code).formats)!==null&&y!==void 0||(w.formats=(0,s._)`require("ajv-formats/dist/formats").${v}`);for(const g of u)d.addFormat(g,f[g])}e.exports=t=i,Object.defineProperty(t,"__esModule",{value:!0}),t.default=i})(Mo,Mo.exports);var OE=Mo.exports;const IE=Fl(OE),TE=(e,t,r,n)=>{if(r==="length"||r==="prototype"||r==="arguments"||r==="caller")return;const s=Object.getOwnPropertyDescriptor(e,r),o=Object.getOwnPropertyDescriptor(t,r);!jE(s,o)&&n||Object.defineProperty(e,r,o)},jE=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},AE=(e,t)=>{const r=Object.getPrototypeOf(t);r!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,r)},kE=(e,t)=>`/* Wrapped ${e}*/
${t}`,CE=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),ME=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),DE=(e,t,r)=>{const n=r===""?"":`with ${r.trim()}() `,s=kE.bind(null,n,t.toString());Object.defineProperty(s,"name",ME);const{writable:o,enumerable:a,configurable:i}=CE;Object.defineProperty(e,"toString",{value:s,writable:o,enumerable:a,configurable:i})};function FE(e,t,{ignoreNonConfigurable:r=!1}={}){const{name:n}=e;for(const s of Reflect.ownKeys(t))TE(e,t,s,r);return AE(e,t),DE(e,t,n),e}const rl=(e,t={})=>{if(typeof e!="function")throw new TypeError(`Expected the first argument to be a function, got \`${typeof e}\``);const{wait:r=0,maxWait:n=Number.POSITIVE_INFINITY,before:s=!1,after:o=!0}=t;if(r<0||n<0)throw new RangeError("`wait` and `maxWait` must not be negative.");if(!s&&!o)throw new Error("Both `before` and `after` are false, function wouldn't be called.");let a,i,c;const d=function(...u){const f=this,v=()=>{a=void 0,i&&(clearTimeout(i),i=void 0),o&&(c=e.apply(f,u))},y=()=>{i=void 0,a&&(clearTimeout(a),a=void 0),o&&(c=e.apply(f,u))},w=s&&!a;return clearTimeout(a),a=setTimeout(v,r),n>0&&n!==Number.POSITIVE_INFINITY&&!i&&(i=setTimeout(y,n)),w&&(c=e.apply(f,u)),c};return FE(d,e),d.cancel=()=>{a&&(clearTimeout(a),a=void 0),i&&(clearTimeout(i),i=void 0)},d};var Ko={exports:{}};const LE="2.0.0",Nd=256,zE=Number.MAX_SAFE_INTEGER||9007199254740991,VE=16,UE=Nd-6,qE=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Hs={MAX_LENGTH:Nd,MAX_SAFE_COMPONENT_LENGTH:VE,MAX_SAFE_BUILD_LENGTH:UE,MAX_SAFE_INTEGER:zE,RELEASE_TYPES:qE,SEMVER_SPEC_VERSION:LE,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const GE=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var Ws=GE;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:s}=Hs,o=Ws;t=e.exports={};const a=t.re=[],i=t.safeRe=[],c=t.src=[],d=t.safeSrc=[],u=t.t={};let f=0;const v="[a-zA-Z0-9-]",y=[["\\s",1],["\\d",s],[v,n]],w=$=>{for(const[m,E]of y)$=$.split(`${m}*`).join(`${m}{0,${E}}`).split(`${m}+`).join(`${m}{1,${E}}`);return $},g=($,m,E)=>{const N=w(m),R=f++;o($,R,m),u[$]=R,c[R]=m,d[R]=N,a[R]=new RegExp(m,E?"g":void 0),i[R]=new RegExp(N,E?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${v}*`),g("MAINVERSION",`(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${c[u.NONNUMERICIDENTIFIER]}|${c[u.NUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${c[u.NONNUMERICIDENTIFIER]}|${c[u.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASE",`(?:-(${c[u.PRERELEASEIDENTIFIER]}(?:\\.${c[u.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${c[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[u.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${v}+`),g("BUILD",`(?:\\+(${c[u.BUILDIDENTIFIER]}(?:\\.${c[u.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${c[u.MAINVERSION]}${c[u.PRERELEASE]}?${c[u.BUILD]}?`),g("FULL",`^${c[u.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${c[u.MAINVERSIONLOOSE]}${c[u.PRERELEASELOOSE]}?${c[u.BUILD]}?`),g("LOOSE",`^${c[u.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${c[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${c[u.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:${c[u.PRERELEASE]})?${c[u.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:${c[u.PRERELEASELOOSE]})?${c[u.BUILD]}?)?)?`),g("XRANGE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAINLOOSE]}$`),g("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),g("COERCE",`${c[u.COERCEPLAIN]}(?:$|[^\\d])`),g("COERCEFULL",c[u.COERCEPLAIN]+`(?:${c[u.PRERELEASE]})?(?:${c[u.BUILD]})?(?:$|[^\\d])`),g("COERCERTL",c[u.COERCE],!0),g("COERCERTLFULL",c[u.COERCEFULL],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${c[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",g("TILDE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${c[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",g("CARET",`^${c[u.LONECARET]}${c[u.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${c[u.LONECARET]}${c[u.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${c[u.GTLT]}\\s*(${c[u.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]}|${c[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${c[u.XRANGEPLAIN]})\\s+-\\s+(${c[u.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${c[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[u.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Ko,Ko.exports);var Mn=Ko.exports;const KE=Object.freeze({loose:!0}),HE=Object.freeze({}),WE=e=>e?typeof e!="object"?KE:e:HE;var Ki=WE;const nl=/^[0-9]+$/,Rd=(e,t)=>{if(typeof e=="number"&&typeof t=="number")return e===t?0:e<t?-1:1;const r=nl.test(e),n=nl.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},xE=(e,t)=>Rd(t,e);var Od={compareIdentifiers:Rd,rcompareIdentifiers:xE};const Yn=Ws,{MAX_LENGTH:sl,MAX_SAFE_INTEGER:Jn}=Hs,{safeRe:Xn,t:Zn}=Mn,BE=Ki,{compareIdentifiers:mo}=Od;let YE=class $t{constructor(t,r){if(r=BE(r),t instanceof $t){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>sl)throw new TypeError(`version is longer than ${sl} characters`);Yn("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?Xn[Zn.LOOSE]:Xn[Zn.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Jn||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Jn||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Jn||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){const o=+s;if(o>=0&&o<Jn)return o}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Yn("SemVer.compare",this.version,this.options,t),!(t instanceof $t)){if(typeof t=="string"&&t===this.version)return 0;t=new $t(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof $t||(t=new $t(t,this.options)),this.major<t.major?-1:this.major>t.major?1:this.minor<t.minor?-1:this.minor>t.minor?1:this.patch<t.patch?-1:this.patch>t.patch?1:0}comparePre(t){if(t instanceof $t||(t=new $t(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],s=t.prerelease[r];if(Yn("prerelease compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return mo(n,s)}while(++r)}compareBuild(t){t instanceof $t||(t=new $t(t,this.options));let r=0;do{const n=this.build[r],s=t.build[r];if(Yn("build compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return mo(n,s)}while(++r)}inc(t,r,n){if(t.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){const s=`-${r}`.match(this.options.loose?Xn[Zn.PRERELEASELOOSE]:Xn[Zn.PRERELEASE]);if(!s||s[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const s=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[s];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(r){let o=[r,s];n===!1&&(o=[r]),mo(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Ue=YE;const ol=Ue,JE=(e,t,r=!1)=>{if(e instanceof ol)return e;try{return new ol(e,t)}catch(n){if(!r)return null;throw n}};var en=JE;const XE=en,ZE=(e,t)=>{const r=XE(e,t);return r?r.version:null};var QE=ZE;const eb=en,tb=(e,t)=>{const r=eb(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};var rb=tb;const al=Ue,nb=(e,t,r,n,s)=>{typeof r=="string"&&(s=n,n=r,r=void 0);try{return new al(e instanceof al?e.version:e,r).inc(t,n,s).version}catch{return null}};var sb=nb;const il=en,ob=(e,t)=>{const r=il(e,null,!0),n=il(t,null,!0),s=r.compare(n);if(s===0)return null;const o=s>0,a=o?r:n,i=o?n:r,c=!!a.prerelease.length;if(!!i.prerelease.length&&!c){if(!i.patch&&!i.minor)return"major";if(i.compareMain(a)===0)return i.minor&&!i.patch?"minor":"patch"}const u=c?"pre":"";return r.major!==n.major?u+"major":r.minor!==n.minor?u+"minor":r.patch!==n.patch?u+"patch":"prerelease"};var ab=ob;const ib=Ue,cb=(e,t)=>new ib(e,t).major;var lb=cb;const ub=Ue,db=(e,t)=>new ub(e,t).minor;var fb=db;const hb=Ue,mb=(e,t)=>new hb(e,t).patch;var pb=mb;const yb=en,$b=(e,t)=>{const r=yb(e,t);return r&&r.prerelease.length?r.prerelease:null};var gb=$b;const cl=Ue,_b=(e,t,r)=>new cl(e,r).compare(new cl(t,r));var mt=_b;const vb=mt,wb=(e,t,r)=>vb(t,e,r);var Eb=wb;const bb=mt,Sb=(e,t)=>bb(e,t,!0);var Pb=Sb;const ll=Ue,Nb=(e,t,r)=>{const n=new ll(e,r),s=new ll(t,r);return n.compare(s)||n.compareBuild(s)};var Hi=Nb;const Rb=Hi,Ob=(e,t)=>e.sort((r,n)=>Rb(r,n,t));var Ib=Ob;const Tb=Hi,jb=(e,t)=>e.sort((r,n)=>Tb(n,r,t));var Ab=jb;const kb=mt,Cb=(e,t,r)=>kb(e,t,r)>0;var xs=Cb;const Mb=mt,Db=(e,t,r)=>Mb(e,t,r)<0;var Wi=Db;const Fb=mt,Lb=(e,t,r)=>Fb(e,t,r)===0;var Id=Lb;const zb=mt,Vb=(e,t,r)=>zb(e,t,r)!==0;var Td=Vb;const Ub=mt,qb=(e,t,r)=>Ub(e,t,r)>=0;var xi=qb;const Gb=mt,Kb=(e,t,r)=>Gb(e,t,r)<=0;var Bi=Kb;const Hb=Id,Wb=Td,xb=xs,Bb=xi,Yb=Wi,Jb=Bi,Xb=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return Hb(e,r,n);case"!=":return Wb(e,r,n);case">":return xb(e,r,n);case">=":return Bb(e,r,n);case"<":return Yb(e,r,n);case"<=":return Jb(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};var jd=Xb;const Zb=Ue,Qb=en,{safeRe:Qn,t:es}=Mn,eS=(e,t)=>{if(e instanceof Zb)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(t.includePrerelease?Qn[es.COERCEFULL]:Qn[es.COERCE]);else{const c=t.includePrerelease?Qn[es.COERCERTLFULL]:Qn[es.COERCERTL];let d;for(;(d=c.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||d.index+d[0].length!==r.index+r[0].length)&&(r=d),c.lastIndex=d.index+d[1].length+d[2].length;c.lastIndex=-1}if(r===null)return null;const n=r[2],s=r[3]||"0",o=r[4]||"0",a=t.includePrerelease&&r[5]?`-${r[5]}`:"",i=t.includePrerelease&&r[6]?`+${r[6]}`:"";return Qb(`${n}.${s}.${o}${a}${i}`,t)};var tS=eS;class rS{constructor(){this.max=1e3,this.map=new Map}get(t){const r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.delete(t)}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){const s=this.map.keys().next().value;this.delete(s)}this.map.set(t,r)}return this}}var nS=rS,po,ul;function pt(){if(ul)return po;ul=1;const e=/\s+/g;class t{constructor(A,V){if(V=s(V),A instanceof t)return A.loose===!!V.loose&&A.includePrerelease===!!V.includePrerelease?A:new t(A.raw,V);if(A instanceof o)return this.raw=A.value,this.set=[[A]],this.formatted=void 0,this;if(this.options=V,this.loose=!!V.loose,this.includePrerelease=!!V.includePrerelease,this.raw=A.trim().replace(e," "),this.set=this.raw.split("||").map(F=>this.parseRange(F.trim())).filter(F=>F.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const F=this.set[0];if(this.set=this.set.filter(B=>!g(B[0])),this.set.length===0)this.set=[F];else if(this.set.length>1){for(const B of this.set)if(B.length===1&&$(B[0])){this.set=[B];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let A=0;A<this.set.length;A++){A>0&&(this.formatted+="||");const V=this.set[A];for(let F=0;F<V.length;F++)F>0&&(this.formatted+=" "),this.formatted+=V[F].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(A){const F=((this.options.includePrerelease&&y)|(this.options.loose&&w))+":"+A,B=n.get(F);if(B)return B;const L=this.options.loose,P=L?c[d.HYPHENRANGELOOSE]:c[d.HYPHENRANGE];A=A.replace(P,Y(this.options.includePrerelease)),a("hyphen replace",A),A=A.replace(c[d.COMPARATORTRIM],u),a("comparator trim",A),A=A.replace(c[d.TILDETRIM],f),a("tilde trim",A),A=A.replace(c[d.CARETTRIM],v),a("caret trim",A);let p=A.split(" ").map(h=>E(h,this.options)).join(" ").split(/\s+/).map(h=>K(h,this.options));L&&(p=p.filter(h=>(a("loose invalid filter",h,this.options),!!h.match(c[d.COMPARATORLOOSE])))),a("range list",p);const S=new Map,_=p.map(h=>new o(h,this.options));for(const h of _){if(g(h))return[h];S.set(h.value,h)}S.size>1&&S.has("")&&S.delete("");const l=[...S.values()];return n.set(F,l),l}intersects(A,V){if(!(A instanceof t))throw new TypeError("a Range is required");return this.set.some(F=>m(F,V)&&A.set.some(B=>m(B,V)&&F.every(L=>B.every(P=>L.intersects(P,V)))))}test(A){if(!A)return!1;if(typeof A=="string")try{A=new i(A,this.options)}catch{return!1}for(let V=0;V<this.set.length;V++)if(fe(this.set[V],A,this.options))return!0;return!1}}po=t;const r=nS,n=new r,s=Ki,o=Bs(),a=Ws,i=Ue,{safeRe:c,t:d,comparatorTrimReplace:u,tildeTrimReplace:f,caretTrimReplace:v}=Mn,{FLAG_INCLUDE_PRERELEASE:y,FLAG_LOOSE:w}=Hs,g=T=>T.value==="<0.0.0-0",$=T=>T.value==="",m=(T,A)=>{let V=!0;const F=T.slice();let B=F.pop();for(;V&&F.length;)V=F.every(L=>B.intersects(L,A)),B=F.pop();return V},E=(T,A)=>(T=T.replace(c[d.BUILD],""),a("comp",T,A),T=x(T,A),a("caret",T),T=R(T,A),a("tildes",T),T=ge(T,A),a("xrange",T),T=Se(T,A),a("stars",T),T),N=T=>!T||T.toLowerCase()==="x"||T==="*",R=(T,A)=>T.trim().split(/\s+/).map(V=>O(V,A)).join(" "),O=(T,A)=>{const V=A.loose?c[d.TILDELOOSE]:c[d.TILDE];return T.replace(V,(F,B,L,P,p)=>{a("tilde",T,F,B,L,P,p);let S;return N(B)?S="":N(L)?S=`>=${B}.0.0 <${+B+1}.0.0-0`:N(P)?S=`>=${B}.${L}.0 <${B}.${+L+1}.0-0`:p?(a("replaceTilde pr",p),S=`>=${B}.${L}.${P}-${p} <${B}.${+L+1}.0-0`):S=`>=${B}.${L}.${P} <${B}.${+L+1}.0-0`,a("tilde return",S),S})},x=(T,A)=>T.trim().split(/\s+/).map(V=>re(V,A)).join(" "),re=(T,A)=>{a("caret",T,A);const V=A.loose?c[d.CARETLOOSE]:c[d.CARET],F=A.includePrerelease?"-0":"";return T.replace(V,(B,L,P,p,S)=>{a("caret",T,B,L,P,p,S);let _;return N(L)?_="":N(P)?_=`>=${L}.0.0${F} <${+L+1}.0.0-0`:N(p)?L==="0"?_=`>=${L}.${P}.0${F} <${L}.${+P+1}.0-0`:_=`>=${L}.${P}.0${F} <${+L+1}.0.0-0`:S?(a("replaceCaret pr",S),L==="0"?P==="0"?_=`>=${L}.${P}.${p}-${S} <${L}.${P}.${+p+1}-0`:_=`>=${L}.${P}.${p}-${S} <${L}.${+P+1}.0-0`:_=`>=${L}.${P}.${p}-${S} <${+L+1}.0.0-0`):(a("no pr"),L==="0"?P==="0"?_=`>=${L}.${P}.${p}${F} <${L}.${P}.${+p+1}-0`:_=`>=${L}.${P}.${p}${F} <${L}.${+P+1}.0-0`:_=`>=${L}.${P}.${p} <${+L+1}.0.0-0`),a("caret return",_),_})},ge=(T,A)=>(a("replaceXRanges",T,A),T.split(/\s+/).map(V=>we(V,A)).join(" ")),we=(T,A)=>{T=T.trim();const V=A.loose?c[d.XRANGELOOSE]:c[d.XRANGE];return T.replace(V,(F,B,L,P,p,S)=>{a("xRange",T,F,B,L,P,p,S);const _=N(L),l=_||N(P),h=l||N(p),b=h;return B==="="&&b&&(B=""),S=A.includePrerelease?"-0":"",_?B===">"||B==="<"?F="<0.0.0-0":F="*":B&&b?(l&&(P=0),p=0,B===">"?(B=">=",l?(L=+L+1,P=0,p=0):(P=+P+1,p=0)):B==="<="&&(B="<",l?L=+L+1:P=+P+1),B==="<"&&(S="-0"),F=`${B+L}.${P}.${p}${S}`):l?F=`>=${L}.0.0${S} <${+L+1}.0.0-0`:h&&(F=`>=${L}.${P}.0${S} <${L}.${+P+1}.0-0`),a("xRange return",F),F})},Se=(T,A)=>(a("replaceStars",T,A),T.trim().replace(c[d.STAR],"")),K=(T,A)=>(a("replaceGTE0",T,A),T.trim().replace(c[A.includePrerelease?d.GTE0PRE:d.GTE0],"")),Y=T=>(A,V,F,B,L,P,p,S,_,l,h,b)=>(N(F)?V="":N(B)?V=`>=${F}.0.0${T?"-0":""}`:N(L)?V=`>=${F}.${B}.0${T?"-0":""}`:P?V=`>=${V}`:V=`>=${V}${T?"-0":""}`,N(_)?S="":N(l)?S=`<${+_+1}.0.0-0`:N(h)?S=`<${_}.${+l+1}.0-0`:b?S=`<=${_}.${l}.${h}-${b}`:T?S=`<${_}.${l}.${+h+1}-0`:S=`<=${S}`,`${V} ${S}`.trim()),fe=(T,A,V)=>{for(let F=0;F<T.length;F++)if(!T[F].test(A))return!1;if(A.prerelease.length&&!V.includePrerelease){for(let F=0;F<T.length;F++)if(a(T[F].semver),T[F].semver!==o.ANY&&T[F].semver.prerelease.length>0){const B=T[F].semver;if(B.major===A.major&&B.minor===A.minor&&B.patch===A.patch)return!0}return!1}return!0};return po}var yo,dl;function Bs(){if(dl)return yo;dl=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(u,f){if(f=r(f),u instanceof t){if(u.loose===!!f.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),a("comparator",u,f),this.options=f,this.loose=!!f.loose,this.parse(u),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(u){const f=this.options.loose?n[s.COMPARATORLOOSE]:n[s.COMPARATOR],v=u.match(f);if(!v)throw new TypeError(`Invalid comparator: ${u}`);this.operator=v[1]!==void 0?v[1]:"",this.operator==="="&&(this.operator=""),v[2]?this.semver=new i(v[2],this.options.loose):this.semver=e}toString(){return this.value}test(u){if(a("Comparator.test",u,this.options.loose),this.semver===e||u===e)return!0;if(typeof u=="string")try{u=new i(u,this.options)}catch{return!1}return o(u,this.operator,this.semver,this.options)}intersects(u,f){if(!(u instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(u.value,f).test(this.value):u.operator===""?u.value===""?!0:new c(this.value,f).test(u.semver):(f=r(f),f.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||o(this.semver,"<",u.semver,f)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||o(this.semver,">",u.semver,f)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}yo=t;const r=Ki,{safeRe:n,t:s}=Mn,o=jd,a=Ws,i=Ue,c=pt();return yo}const sS=pt(),oS=(e,t,r)=>{try{t=new sS(t,r)}catch{return!1}return t.test(e)};var Ys=oS;const aS=pt(),iS=(e,t)=>new aS(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));var cS=iS;const lS=Ue,uS=pt(),dS=(e,t,r)=>{let n=null,s=null,o=null;try{o=new uS(t,r)}catch{return null}return e.forEach(a=>{o.test(a)&&(!n||s.compare(a)===-1)&&(n=a,s=new lS(n,r))}),n};var fS=dS;const hS=Ue,mS=pt(),pS=(e,t,r)=>{let n=null,s=null,o=null;try{o=new mS(t,r)}catch{return null}return e.forEach(a=>{o.test(a)&&(!n||s.compare(a)===1)&&(n=a,s=new hS(n,r))}),n};var yS=pS;const $o=Ue,$S=pt(),fl=xs,gS=(e,t)=>{e=new $S(e,t);let r=new $o("0.0.0");if(e.test(r)||(r=new $o("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){const s=e.set[n];let o=null;s.forEach(a=>{const i=new $o(a.semver.version);switch(a.operator){case">":i.prerelease.length===0?i.patch++:i.prerelease.push(0),i.raw=i.format();case"":case">=":(!o||fl(i,o))&&(o=i);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),o&&(!r||fl(r,o))&&(r=o)}return r&&e.test(r)?r:null};var _S=gS;const vS=pt(),wS=(e,t)=>{try{return new vS(e,t).range||"*"}catch{return null}};var ES=wS;const bS=Ue,Ad=Bs(),{ANY:SS}=Ad,PS=pt(),NS=Ys,hl=xs,ml=Wi,RS=Bi,OS=xi,IS=(e,t,r,n)=>{e=new bS(e,n),t=new PS(t,n);let s,o,a,i,c;switch(r){case">":s=hl,o=RS,a=ml,i=">",c=">=";break;case"<":s=ml,o=OS,a=hl,i="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(NS(e,t,n))return!1;for(let d=0;d<t.set.length;++d){const u=t.set[d];let f=null,v=null;if(u.forEach(y=>{y.semver===SS&&(y=new Ad(">=0.0.0")),f=f||y,v=v||y,s(y.semver,f.semver,n)?f=y:a(y.semver,v.semver,n)&&(v=y)}),f.operator===i||f.operator===c||(!v.operator||v.operator===i)&&o(e,v.semver))return!1;if(v.operator===c&&a(e,v.semver))return!1}return!0};var Yi=IS;const TS=Yi,jS=(e,t,r)=>TS(e,t,">",r);var AS=jS;const kS=Yi,CS=(e,t,r)=>kS(e,t,"<",r);var MS=CS;const pl=pt(),DS=(e,t,r)=>(e=new pl(e,r),t=new pl(t,r),e.intersects(t,r));var FS=DS;const LS=Ys,zS=mt;var VS=(e,t,r)=>{const n=[];let s=null,o=null;const a=e.sort((u,f)=>zS(u,f,r));for(const u of a)LS(u,t,r)?(o=u,s||(s=u)):(o&&n.push([s,o]),o=null,s=null);s&&n.push([s,null]);const i=[];for(const[u,f]of n)u===f?i.push(u):!f&&u===a[0]?i.push("*"):f?u===a[0]?i.push(`<=${f}`):i.push(`${u} - ${f}`):i.push(`>=${u}`);const c=i.join(" || "),d=typeof t.raw=="string"?t.raw:String(t);return c.length<d.length?c:t};const yl=pt(),Ji=Bs(),{ANY:go}=Ji,ln=Ys,Xi=mt,US=(e,t,r={})=>{if(e===t)return!0;e=new yl(e,r),t=new yl(t,r);let n=!1;e:for(const s of e.set){for(const o of t.set){const a=GS(s,o,r);if(n=n||a!==null,a)continue e}if(n)return!1}return!0},qS=[new Ji(">=0.0.0-0")],$l=[new Ji(">=0.0.0")],GS=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===go){if(t.length===1&&t[0].semver===go)return!0;r.includePrerelease?e=qS:e=$l}if(t.length===1&&t[0].semver===go){if(r.includePrerelease)return!0;t=$l}const n=new Set;let s,o;for(const y of e)y.operator===">"||y.operator===">="?s=gl(s,y,r):y.operator==="<"||y.operator==="<="?o=_l(o,y,r):n.add(y.semver);if(n.size>1)return null;let a;if(s&&o){if(a=Xi(s.semver,o.semver,r),a>0)return null;if(a===0&&(s.operator!==">="||o.operator!=="<="))return null}for(const y of n){if(s&&!ln(y,String(s),r)||o&&!ln(y,String(o),r))return null;for(const w of t)if(!ln(y,String(w),r))return!1;return!0}let i,c,d,u,f=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,v=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1;f&&f.prerelease.length===1&&o.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(const y of t){if(u=u||y.operator===">"||y.operator===">=",d=d||y.operator==="<"||y.operator==="<=",s){if(v&&y.semver.prerelease&&y.semver.prerelease.length&&y.semver.major===v.major&&y.semver.minor===v.minor&&y.semver.patch===v.patch&&(v=!1),y.operator===">"||y.operator===">="){if(i=gl(s,y,r),i===y&&i!==s)return!1}else if(s.operator===">="&&!ln(s.semver,String(y),r))return!1}if(o){if(f&&y.semver.prerelease&&y.semver.prerelease.length&&y.semver.major===f.major&&y.semver.minor===f.minor&&y.semver.patch===f.patch&&(f=!1),y.operator==="<"||y.operator==="<="){if(c=_l(o,y,r),c===y&&c!==o)return!1}else if(o.operator==="<="&&!ln(o.semver,String(y),r))return!1}if(!y.operator&&(o||s)&&a!==0)return!1}return!(s&&d&&!o&&a!==0||o&&u&&!s&&a!==0||v||f)},gl=(e,t,r)=>{if(!e)return t;const n=Xi(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},_l=(e,t,r)=>{if(!e)return t;const n=Xi(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};var KS=US;const _o=Mn,vl=Hs,HS=Ue,wl=Od,WS=en,xS=QE,BS=rb,YS=sb,JS=ab,XS=lb,ZS=fb,QS=pb,eP=gb,tP=mt,rP=Eb,nP=Pb,sP=Hi,oP=Ib,aP=Ab,iP=xs,cP=Wi,lP=Id,uP=Td,dP=xi,fP=Bi,hP=jd,mP=tS,pP=Bs(),yP=pt(),$P=Ys,gP=cS,_P=fS,vP=yS,wP=_S,EP=ES,bP=Yi,SP=AS,PP=MS,NP=FS,RP=VS,OP=KS;var IP={parse:WS,valid:xS,clean:BS,inc:YS,diff:JS,major:XS,minor:ZS,patch:QS,prerelease:eP,compare:tP,rcompare:rP,compareLoose:nP,compareBuild:sP,sort:oP,rsort:aP,gt:iP,lt:cP,eq:lP,neq:uP,gte:dP,lte:fP,cmp:hP,coerce:mP,Comparator:pP,Range:yP,satisfies:$P,toComparators:gP,maxSatisfying:_P,minSatisfying:vP,minVersion:wP,validRange:EP,outside:bP,gtr:SP,ltr:PP,intersects:NP,simplifyRange:RP,subset:OP,SemVer:HS,re:_o.re,src:_o.src,tokens:_o.t,SEMVER_SPEC_VERSION:vl.SEMVER_SPEC_VERSION,RELEASE_TYPES:vl.RELEASE_TYPES,compareIdentifiers:wl.compareIdentifiers,rcompareIdentifiers:wl.rcompareIdentifiers};const jr=Fl(IP),TP=Object.prototype.toString,jP="[object Uint8Array]",AP="[object ArrayBuffer]";function kd(e,t,r){return e?e.constructor===t?!0:TP.call(e)===r:!1}function Cd(e){return kd(e,Uint8Array,jP)}function kP(e){return kd(e,ArrayBuffer,AP)}function CP(e){return Cd(e)||kP(e)}function MP(e){if(!Cd(e))throw new TypeError(`Expected \`Uint8Array\`, got \`${typeof e}\``)}function DP(e){if(!CP(e))throw new TypeError(`Expected \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof e}\``)}function vo(e,t){if(e.length===0)return new Uint8Array(0);t??(t=e.reduce((s,o)=>s+o.length,0));const r=new Uint8Array(t);let n=0;for(const s of e)MP(s),r.set(s,n),n+=s.length;return r}const ts={utf8:new globalThis.TextDecoder("utf8")};function rs(e,t="utf8"){return DP(e),ts[t]??(ts[t]=new globalThis.TextDecoder(t)),ts[t].decode(e)}function FP(e){if(typeof e!="string")throw new TypeError(`Expected \`string\`, got \`${typeof e}\``)}const LP=new globalThis.TextEncoder;function ns(e){return FP(e),LP.encode(e)}Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));const wo="aes-256-cbc",Vt=()=>Object.create(null),El=e=>e!==void 0,Eo=(e,t)=>{const r=new Set(["undefined","symbol","function"]),n=typeof t;if(r.has(n))throw new TypeError(`Setting a value of type \`${n}\` for key \`${e}\` is not allowed as it's not supported by JSON`)},qt="__internal__",bo=`${qt}.migrations.version`;var Kt,lt,qe,Qe,_r,vr,Ur,gt,Oe,Md,Dd,Fd,Ld,zd,Vd,Ud,qd;class zP{constructor(t={}){yt(this,Oe);J(this,"path");J(this,"events");yt(this,Kt);yt(this,lt);yt(this,qe);yt(this,Qe,{});yt(this,_r,!1);yt(this,vr);yt(this,Ur);yt(this,gt);J(this,"_deserialize",t=>JSON.parse(t));J(this,"_serialize",t=>JSON.stringify(t,void 0,"	"));const r=Pt(this,Oe,Md).call(this,t);Be(this,qe,r),Pt(this,Oe,Dd).call(this,r),Pt(this,Oe,Ld).call(this,r),Pt(this,Oe,zd).call(this,r),this.events=new EventTarget,Be(this,lt,r.encryptionKey),this.path=Pt(this,Oe,Vd).call(this,r),Pt(this,Oe,Ud).call(this,r),r.watch&&this._watch()}get(t,r){if(ne(this,qe).accessPropertiesByDotNotation)return this._get(t,r);const{store:n}=this;return t in n?n[t]:r}set(t,r){if(typeof t!="string"&&typeof t!="object")throw new TypeError(`Expected \`key\` to be of type \`string\` or \`object\`, got ${typeof t}`);if(typeof t!="object"&&r===void 0)throw new TypeError("Use `delete()` to clear values");if(this._containsReservedKey(t))throw new TypeError(`Please don't use the ${qt} key, as it's used to manage this module internal operations.`);const{store:n}=this,s=(o,a)=>{if(Eo(o,a),ne(this,qe).accessPropertiesByDotNotation)Dn(n,o,a);else{if(o==="__proto__"||o==="constructor"||o==="prototype")return;n[o]=a}};if(typeof t=="object"){const o=t;for(const[a,i]of Object.entries(o))s(a,i)}else s(t,r);this.store=n}has(t){return ne(this,qe).accessPropertiesByDotNotation?eo(this.store,t):t in this.store}appendToArray(t,r){Eo(t,r);const n=ne(this,qe).accessPropertiesByDotNotation?this._get(t,[]):t in this.store?this.store[t]:[];if(!Array.isArray(n))throw new TypeError(`The key \`${t}\` is already set to a non-array value`);this.set(t,[...n,r])}reset(...t){for(const r of t)El(ne(this,Qe)[r])&&this.set(r,ne(this,Qe)[r])}delete(t){const{store:r}=this;ne(this,qe).accessPropertiesByDotNotation?df(r,t):delete r[t],this.store=r}clear(){const t=Vt();for(const r of Object.keys(ne(this,Qe)))El(ne(this,Qe)[r])&&(Eo(r,ne(this,Qe)[r]),ne(this,qe).accessPropertiesByDotNotation?Dn(t,r,ne(this,Qe)[r]):t[r]=ne(this,Qe)[r]);this.store=t}onDidChange(t,r){if(typeof t!="string")throw new TypeError(`Expected \`key\` to be of type \`string\`, got ${typeof t}`);if(typeof r!="function")throw new TypeError(`Expected \`callback\` to be of type \`function\`, got ${typeof r}`);return this._handleValueChange(()=>this.get(t),r)}onDidAnyChange(t){if(typeof t!="function")throw new TypeError(`Expected \`callback\` to be of type \`function\`, got ${typeof t}`);return this._handleStoreChange(t)}get size(){return Object.keys(this.store).filter(r=>!this._isReservedKeyPath(r)).length}get store(){var t;try{const r=Q.readFileSync(this.path,ne(this,lt)?null:"utf8"),n=this._decryptData(r),s=this._deserialize(n);return ne(this,_r)||this._validate(s),Object.assign(Vt(),s)}catch(r){if((r==null?void 0:r.code)==="ENOENT")return this._ensureDirectory(),Vt();if(ne(this,qe).clearInvalidConfig){const n=r;if(n.name==="SyntaxError"||(t=n.message)!=null&&t.startsWith("Config schema violation:"))return Vt()}throw r}}set store(t){if(this._ensureDirectory(),!eo(t,qt))try{const r=Q.readFileSync(this.path,ne(this,lt)?null:"utf8"),n=this._decryptData(r),s=this._deserialize(n);eo(s,qt)&&Dn(t,qt,tc(s,qt))}catch{}ne(this,_r)||this._validate(t),this._write(t),this.events.dispatchEvent(new Event("change"))}*[Symbol.iterator](){for(const[t,r]of Object.entries(this.store))this._isReservedKeyPath(t)||(yield[t,r])}_closeWatcher(){ne(this,vr)&&(ne(this,vr).close(),Be(this,vr,void 0)),ne(this,Ur)&&(Q.unwatchFile(this.path),Be(this,Ur,!1)),Be(this,gt,void 0)}_decryptData(t){if(!ne(this,lt))return typeof t=="string"?t:rs(t);try{const r=t.slice(0,16),n=lr.pbkdf2Sync(ne(this,lt),r,1e4,32,"sha512"),s=lr.createDecipheriv(wo,n,r),o=t.slice(17),a=typeof o=="string"?ns(o):o;return rs(vo([s.update(a),s.final()]))}catch{try{const r=t.slice(0,16),n=lr.pbkdf2Sync(ne(this,lt),r.toString(),1e4,32,"sha512"),s=lr.createDecipheriv(wo,n,r),o=t.slice(17),a=typeof o=="string"?ns(o):o;return rs(vo([s.update(a),s.final()]))}catch{}}return typeof t=="string"?t:rs(t)}_handleStoreChange(t){let r=this.store;const n=()=>{const s=r,o=this.store;Re.isDeepStrictEqual(o,s)||(r=o,t.call(this,o,s))};return this.events.addEventListener("change",n),()=>{this.events.removeEventListener("change",n)}}_handleValueChange(t,r){let n=t();const s=()=>{const o=n,a=t();Re.isDeepStrictEqual(a,o)||(n=a,r.call(this,a,o))};return this.events.addEventListener("change",s),()=>{this.events.removeEventListener("change",s)}}_validate(t){if(!ne(this,Kt)||ne(this,Kt).call(this,t)||!ne(this,Kt).errors)return;const n=ne(this,Kt).errors.map(({instancePath:s,message:o=""})=>`\`${s.slice(1)}\` ${o}`);throw new Error("Config schema violation: "+n.join("; "))}_ensureDirectory(){Q.mkdirSync(de.dirname(this.path),{recursive:!0})}_write(t){let r=this._serialize(t);if(ne(this,lt)){const n=lr.randomBytes(16),s=lr.pbkdf2Sync(ne(this,lt),n,1e4,32,"sha512"),o=lr.createCipheriv(wo,s,n);r=vo([n,ns(":"),o.update(ns(r)),o.final()])}if(_e.env.SNAP)Q.writeFileSync(this.path,r,{mode:ne(this,qe).configFileMode});else try{Dl(this.path,r,{mode:ne(this,qe).configFileMode})}catch(n){if((n==null?void 0:n.code)==="EXDEV"){Q.writeFileSync(this.path,r,{mode:ne(this,qe).configFileMode});return}throw n}}_watch(){if(this._ensureDirectory(),Q.existsSync(this.path)||this._write(Vt()),_e.platform==="win32"||_e.platform==="darwin"){ne(this,gt)??Be(this,gt,rl(()=>{this.events.dispatchEvent(new Event("change"))},{wait:100}));const t=de.dirname(this.path),r=de.basename(this.path);Be(this,vr,Q.watch(t,{persistent:!1,encoding:"utf8"},(n,s)=>{s&&s!==r||typeof ne(this,gt)=="function"&&ne(this,gt).call(this)}))}else ne(this,gt)??Be(this,gt,rl(()=>{this.events.dispatchEvent(new Event("change"))},{wait:1e3})),Q.watchFile(this.path,{persistent:!1},(t,r)=>{typeof ne(this,gt)=="function"&&ne(this,gt).call(this)}),Be(this,Ur,!0)}_migrate(t,r,n){let s=this._get(bo,"0.0.0");const o=Object.keys(t).filter(i=>this._shouldPerformMigration(i,s,r));let a=structuredClone(this.store);for(const i of o)try{n&&n(this,{fromVersion:s,toVersion:i,finalVersion:r,versions:o});const c=t[i];c==null||c(this),this._set(bo,i),s=i,a=structuredClone(this.store)}catch(c){this.store=a;try{this._write(a)}catch{}const d=c instanceof Error?c.message:String(c);throw new Error(`Something went wrong during the migration! Changes applied to the store until this failed migration will be restored. ${d}`)}(this._isVersionInRangeFormat(s)||!jr.eq(s,r))&&this._set(bo,r)}_containsReservedKey(t){return typeof t=="string"?this._isReservedKeyPath(t):!t||typeof t!="object"?!1:this._objectContainsReservedKey(t)}_objectContainsReservedKey(t){if(!t||typeof t!="object")return!1;for(const[r,n]of Object.entries(t))if(this._isReservedKeyPath(r)||this._objectContainsReservedKey(n))return!0;return!1}_isReservedKeyPath(t){return t===qt||t.startsWith(`${qt}.`)}_isVersionInRangeFormat(t){return jr.clean(t)===null}_shouldPerformMigration(t,r,n){return this._isVersionInRangeFormat(t)?r!=="0.0.0"&&jr.satisfies(r,t)?!1:jr.satisfies(n,t):!(jr.lte(t,r)||jr.gt(t,n))}_get(t,r){return tc(this.store,t,r)}_set(t,r){const{store:n}=this;Dn(n,t,r),this.store=n}}Kt=new WeakMap,lt=new WeakMap,qe=new WeakMap,Qe=new WeakMap,_r=new WeakMap,vr=new WeakMap,Ur=new WeakMap,gt=new WeakMap,Oe=new WeakSet,Md=function(t){const r={configName:"config",fileExtension:"json",projectSuffix:"nodejs",clearInvalidConfig:!1,accessPropertiesByDotNotation:!0,configFileMode:438,...t};if(!r.cwd){if(!r.projectName)throw new Error("Please specify the `projectName` option.");r.cwd=pf(r.projectName,{suffix:r.projectSuffix}).config}return typeof r.fileExtension=="string"&&(r.fileExtension=r.fileExtension.replace(/^\.+/,"")),r},Dd=function(t){if(!(t.schema??t.ajvOptions??t.rootSchema))return;if(t.schema&&typeof t.schema!="object")throw new TypeError("The `schema` option must be an object.");const r=IE.default,n=new y_.Ajv2020({allErrors:!0,useDefaults:!0,...t.ajvOptions});r(n);const s={...t.rootSchema,type:"object",properties:t.schema};Be(this,Kt,n.compile(s)),Pt(this,Oe,Fd).call(this,t.schema)},Fd=function(t){const r=Object.entries(t??{});for(const[n,s]of r){if(!s||typeof s!="object"||!Object.hasOwn(s,"default"))continue;const{default:o}=s;o!==void 0&&(ne(this,Qe)[n]=o)}},Ld=function(t){t.defaults&&Object.assign(ne(this,Qe),t.defaults)},zd=function(t){t.serialize&&(this._serialize=t.serialize),t.deserialize&&(this._deserialize=t.deserialize)},Vd=function(t){const r=typeof t.fileExtension=="string"?t.fileExtension:void 0,n=r?`.${r}`:"";return de.resolve(t.cwd,`${t.configName??"config"}${n}`)},Ud=function(t){if(t.migrations){Pt(this,Oe,qd).call(this,t),this._validate(this.store);return}const r=this.store,n=Object.assign(Vt(),t.defaults??{},r);this._validate(n);try{ec.deepEqual(r,n)}catch{this.store=n}},qd=function(t){const{migrations:r,projectVersion:n}=t;if(r){if(!n)throw new Error("Please specify the `projectVersion` option.");Be(this,_r,!0);try{const s=this.store,o=Object.assign(Vt(),t.defaults??{},s);try{ec.deepEqual(s,o)}catch{this._write(o)}this._migrate(r,n,t.beforeEachMigration)}finally{Be(this,_r,!1)}}};const{app:ms,ipcMain:Ho,shell:VP}=C;let bl=!1;const Sl=()=>{if(!Ho||!ms)throw new Error("Electron Store: You need to call `.initRenderer()` from the main process.");const e={defaultCwd:ms.getPath("userData"),appVersion:ms.getVersion()};return bl||(Ho.on("electron-store-get-data",t=>{t.returnValue=e}),bl=!0),e};class Gd extends zP{constructor(t){let r,n;if(_e.type==="renderer"){const s=C.ipcRenderer.sendSync("electron-store-get-data");if(!s)throw new Error("Electron Store: You need to call `.initRenderer()` from the main process.");({defaultCwd:r,appVersion:n}=s)}else Ho&&ms&&({defaultCwd:r,appVersion:n}=Sl());t={name:"config",...t},t.projectVersion||(t.projectVersion=n),t.cwd?t.cwd=de.isAbsolute(t.cwd)?t.cwd:de.join(r,t.cwd):t.cwd=r,t.configName=t.name,delete t.name,super(t)}static initRenderer(){Sl()}async openInEditor(){const t=await VP.openPath(this.path);if(t)throw new Error(t)}}const Xe={FILE_TYPE:"files",DIR_TYPE:"directories",FILE_DIR_TYPE:"files_directories",EVERYTHING_TYPE:"all"},Wo={root:".",fileFilter:e=>!0,directoryFilter:e=>!0,type:Xe.FILE_TYPE,lstat:!1,depth:2147483648,alwaysStat:!1,highWaterMark:4096};Object.freeze(Wo);const Kd="READDIRP_RECURSIVE_ERROR",UP=new Set(["ENOENT","EPERM","EACCES","ELOOP",Kd]),Pl=[Xe.DIR_TYPE,Xe.EVERYTHING_TYPE,Xe.FILE_DIR_TYPE,Xe.FILE_TYPE],qP=new Set([Xe.DIR_TYPE,Xe.EVERYTHING_TYPE,Xe.FILE_DIR_TYPE]),GP=new Set([Xe.EVERYTHING_TYPE,Xe.FILE_DIR_TYPE,Xe.FILE_TYPE]),KP=e=>UP.has(e.code),HP=process.platform==="win32",Nl=e=>!0,Rl=e=>{if(e===void 0)return Nl;if(typeof e=="function")return e;if(typeof e=="string"){const t=e.trim();return r=>r.basename===t}if(Array.isArray(e)){const t=e.map(r=>r.trim());return r=>t.some(n=>r.basename===n)}return Nl};class WP extends af.Readable{constructor(r={}){super({objectMode:!0,autoDestroy:!0,highWaterMark:r.highWaterMark});J(this,"parents");J(this,"reading");J(this,"parent");J(this,"_stat");J(this,"_maxDepth");J(this,"_wantsDir");J(this,"_wantsFile");J(this,"_wantsEverything");J(this,"_root");J(this,"_isDirent");J(this,"_statsProp");J(this,"_rdOptions");J(this,"_fileFilter");J(this,"_directoryFilter");const n={...Wo,...r},{root:s,type:o}=n;this._fileFilter=Rl(n.fileFilter),this._directoryFilter=Rl(n.directoryFilter);const a=n.lstat?He.lstat:He.stat;HP?this._stat=i=>a(i,{bigint:!0}):this._stat=a,this._maxDepth=n.depth!=null&&Number.isSafeInteger(n.depth)?n.depth:Wo.depth,this._wantsDir=o?qP.has(o):!1,this._wantsFile=o?GP.has(o):!1,this._wantsEverything=o===Xe.EVERYTHING_TYPE,this._root=de.resolve(s),this._isDirent=!n.alwaysStat,this._statsProp=this._isDirent?"dirent":"stats",this._rdOptions={encoding:"utf8",withFileTypes:this._isDirent},this.parents=[this._exploreDir(s,1)],this.reading=!1,this.parent=void 0}async _read(r){if(!this.reading){this.reading=!0;try{for(;!this.destroyed&&r>0;){const n=this.parent,s=n&&n.files;if(s&&s.length>0){const{path:o,depth:a}=n,i=s.splice(0,r).map(d=>this._formatEntry(d,o)),c=await Promise.all(i);for(const d of c){if(!d)continue;if(this.destroyed)return;const u=await this._getEntryType(d);u==="directory"&&this._directoryFilter(d)?(a<=this._maxDepth&&this.parents.push(this._exploreDir(d.fullPath,a+1)),this._wantsDir&&(this.push(d),r--)):(u==="file"||this._includeAsFile(d))&&this._fileFilter(d)&&this._wantsFile&&(this.push(d),r--)}}else{const o=this.parents.pop();if(!o){this.push(null);break}if(this.parent=await o,this.destroyed)return}}}catch(n){this.destroy(n)}finally{this.reading=!1}}}async _exploreDir(r,n){let s;try{s=await He.readdir(r,this._rdOptions)}catch(o){this._onError(o)}return{files:s,depth:n,path:r}}async _formatEntry(r,n){let s;const o=this._isDirent?r.name:r;try{const a=de.resolve(de.join(n,o));s={path:de.relative(this._root,a),fullPath:a,basename:o},s[this._statsProp]=this._isDirent?r:await this._stat(a)}catch(a){this._onError(a);return}return s}_onError(r){KP(r)&&!this.destroyed?this.emit("warn",r):this.destroy(r)}async _getEntryType(r){if(!r&&this._statsProp in r)return"";const n=r[this._statsProp];if(n.isFile())return"file";if(n.isDirectory())return"directory";if(n&&n.isSymbolicLink()){const s=r.fullPath;try{const o=await He.realpath(s),a=await He.lstat(o);if(a.isFile())return"file";if(a.isDirectory()){const i=o.length;if(s.startsWith(o)&&s.substr(i,1)===de.sep){const c=new Error(`Circular symlink detected: "${s}" points to "${o}"`);return c.code=Kd,this._onError(c)}return"directory"}}catch(o){return this._onError(o),""}}}_includeAsFile(r){const n=r&&r[this._statsProp];return n&&this._wantsEverything&&!n.isDirectory()}}function xP(e,t={}){let r=t.entryType||t.type;if(r==="both"&&(r=Xe.FILE_DIR_TYPE),r&&(t.type=r),e){if(typeof e!="string")throw new TypeError("readdirp: root argument must be a string. Usage: readdirp(root, options)");if(r&&!Pl.includes(r))throw new Error(`readdirp: Invalid type passed. Use one of ${Pl.join(", ")}`)}else throw new Error("readdirp: root argument is required. Usage: readdirp(root, options)");return t.root=e,new WP(t)}const BP="data",Hd="end",YP="close",Zi=()=>{},Js=process.platform,Wd=Js==="win32",JP=Js==="darwin",XP=Js==="linux",ZP=Js==="freebsd",QP=Zo.type()==="OS400",ve={ALL:"all",READY:"ready",ADD:"add",CHANGE:"change",ADD_DIR:"addDir",UNLINK:"unlink",UNLINK_DIR:"unlinkDir",RAW:"raw",ERROR:"error"},it=ve,eN="watch",tN={lstat:He.lstat,stat:He.stat},wr="listeners",ps="errHandlers",Vr="rawEmitters",rN=[wr,ps,Vr],nN=new Set(["3dm","3ds","3g2","3gp","7z","a","aac","adp","afdesign","afphoto","afpub","ai","aif","aiff","alz","ape","apk","appimage","ar","arj","asf","au","avi","bak","baml","bh","bin","bk","bmp","btif","bz2","bzip2","cab","caf","cgm","class","cmx","cpio","cr2","cur","dat","dcm","deb","dex","djvu","dll","dmg","dng","doc","docm","docx","dot","dotm","dra","DS_Store","dsk","dts","dtshd","dvb","dwg","dxf","ecelp4800","ecelp7470","ecelp9600","egg","eol","eot","epub","exe","f4v","fbs","fh","fla","flac","flatpak","fli","flv","fpx","fst","fvt","g3","gh","gif","graffle","gz","gzip","h261","h263","h264","icns","ico","ief","img","ipa","iso","jar","jpeg","jpg","jpgv","jpm","jxr","key","ktx","lha","lib","lvp","lz","lzh","lzma","lzo","m3u","m4a","m4v","mar","mdi","mht","mid","midi","mj2","mka","mkv","mmr","mng","mobi","mov","movie","mp3","mp4","mp4a","mpeg","mpg","mpga","mxu","nef","npx","numbers","nupkg","o","odp","ods","odt","oga","ogg","ogv","otf","ott","pages","pbm","pcx","pdb","pdf","pea","pgm","pic","png","pnm","pot","potm","potx","ppa","ppam","ppm","pps","ppsm","ppsx","ppt","pptm","pptx","psd","pya","pyc","pyo","pyv","qt","rar","ras","raw","resources","rgb","rip","rlc","rmf","rmvb","rpm","rtf","rz","s3m","s7z","scpt","sgi","shar","snap","sil","sketch","slk","smv","snk","so","stl","suo","sub","swf","tar","tbz","tbz2","tga","tgz","thmx","tif","tiff","tlz","ttc","ttf","txz","udf","uvh","uvi","uvm","uvp","uvs","uvu","viv","vob","war","wav","wax","wbmp","wdp","weba","webm","webp","whl","wim","wm","wma","wmv","wmx","woff","woff2","wrm","wvx","xbm","xif","xla","xlam","xls","xlsb","xlsm","xlsx","xlt","xltm","xltx","xm","xmind","xpi","xpm","xwd","xz","z","zip","zipx"]),sN=e=>nN.has(Z.extname(e).slice(1).toLowerCase()),xo=(e,t)=>{e instanceof Set?e.forEach(t):t(e)},Sn=(e,t,r)=>{let n=e[t];n instanceof Set||(e[t]=n=new Set([n])),n.add(r)},oN=e=>t=>{const r=e[t];r instanceof Set?r.clear():delete e[t]},Pn=(e,t,r)=>{const n=e[t];n instanceof Set?n.delete(r):n===r&&delete e[t]},xd=e=>e instanceof Set?e.size===0:!e,ys=new Map;function Ol(e,t,r,n,s){const o=(a,i)=>{r(e),s(a,i,{watchedPath:e}),i&&e!==i&&$s(Z.resolve(e,i),wr,Z.join(e,i))};try{return Q.watch(e,{persistent:t.persistent},o)}catch(a){n(a);return}}const $s=(e,t,r,n,s)=>{const o=ys.get(e);o&&xo(o[t],a=>{a(r,n,s)})},aN=(e,t,r,n)=>{const{listener:s,errHandler:o,rawEmitter:a}=n;let i=ys.get(t),c;if(!r.persistent)return c=Ol(e,r,s,o,a),c?c.close.bind(c):void 0;if(i)Sn(i,wr,s),Sn(i,ps,o),Sn(i,Vr,a);else{if(c=Ol(e,r,$s.bind(null,t,wr),o,$s.bind(null,t,Vr)),!c)return;c.on(it.ERROR,async d=>{const u=$s.bind(null,t,ps);if(i&&(i.watcherUnusable=!0),Wd&&d.code==="EPERM")try{await(await He.open(e,"r")).close(),u(d)}catch{}else u(d)}),i={listeners:s,errHandlers:o,rawEmitters:a,watcher:c},ys.set(t,i)}return()=>{Pn(i,wr,s),Pn(i,ps,o),Pn(i,Vr,a),xd(i.listeners)&&(i.watcher.close(),ys.delete(t),rN.forEach(oN(i)),i.watcher=void 0,Object.freeze(i))}},So=new Map,iN=(e,t,r,n)=>{const{listener:s,rawEmitter:o}=n;let a=So.get(t);const i=a&&a.options;return i&&(i.persistent<r.persistent||i.interval>r.interval)&&(Q.unwatchFile(t),a=void 0),a?(Sn(a,wr,s),Sn(a,Vr,o)):(a={listeners:s,rawEmitters:o,options:r,watcher:Q.watchFile(t,r,(c,d)=>{xo(a.rawEmitters,f=>{f(it.CHANGE,t,{curr:c,prev:d})});const u=c.mtimeMs;(c.size!==d.size||u>d.mtimeMs||u===0)&&xo(a.listeners,f=>f(e,c))})},So.set(t,a)),()=>{Pn(a,wr,s),Pn(a,Vr,o),xd(a.listeners)&&(So.delete(t),Q.unwatchFile(t),a.options=a.watcher=void 0,Object.freeze(a))}};class cN{constructor(t){J(this,"fsw");J(this,"_boundHandleError");this.fsw=t,this._boundHandleError=r=>t._handleError(r)}_watchWithNodeFs(t,r){const n=this.fsw.options,s=Z.dirname(t),o=Z.basename(t);this.fsw._getWatchedDir(s).add(o);const i=Z.resolve(t),c={persistent:n.persistent};r||(r=Zi);let d;if(n.usePolling){const u=n.interval!==n.binaryInterval;c.interval=u&&sN(o)?n.binaryInterval:n.interval,d=iN(t,i,c,{listener:r,rawEmitter:this.fsw._emitRaw})}else d=aN(t,i,c,{listener:r,errHandler:this._boundHandleError,rawEmitter:this.fsw._emitRaw});return d}_handleFile(t,r,n){if(this.fsw.closed)return;const s=Z.dirname(t),o=Z.basename(t),a=this.fsw._getWatchedDir(s);let i=r;if(a.has(o))return;const c=async(u,f)=>{if(this.fsw._throttle(eN,t,5)){if(!f||f.mtimeMs===0)try{const v=await He.stat(t);if(this.fsw.closed)return;const y=v.atimeMs,w=v.mtimeMs;if((!y||y<=w||w!==i.mtimeMs)&&this.fsw._emit(it.CHANGE,t,v),(JP||XP||ZP)&&i.ino!==v.ino){this.fsw._closeFile(u),i=v;const g=this._watchWithNodeFs(t,c);g&&this.fsw._addPathCloser(u,g)}else i=v}catch{this.fsw._remove(s,o)}else if(a.has(o)){const v=f.atimeMs,y=f.mtimeMs;(!v||v<=y||y!==i.mtimeMs)&&this.fsw._emit(it.CHANGE,t,f),i=f}}},d=this._watchWithNodeFs(t,c);if(!(n&&this.fsw.options.ignoreInitial)&&this.fsw._isntIgnored(t)){if(!this.fsw._throttle(it.ADD,t,0))return;this.fsw._emit(it.ADD,t,r)}return d}async _handleSymlink(t,r,n,s){if(this.fsw.closed)return;const o=t.fullPath,a=this.fsw._getWatchedDir(r);if(!this.fsw.options.followSymlinks){this.fsw._incrReadyCount();let i;try{i=await He.realpath(n)}catch{return this.fsw._emitReady(),!0}return this.fsw.closed?void 0:(a.has(s)?this.fsw._symlinkPaths.get(o)!==i&&(this.fsw._symlinkPaths.set(o,i),this.fsw._emit(it.CHANGE,n,t.stats)):(a.add(s),this.fsw._symlinkPaths.set(o,i),this.fsw._emit(it.ADD,n,t.stats)),this.fsw._emitReady(),!0)}if(this.fsw._symlinkPaths.has(o))return!0;this.fsw._symlinkPaths.set(o,!0)}_handleRead(t,r,n,s,o,a,i){t=Z.join(t,"");const c=s?`${t}:${s}`:t;if(i=this.fsw._throttle("readdir",c,1e3),!i)return;const d=this.fsw._getWatchedDir(n.path),u=new Set;let f=this.fsw._readdirp(t,{fileFilter:v=>n.filterPath(v),directoryFilter:v=>n.filterDir(v)});if(f)return f.on(BP,async v=>{if(this.fsw.closed){f=void 0;return}const y=v.path;let w=Z.join(t,y);if(u.add(y),!(v.stats.isSymbolicLink()&&await this._handleSymlink(v,t,w,y))){if(this.fsw.closed){f=void 0;return}(y===s||!s&&!d.has(y))&&(this.fsw._incrReadyCount(),w=Z.join(o,Z.relative(o,w)),this._addToNodeFs(w,r,n,a+1))}}).on(it.ERROR,this._boundHandleError),new Promise((v,y)=>{if(!f)return y();f.once(Hd,()=>{if(this.fsw.closed){f=void 0;return}const w=i?i.clear():!1;v(void 0),d.getChildren().filter(g=>g!==t&&!u.has(g)).forEach(g=>{this.fsw._remove(t,g)}),f=void 0,w&&this._handleRead(t,!1,n,s,o,a,i)})})}async _handleDir(t,r,n,s,o,a,i){const c=this.fsw._getWatchedDir(Z.dirname(t)),d=c.has(Z.basename(t));!(n&&this.fsw.options.ignoreInitial)&&!o&&!d&&this.fsw._emit(it.ADD_DIR,t,r),c.add(Z.basename(t)),this.fsw._getWatchedDir(t);let u,f;const v=this.fsw.options.depth;if((v==null||s<=v)&&!this.fsw._symlinkPaths.has(i)){if(!o&&(await this._handleRead(t,n,a,o,t,s,u),this.fsw.closed))return;f=this._watchWithNodeFs(t,(y,w)=>{w&&w.mtimeMs===0||this._handleRead(y,!1,a,o,t,s,u)})}return f}async _addToNodeFs(t,r,n,s,o){const a=this.fsw._emitReady;if(this.fsw._isIgnored(t)||this.fsw.closed)return a(),!1;const i=this.fsw._getWatchHelpers(t);n&&(i.filterPath=c=>n.filterPath(c),i.filterDir=c=>n.filterDir(c));try{const c=await tN[i.statMethod](i.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(i.watchPath,c))return a(),!1;const d=this.fsw.options.followSymlinks;let u;if(c.isDirectory()){const f=Z.resolve(t),v=d?await He.realpath(t):t;if(this.fsw.closed||(u=await this._handleDir(i.watchPath,c,r,s,o,i,v),this.fsw.closed))return;f!==v&&v!==void 0&&this.fsw._symlinkPaths.set(f,v)}else if(c.isSymbolicLink()){const f=d?await He.realpath(t):t;if(this.fsw.closed)return;const v=Z.dirname(i.watchPath);if(this.fsw._getWatchedDir(v).add(i.watchPath),this.fsw._emit(it.ADD,i.watchPath,c),u=await this._handleDir(v,c,r,s,t,i,f),this.fsw.closed)return;f!==void 0&&this.fsw._symlinkPaths.set(Z.resolve(t),f)}else u=this._handleFile(i.watchPath,c,r);return a(),u&&this.fsw._addPathCloser(t,u),!1}catch(c){if(this.fsw._handleError(c))return a(),t}}}/*! chokidar - MIT License (c) 2012 Paul Miller (paulmillr.com) */const Po="/",lN="//",Bd=".",uN="..",dN="string",fN=/\\/g,Yd=/\/\//g,hN=/\..*\.(sw[px])$|~$|\.subl.*\.tmp/,mN=/^\.[/\\]/;function Is(e){return Array.isArray(e)?e:[e]}const No=e=>typeof e=="object"&&e!==null&&!(e instanceof RegExp);function pN(e){return typeof e=="function"?e:typeof e=="string"?t=>e===t:e instanceof RegExp?t=>e.test(t):typeof e=="object"&&e!==null?t=>{if(e.path===t)return!0;if(e.recursive){const r=Z.relative(e.path,t);return r?!r.startsWith("..")&&!Z.isAbsolute(r):!1}return!1}:()=>!1}function yN(e){if(typeof e!="string")throw new Error("string expected");e=Z.normalize(e),e=e.replace(/\\/g,"/");let t=!1;return e.startsWith("//")&&(t=!0),e=e.replace(Yd,"/"),t&&(e="/"+e),e}function $N(e,t,r){const n=yN(t);for(let s=0;s<e.length;s++){const o=e[s];if(o(n,r))return!0}return!1}function gN(e,t){if(e==null)throw new TypeError("anymatch: specify first argument");const n=Is(e).map(s=>pN(s));return(s,o)=>$N(n,s,o)}const Il=e=>{const t=Is(e).flat();if(!t.every(r=>typeof r===dN))throw new TypeError(`Non-string provided as watch path: ${t}`);return t.map(Jd)},Tl=e=>{let t=e.replace(fN,Po),r=!1;return t.startsWith(lN)&&(r=!0),t=t.replace(Yd,Po),r&&(t=Po+t),t},Jd=e=>Tl(Z.normalize(Tl(e))),jl=(e="")=>t=>typeof t=="string"?Jd(Z.isAbsolute(t)?t:Z.join(e,t)):t,_N=(e,t)=>Z.isAbsolute(e)?e:Z.join(t,e),vN=Object.freeze(new Set);class wN{constructor(t,r){J(this,"path");J(this,"_removeWatcher");J(this,"items");this.path=t,this._removeWatcher=r,this.items=new Set}add(t){const{items:r}=this;r&&t!==Bd&&t!==uN&&r.add(t)}async remove(t){const{items:r}=this;if(!r||(r.delete(t),r.size>0))return;const n=this.path;try{await He.readdir(n)}catch{this._removeWatcher&&this._removeWatcher(Z.dirname(n),Z.basename(n))}}has(t){const{items:r}=this;if(r)return r.has(t)}getChildren(){const{items:t}=this;return t?[...t.values()]:[]}dispose(){this.items.clear(),this.path="",this._removeWatcher=Zi,this.items=vN,Object.freeze(this)}}const EN="stat",bN="lstat";class SN{constructor(t,r,n){J(this,"fsw");J(this,"path");J(this,"watchPath");J(this,"fullWatchPath");J(this,"dirParts");J(this,"followSymlinks");J(this,"statMethod");this.fsw=n;const s=t;this.path=t=t.replace(mN,""),this.watchPath=s,this.fullWatchPath=Z.resolve(s),this.dirParts=[],this.dirParts.forEach(o=>{o.length>1&&o.pop()}),this.followSymlinks=r,this.statMethod=r?EN:bN}entryPath(t){return Z.join(this.watchPath,Z.relative(this.watchPath,t.fullPath))}filterPath(t){const{stats:r}=t;if(r&&r.isSymbolicLink())return this.filterDir(t);const n=this.entryPath(t);return this.fsw._isntIgnored(n,r)&&this.fsw._hasReadPermissions(r)}filterDir(t){return this.fsw._isntIgnored(this.entryPath(t),t.stats)}}class PN extends of.EventEmitter{constructor(r={}){super();J(this,"closed");J(this,"options");J(this,"_closers");J(this,"_ignoredPaths");J(this,"_throttled");J(this,"_streams");J(this,"_symlinkPaths");J(this,"_watched");J(this,"_pendingWrites");J(this,"_pendingUnlinks");J(this,"_readyCount");J(this,"_emitReady");J(this,"_closePromise");J(this,"_userIgnored");J(this,"_readyEmitted");J(this,"_emitRaw");J(this,"_boundRemove");J(this,"_nodeFsHandler");this.closed=!1,this._closers=new Map,this._ignoredPaths=new Set,this._throttled=new Map,this._streams=new Set,this._symlinkPaths=new Map,this._watched=new Map,this._pendingWrites=new Map,this._pendingUnlinks=new Map,this._readyCount=0,this._readyEmitted=!1;const n=r.awaitWriteFinish,s={stabilityThreshold:2e3,pollInterval:100},o={persistent:!0,ignoreInitial:!1,ignorePermissionErrors:!1,interval:100,binaryInterval:300,followSymlinks:!0,usePolling:!1,atomic:!0,...r,ignored:r.ignored?Is(r.ignored):Is([]),awaitWriteFinish:n===!0?s:typeof n=="object"?{...s,...n}:!1};QP&&(o.usePolling=!0),o.atomic===void 0&&(o.atomic=!o.usePolling);const a=process.env.CHOKIDAR_USEPOLLING;if(a!==void 0){const d=a.toLowerCase();d==="false"||d==="0"?o.usePolling=!1:d==="true"||d==="1"?o.usePolling=!0:o.usePolling=!!d}const i=process.env.CHOKIDAR_INTERVAL;i&&(o.interval=Number.parseInt(i,10));let c=0;this._emitReady=()=>{c++,c>=this._readyCount&&(this._emitReady=Zi,this._readyEmitted=!0,process.nextTick(()=>this.emit(ve.READY)))},this._emitRaw=(...d)=>this.emit(ve.RAW,...d),this._boundRemove=this._remove.bind(this),this.options=o,this._nodeFsHandler=new cN(this),Object.freeze(o)}_addIgnoredPath(r){if(No(r)){for(const n of this._ignoredPaths)if(No(n)&&n.path===r.path&&n.recursive===r.recursive)return}this._ignoredPaths.add(r)}_removeIgnoredPath(r){if(this._ignoredPaths.delete(r),typeof r=="string")for(const n of this._ignoredPaths)No(n)&&n.path===r&&this._ignoredPaths.delete(n)}add(r,n,s){const{cwd:o}=this.options;this.closed=!1,this._closePromise=void 0;let a=Il(r);return o&&(a=a.map(i=>_N(i,o))),a.forEach(i=>{this._removeIgnoredPath(i)}),this._userIgnored=void 0,this._readyCount||(this._readyCount=0),this._readyCount+=a.length,Promise.all(a.map(async i=>{const c=await this._nodeFsHandler._addToNodeFs(i,!s,void 0,0,n);return c&&this._emitReady(),c})).then(i=>{this.closed||i.forEach(c=>{c&&this.add(Z.dirname(c),Z.basename(n||c))})}),this}unwatch(r){if(this.closed)return this;const n=Il(r),{cwd:s}=this.options;return n.forEach(o=>{!Z.isAbsolute(o)&&!this._closers.has(o)&&(s&&(o=Z.join(s,o)),o=Z.resolve(o)),this._closePath(o),this._addIgnoredPath(o),this._watched.has(o)&&this._addIgnoredPath({path:o,recursive:!0}),this._userIgnored=void 0}),this}close(){if(this._closePromise)return this._closePromise;this.closed=!0,this.removeAllListeners();const r=[];return this._closers.forEach(n=>n.forEach(s=>{const o=s();o instanceof Promise&&r.push(o)})),this._streams.forEach(n=>n.destroy()),this._userIgnored=void 0,this._readyCount=0,this._readyEmitted=!1,this._watched.forEach(n=>n.dispose()),this._closers.clear(),this._watched.clear(),this._streams.clear(),this._symlinkPaths.clear(),this._throttled.clear(),this._closePromise=r.length?Promise.all(r).then(()=>{}):Promise.resolve(),this._closePromise}getWatched(){const r={};return this._watched.forEach((n,s)=>{const a=(this.options.cwd?Z.relative(this.options.cwd,s):s)||Bd;r[a]=n.getChildren().sort()}),r}emitWithAll(r,n){this.emit(r,...n),r!==ve.ERROR&&this.emit(ve.ALL,r,...n)}async _emit(r,n,s){if(this.closed)return;const o=this.options;Wd&&(n=Z.normalize(n)),o.cwd&&(n=Z.relative(o.cwd,n));const a=[n];s!=null&&a.push(s);const i=o.awaitWriteFinish;let c;if(i&&(c=this._pendingWrites.get(n)))return c.lastChange=new Date,this;if(o.atomic){if(r===ve.UNLINK)return this._pendingUnlinks.set(n,[r,...a]),setTimeout(()=>{this._pendingUnlinks.forEach((d,u)=>{this.emit(...d),this.emit(ve.ALL,...d),this._pendingUnlinks.delete(u)})},typeof o.atomic=="number"?o.atomic:100),this;r===ve.ADD&&this._pendingUnlinks.has(n)&&(r=ve.CHANGE,this._pendingUnlinks.delete(n))}if(i&&(r===ve.ADD||r===ve.CHANGE)&&this._readyEmitted){const d=(u,f)=>{u?(r=ve.ERROR,a[0]=u,this.emitWithAll(r,a)):f&&(a.length>1?a[1]=f:a.push(f),this.emitWithAll(r,a))};return this._awaitWriteFinish(n,i.stabilityThreshold,r,d),this}if(r===ve.CHANGE&&!this._throttle(ve.CHANGE,n,50))return this;if(o.alwaysStat&&s===void 0&&(r===ve.ADD||r===ve.ADD_DIR||r===ve.CHANGE)){const d=o.cwd?Z.join(o.cwd,n):n;let u;try{u=await He.stat(d)}catch{}if(!u||this.closed)return;a.push(u)}return this.emitWithAll(r,a),this}_handleError(r){const n=r&&r.code;return r&&n!=="ENOENT"&&n!=="ENOTDIR"&&(!this.options.ignorePermissionErrors||n!=="EPERM"&&n!=="EACCES")&&this.emit(ve.ERROR,r),r||this.closed}_throttle(r,n,s){this._throttled.has(r)||this._throttled.set(r,new Map);const o=this._throttled.get(r);if(!o)throw new Error("invalid throttle");const a=o.get(n);if(a)return a.count++,!1;let i;const c=()=>{const u=o.get(n),f=u?u.count:0;return o.delete(n),clearTimeout(i),u&&clearTimeout(u.timeoutObject),f};i=setTimeout(c,s);const d={timeoutObject:i,clear:c,count:0};return o.set(n,d),d}_incrReadyCount(){return this._readyCount++}_awaitWriteFinish(r,n,s,o){const a=this.options.awaitWriteFinish;if(typeof a!="object")return;const i=a.pollInterval;let c,d=r;this.options.cwd&&!Z.isAbsolute(r)&&(d=Z.join(this.options.cwd,r));const u=new Date,f=this._pendingWrites;function v(y){Q.stat(d,(w,g)=>{if(w||!f.has(r)){w&&w.code!=="ENOENT"&&o(w);return}const $=Number(new Date);y&&g.size!==y.size&&(f.get(r).lastChange=$);const m=f.get(r);$-m.lastChange>=n?(f.delete(r),o(void 0,g)):c=setTimeout(v,i,g)})}f.has(r)||(f.set(r,{lastChange:u,cancelWait:()=>(f.delete(r),clearTimeout(c),s)}),c=setTimeout(v,i))}_isIgnored(r,n){if(this.options.atomic&&hN.test(r))return!0;if(!this._userIgnored){const{cwd:s}=this.options,a=(this.options.ignored||[]).map(jl(s)),c=[...[...this._ignoredPaths].map(jl(s)),...a];this._userIgnored=gN(c)}return this._userIgnored(r,n)}_isntIgnored(r,n){return!this._isIgnored(r,n)}_getWatchHelpers(r){return new SN(r,this.options.followSymlinks,this)}_getWatchedDir(r){const n=Z.resolve(r);return this._watched.has(n)||this._watched.set(n,new wN(n,this._boundRemove)),this._watched.get(n)}_hasReadPermissions(r){return this.options.ignorePermissionErrors?!0:!!(Number(r.mode)&256)}_remove(r,n,s){const o=Z.join(r,n),a=Z.resolve(o);if(s=s??(this._watched.has(o)||this._watched.has(a)),!this._throttle("remove",o,100))return;!s&&this._watched.size===1&&this.add(r,n,!0),this._getWatchedDir(o).getChildren().forEach(y=>this._remove(o,y));const d=this._getWatchedDir(r),u=d.has(n);d.remove(n),this._symlinkPaths.has(a)&&this._symlinkPaths.delete(a);let f=o;if(this.options.cwd&&(f=Z.relative(this.options.cwd,o)),this.options.awaitWriteFinish&&this._pendingWrites.has(f)&&this._pendingWrites.get(f).cancelWait()===ve.ADD)return;this._watched.delete(o),this._watched.delete(a);const v=s?ve.UNLINK_DIR:ve.UNLINK;u&&!this._isIgnored(o)&&this._emit(v,o),this._closePath(o)}_closePath(r){this._closeFile(r);const n=Z.dirname(r);this._getWatchedDir(n).remove(Z.basename(r))}_closeFile(r){const n=this._closers.get(r);n&&(n.forEach(s=>s()),this._closers.delete(r))}_addPathCloser(r,n){if(!n)return;let s=this._closers.get(r);s||(s=[],this._closers.set(r,s)),s.push(n)}_readdirp(r,n){if(this.closed)return;const s={type:ve.ALL,alwaysStat:!0,lstat:!0,...n,depth:0};let o=xP(r,s);return this._streams.add(o),o.once(YP,()=>{o=void 0}),o.once(Hd,()=>{o&&(this._streams.delete(o),o=void 0)}),o}}function NN(e,t={}){const r=new PN(t);return r.add(e),r}const RN=process.mas===!0;process.platform!=="win32"&&(C.app.commandLine.appendSwitch("enable-features","Vulkan"),C.app.commandLine.appendSwitch("use-vulkan"),C.app.commandLine.appendSwitch("enable-unsafe-webgpu"));const Nn=process.env.VITE_DEV_SERVER_URL,he=new Gd({defaults:{vaultPath:null,vaultBookmark:null}});let ct=null;const ss=new Gd({name:"settings",defaults:{theme:"light",fontFamily:"system",fontSize:17,ollamaBaseUrl:"http://localhost:11434",ollamaEnabled:!0,preferredEngine:"ollama",autoFallback:!0,customSystemPrompt:"",promptTemplates:[],defaultFormat:"md",smartFormatConversion:!0}}),Bo={zh:{about:" {appName}",preferences:"...",services:"",hide:" {appName}",hideOthers:"",unhide:"",quit:" {appName}",file:"",newArticle:"",newFolder:"",closeWindow:"",edit:"",undo:"",redo:"",cut:"",copy:"",paste:"",pasteAndMatchStyle:"",delete:"",selectAll:"",view:"",focusMode:"",cycleEditorMode:"",reload:"",forceReload:"",devTools:"",actualSize:"",zoomIn:"",zoomOut:"",fullscreen:"",window:"",minimize:"",zoom:"",front:"",close:"",help:"",visitGitHub:" GitHub",openSettings:"",toggleFocusMode:"",showMainWindow:"",enableSmartAutocomplete:"",disableSmartAutocomplete:""},"zh-TW":{about:" {appName}",preferences:"...",services:"",hide:" {appName}",hideOthers:"",unhide:"",quit:" {appName}",file:"",newArticle:"",newFolder:"",closeWindow:"",edit:"",undo:"",redo:"",cut:"",copy:"",paste:"",pasteAndMatchStyle:"",delete:"",selectAll:"",view:"",focusMode:"",reload:"",forceReload:"",devTools:"",actualSize:"",zoomIn:"",zoomOut:"",fullscreen:"",window:"",minimize:"",zoom:"",front:"",close:"",help:"",visitGitHub:" GitHub",openSettings:"",toggleFocusMode:"",showMainWindow:"",enableSmartAutocomplete:"",disableSmartAutocomplete:""},en:{about:"About {appName}",preferences:"Preferences...",services:"Services",hide:"Hide {appName}",hideOthers:"Hide Others",unhide:"Show All",quit:"Quit {appName}",file:"File",newArticle:"New Article",newFolder:"New Folder",closeWindow:"Close Window",edit:"Edit",undo:"Undo",redo:"Redo",cut:"Cut",copy:"Copy",paste:"Paste",pasteAndMatchStyle:"Paste and Match Style",delete:"Delete",selectAll:"Select All",view:"View",focusMode:"Focus Mode",cycleEditorMode:"Cycle Editor Mode",reload:"Reload",forceReload:"Force Reload",devTools:"Developer Tools",actualSize:"Actual Size",zoomIn:"Zoom In",zoomOut:"Zoom Out",fullscreen:"Toggle Fullscreen",window:"Window",minimize:"Minimize",zoom:"Zoom",front:"Bring All to Front",close:"Close",help:"Help",visitGitHub:"Visit GitHub",openSettings:"Open Settings",toggleFocusMode:"Toggle Focus Mode",showMainWindow:"Show Main Window",enableSmartAutocomplete:"Enable Smart Autocomplete",disableSmartAutocomplete:"Disable Smart Autocomplete"},ja:{about:"{appName} ",preferences:"...",services:"",hide:"{appName} ",hideOthers:"",unhide:"",quit:"{appName} ",file:"",newArticle:"",newFolder:"",closeWindow:"",edit:"",undo:"",redo:"",cut:"",copy:"",paste:"",pasteAndMatchStyle:"",delete:"",selectAll:"",view:"",focusMode:"",reload:"",forceReload:"",devTools:"",actualSize:"",zoomIn:"",zoomOut:"",fullscreen:"",window:"",minimize:"",zoom:"/",front:"",close:"",help:"",visitGitHub:"GitHub ",openSettings:"",toggleFocusMode:"",showMainWindow:"",enableSmartAutocomplete:"",disableSmartAutocomplete:""},ko:{about:"{appName} ",preferences:"...",services:"",hide:"{appName} ",hideOthers:" ",unhide:" ",quit:"{appName} ",file:"",newArticle:" ",newFolder:" ",closeWindow:" ",edit:"",undo:" ",redo:" ",cut:"",copy:"",paste:"",pasteAndMatchStyle:"  ",delete:"",selectAll:" ",view:"",focusMode:" ",reload:" ",forceReload:"  ",devTools:" ",actualSize:" ",zoomIn:"",zoomOut:"",fullscreen:" ",window:"",minimize:"",zoom:"/",front:"  ",close:"",help:"",visitGitHub:"GitHub ",openSettings:" ",toggleFocusMode:"  ",showMainWindow:"  ",enableSmartAutocomplete:"  ",disableSmartAutocomplete:"  "},fr:{about:" propos de {appName}",preferences:"Prfrences...",services:"Services",hide:"Masquer {appName}",hideOthers:"Masquer les autres",unhide:"Tout afficher",quit:"Quitter {appName}",file:"Fichier",newArticle:"Nouvel Article",newFolder:"Nouveau Dossier",closeWindow:"Fermer la fentre",edit:"dition",undo:"Annuler",redo:"Rtablir",cut:"Couper",copy:"Copier",paste:"Coller",pasteAndMatchStyle:"Coller et adapter le style",delete:"Supprimer",selectAll:"Tout slectionner",view:"Prsentation",focusMode:"Mode Focus",reload:"Actualiser",forceReload:"Forcer l'actualisation",devTools:"Outils de dveloppement",actualSize:"Taille relle",zoomIn:"Zoom avant",zoomOut:"Zoom arrire",fullscreen:"Plein cran",window:"Fentre",minimize:"Rduire",zoom:"Zoom",front:"Tout ramener au premier plan",close:"Fermer",help:"Aide",visitGitHub:"Visiter GitHub",openSettings:"Ouvrir les Paramtres",toggleFocusMode:"Basculer Mode Focus",showMainWindow:"Afficher la fentre principale",enableSmartAutocomplete:"Activer Auto-compltion Intelligente",disableSmartAutocomplete:"Dsactiver Auto-compltion Intelligente"},de:{about:"ber {appName}",preferences:"Einstellungen...",services:"Dienste",hide:"{appName} ausblenden",hideOthers:"Andere ausblenden",unhide:"Alle einblenden",quit:"{appName} beenden",file:"Ablage",newArticle:"Neuer Artikel",newFolder:"Neuer Ordner",closeWindow:"Fenster schlieen",edit:"Bearbeiten",undo:"Widerrufen",redo:"Wiederholen",cut:"Ausschneiden",copy:"Kopieren",paste:"Einfgen",pasteAndMatchStyle:"Einsetzen und Stil anpassen",delete:"Lschen",selectAll:"Alles auswhlen",view:"Darstellung",focusMode:"Fokus-Modus",reload:"Neu laden",forceReload:"Neu laden erzwingen",devTools:"Entwicklertools",actualSize:"Tatschliche Gre",zoomIn:"Vergrern",zoomOut:"Verkleinern",fullscreen:"Vollbild",window:"Fenster",minimize:"Minimieren",zoom:"Zoomen",front:"Alle nach vorne bringen",close:"Schlieen",help:"Hilfe",visitGitHub:"GitHub besuchen",openSettings:"Einstellungen ffnen",toggleFocusMode:"Fokus-Modus umschalten",showMainWindow:"Hauptfenster anzeigen",enableSmartAutocomplete:"Intelligente Autovervollstndigung aktivieren",disableSmartAutocomplete:"Intelligente Autovervollstndigung deaktivieren"},es:{about:"Acerca de {appName}",preferences:"Preferencias...",services:"Servicios",hide:"Ocultar {appName}",hideOthers:"Ocultar otros",unhide:"Mostrar todo",quit:"Salir de {appName}",file:"Archivo",newArticle:"Nuevo Artculo",newFolder:"Nueva Carpeta",closeWindow:"Cerrar ventana",edit:"Edicin",undo:"Deshacer",redo:"Rehacer",cut:"Cortar",copy:"Copiar",paste:"Pegar",pasteAndMatchStyle:"Pegar y ajustar estilo",delete:"Eliminar",selectAll:"Seleccionar todo",view:"Vista",focusMode:"Modo Enfoque",reload:"Recargar",forceReload:"Forzar recarga",devTools:"Herramientas de desarrollo",actualSize:"Tamao real",zoomIn:"Ampliar",zoomOut:"Reducir",fullscreen:"Pantalla completa",window:"Ventana",minimize:"Minimizar",zoom:"Zoom",front:"Traer todo al frente",close:"Cerrar",help:"Ayuda",visitGitHub:"Visitar GitHub",openSettings:"Abrir Ajustes",toggleFocusMode:"Alternar Modo Enfoque",showMainWindow:"Mostrar ventana principal",enableSmartAutocomplete:"Activar Autocompletado Inteligente",disableSmartAutocomplete:"Desactivar Autocompletado Inteligente"}};function ON(){const e=C.app.getLocale(),t={"zh-CN":"zh","zh-Hans":"zh","zh-SG":"zh","zh-TW":"zh-TW","zh-Hant":"zh-TW","zh-HK":"zh-TW","zh-MO":"zh-TW",en:"en","en-US":"en","en-GB":"en","en-AU":"en","en-CA":"en",ja:"ja","ja-JP":"ja",ko:"ko","ko-KR":"ko",fr:"fr","fr-FR":"fr","fr-CA":"fr",de:"de","de-DE":"de","de-AT":"de","de-CH":"de",es:"es","es-ES":"es","es-MX":"es","es-AR":"es"};if(t[e])return t[e];const r=e.split("-")[0];return t[r]?t[r]:"en"}let Yo={menu:Bo.en};function Xd(e){const t=Bo[e];t?(Yo={menu:t},console.log(` : ${e}`)):(Yo={menu:Bo.en},console.log(`  ${e} `))}function X(e,t){const r=e.split(".");let n=Yo;for(const o of r)if(n&&typeof n=="object")n=n[o];else return e;let s=typeof n=="string"?n:e;return t&&Object.keys(t).forEach(o=>{s=s.replace(`{${o}}`,t[o])}),s}let Je=null;const IN=[".DS_Store",".git","node_modules",".zennote","*.swp","*.swo","*~"];let k=null,Zd=!0,Jo=null;const Qd=[".md",".markdown",".txt",".pdf",".docx",".jpg",".jpeg",".png",".gif",".webp"];function TN(){if(Nn)return null;const e=process.argv.slice(1);for(const t of e)if(!t.startsWith("-")&&q.existsSync(t)){const r=z.extname(t).toLowerCase();if(Qd.includes(r))return console.log(" :",t),t}return null}function ef(e){return e.startsWith(".")?!0:IN.some(t=>t.includes("*")?new RegExp("^"+t.replace(/\*/g,".*")+"$").test(e):e===t)}async function tf(e,t){const r=await q.promises.readdir(e,{withFileTypes:!0}),n=[];for(const s of r){if(ef(s.name))continue;const o=z.join(e,s.name),a=z.relative(t,o),i=await q.promises.stat(o);if(s.isDirectory()){const c=await tf(o,t);n.push({name:s.name,path:a,isDirectory:!0,children:c,modifiedAt:i.mtimeMs})}else{const c=z.extname(s.name).toLowerCase();[".txt",".md",".markdown",".pdf",".docx",".jpg",".jpeg",".png",".gif",".webp"].includes(c)&&n.push({name:s.name,path:a,isDirectory:!1,extension:c,modifiedAt:i.mtimeMs})}}return n.sort((s,o)=>s.isDirectory&&!o.isDirectory?-1:!s.isDirectory&&o.isDirectory?1:s.isDirectory&&o.isDirectory?s.name.localeCompare(o.name,"zh-CN"):(o.modifiedAt||0)-(s.modifiedAt||0))}function un(e){const t=z.join(e,".zennote"),r=z.join(t,"chats"),n=z.join(t,"settings");q.existsSync(t)||q.mkdirSync(t,{recursive:!0}),q.existsSync(r)||q.mkdirSync(r,{recursive:!0}),q.existsSync(n)||q.mkdirSync(n,{recursive:!0})}function jN(){if(C.ipcMain.handle("fs:getVaultPath",()=>{const e=he.get("vaultPath"),t=he.get("vaultBookmark");if(e){if(t&&!ct)try{ct=C.app.startAccessingSecurityScopedResource(t),console.log(" ")}catch(r){console.warn(" :",r)}if(!q.existsSync(e))return console.log(" Vault :",e),he.set("vaultPath",null),he.set("vaultBookmark",null),ct&&(ct(),ct=null),null}return e}),C.ipcMain.handle("fs:setVaultPath",(e,t)=>(he.set("vaultPath",t),un(t),!0)),C.ipcMain.handle("fs:selectDirectory",async()=>{const e=await C.dialog.showOpenDialog(k,{properties:["openDirectory","createDirectory"],securityScopedBookmarks:!0,title:"",buttonLabel:""});if(e.canceled||e.filePaths.length===0)return null;const t=e.filePaths[0];return e.bookmarks&&e.bookmarks.length>0&&(he.set("vaultBookmark",e.bookmarks[0]),console.log("  Security-Scoped Bookmark")),he.set("vaultPath",t),un(t),t}),C.ipcMain.handle("fs:disconnectVault",async()=>(ct&&(ct(),ct=null,console.log(" ")),he.delete("vaultPath"),he.delete("vaultBookmark"),!0)),C.ipcMain.handle("fs:readDirectory",async(e,t)=>{const r=t||he.get("vaultPath");if(!r)return[];try{return await tf(r,r)}catch(n){return console.error(":",n),[]}}),C.ipcMain.handle("fs:readFile",async(e,t)=>{const r=he.get("vaultPath");if(!r)throw new Error(" Vault ");const n=z.join(r,t);return await q.promises.readFile(n,"utf-8")}),C.ipcMain.handle("fs:writeFile",async(e,t,r)=>{const n=he.get("vaultPath");if(!n)throw new Error(" Vault ");const s=z.join(n,t),o=z.dirname(s);return q.existsSync(o)||q.mkdirSync(o,{recursive:!0}),await q.promises.writeFile(s,r,"utf-8"),!0}),C.ipcMain.handle("fs:createFile",async(e,t)=>{const r=he.get("vaultPath");if(!r)throw new Error(" Vault ");const n=z.join(r,t);return await q.promises.writeFile(n,"","utf-8"),!0}),C.ipcMain.handle("fs:createDirectory",async(e,t)=>{const r=he.get("vaultPath");if(!r)throw new Error(" Vault ");const n=z.join(r,t);return await q.promises.mkdir(n,{recursive:!0}),!0}),C.ipcMain.handle("fs:deleteFile",async(e,t)=>{const r=he.get("vaultPath");if(!r)throw new Error(" Vault ");const n=z.join(r,t);try{return await C.shell.trashItem(n),!0}catch(s){return console.error(":",s),(await q.promises.stat(n)).isDirectory()?await q.promises.rm(n,{recursive:!0,force:!0}):await q.promises.unlink(n),!0}}),C.ipcMain.handle("fs:renameFile",async(e,t,r)=>{const n=he.get("vaultPath");if(!n)throw new Error(" Vault ");const s=z.join(n,t),o=z.join(n,r);return await q.promises.rename(s,o),!0}),C.ipcMain.handle("fs:readFileBuffer",async(e,t)=>{const r=he.get("vaultPath");if(!r)throw new Error(" Vault ");const n=z.join(r,t);return(await q.promises.readFile(n)).buffer}),C.ipcMain.handle("fs:getExternalFilePath",()=>{const e=Jo||TN();return Jo=null,e}),C.ipcMain.handle("fs:copyExternalFile",async(e,t,r)=>{const n=he.get("vaultPath");if(!n)throw new Error(" Vault ");console.log(" :",t),console.log("  - :",r);const s=z.basename(t),o=z.extname(s).toLowerCase();if(![".txt",".md",".markdown",".pdf",".docx",".jpg",".jpeg",".png",".gif",".webp"].includes(o))throw console.log("  -  :",o),new Error(`: ${o}`);const i=t.replace(/\\/g,"/"),c=n.replace(/\\/g,"/");if(i.startsWith(c+"/"))return console.log("  -  Vault "),z.relative(n,t);const d=r?z.join(n,r):n;q.existsSync(d)||q.mkdirSync(d,{recursive:!0});const u=await q.promises.readFile(t),f=Nr.createHash("md5").update(u).digest("hex").substring(0,8);console.log("  -  hash:",f);const v=z.basename(s,o);let y=s,w=z.join(d,y);if(q.existsSync(w)){const $=await q.promises.readFile(w),m=Nr.createHash("md5").update($).digest("hex").substring(0,8);if(f===m)return console.log("  -  "),r?`${r}/${y}`:y;y=`${v}_${f}${o}`,w=z.join(d,y),console.log("  - :",y)}try{await q.promises.copyFile(t,w),console.log("  -  :",y)}catch($){throw console.error("  -  :",$),$}const g=r?`${r}/${y}`:y;return console.log("  - :",g),g}),C.ipcMain.handle("fs:saveImage",async(e,t,r,n)=>{const s=he.get("vaultPath");if(!s)throw new Error(" Vault ");const o=z.join(s,t,".images");q.existsSync(o)||q.mkdirSync(o,{recursive:!0});const a=r.match(/^data:image\/(\w+);base64,(.+)$/);if(!a)throw new Error("");const i=a[1]==="jpeg"?"jpg":a[1],c=Buffer.from(a[2],"base64"),d=Date.now(),u=n||`image_${d}.${i}`,f=z.join(o,u);return await q.promises.writeFile(f,c),`.images/${u}`}),C.ipcMain.handle("fs:selectAndCopyImage",async(e,t)=>{const r=he.get("vaultPath");if(!r)throw new Error(" Vault ");const n=await C.dialog.showOpenDialog(k,{properties:["openFile"],filters:[{name:"",extensions:["jpg","jpeg","png","gif","webp","svg"]}],title:"",buttonLabel:""});if(n.canceled||n.filePaths.length===0)return null;const s=n.filePaths[0],o=z.basename(s),a=s.replace(/\\/g,"/"),i=r.replace(/\\/g,"/");if(console.log(" :"),console.log("  - :",s),console.log("  - :",a),console.log("  - Vault :",r),console.log("  -  Vault :",i),console.log("  - :",t),console.log("  -  Vault :",a.startsWith(i+"/")),a.startsWith(i+"/")){z.relative(r,s);const $=t?z.join(r,t):r,m=z.relative($,s);return console.log("  -  Vault :",m),m.replace(/\\/g,"/")}console.log("  -  Vault  .images ");const c=z.join(r,t,".images");console.log("  - :",c),q.existsSync(c)||(console.log("  - :",c),q.mkdirSync(c,{recursive:!0}));const d=await q.promises.readFile(s),u=Nr.createHash("md5").update(d).digest("hex").substring(0,8);console.log("  -  hash:",u);try{const $=await q.promises.readdir(c);for(const m of $){const E=z.join(c,m),N=await q.promises.readFile(E),R=Nr.createHash("md5").update(N).digest("hex").substring(0,8);if(u===R)return console.log("  -  :",m),`.images/${m}`}}catch($){console.log("  - :",$)}const f=z.extname(o),y=`${z.basename(o,f)}_${u}${f}`,w=z.join(c,y);if(q.existsSync(w))return console.log("  -  :",y),`.images/${y}`;console.log("  - :",w);try{await q.promises.copyFile(s,w),console.log("  -  !")}catch($){throw console.error("  -  :",$),$}const g=`.images/${y}`;return console.log("  - :",g),g}),C.ipcMain.handle("fs:downloadAndSaveImage",async(e,t,r)=>{const n=he.get("vaultPath");if(!n)throw new Error(" Vault ");console.log(" :",t),console.log("  - :",r);try{const s=await C.net.fetch(t);if(!s.ok)throw new Error(`: HTTP ${s.status}`);const o=await s.arrayBuffer(),a=Buffer.from(o);let i="jpg";const c=s.headers.get("content-type");if(c)c.includes("png")?i="png":c.includes("gif")?i="gif":c.includes("webp")?i="webp":c.includes("svg")&&(i="svg");else{const w=new URL(t).pathname,g=z.extname(w).toLowerCase().replace(".","");["jpg","jpeg","png","gif","webp","svg"].includes(g)&&(i=g==="jpeg"?"jpg":g)}const d=z.join(n,r,".images");q.existsSync(d)||q.mkdirSync(d,{recursive:!0});const u=Nr.createHash("md5").update(a).digest("hex").substring(0,8);console.log("  -  hash:",u);try{const w=await q.promises.readdir(d);for(const g of w){const $=z.join(d,g),m=await q.promises.readFile($),E=Nr.createHash("md5").update(m).digest("hex").substring(0,8);if(u===E)return console.log("  -  :",g),`.images/${g}`}}catch(w){console.log("  - :",w)}const v=`web_${Date.now()}_${u}.${i}`,y=z.join(d,v);return await q.promises.writeFile(y,a),console.log("  -  :",v),`.images/${v}`}catch(s){throw console.error("  -  :",s),s}}),C.ipcMain.handle("fs:isImageReferenced",async(e,t,r)=>{const n=he.get("vaultPath");if(!n)return!1;const s=z.basename(t),o=z.dirname(t),a=z.dirname(o),i=a==="."?n:z.join(n,a);console.log(` : ${s}`),console.log(`  - : ${i}`);try{const c=await q.promises.readdir(i);for(const d of c){if(r&&d===z.basename(r)){console.log(`  - : ${d}`);continue}if(!d.endsWith(".md")&&!d.endsWith(".txt"))continue;const u=z.join(i,d);if((await q.promises.stat(u)).isDirectory())continue;if((await q.promises.readFile(u,"utf-8")).includes(s))return console.log(`  -  : ${d}`),!0}}catch(c){console.error(":",c)}return console.log("  -  "),!1}),C.ipcMain.handle("fs:deleteUnreferencedImage",async(e,t)=>{const r=he.get("vaultPath");if(!r)return!1;const n=z.join(r,t);if(q.existsSync(n))try{return await q.promises.unlink(n),console.log(" :",t),!0}catch(s){return console.error(":",s),!1}return!1}),C.ipcMain.handle("chat:load",async(e,t)=>{const r=he.get("vaultPath");if(!r)return[];const n=Buffer.from(t).toString("base64").replace(/[\/+=]/g,"_"),s=z.join(r,".zennote","chats",`${n}.json`);try{const o=await q.promises.readFile(s,"utf-8");return JSON.parse(o)}catch{return[]}}),C.ipcMain.handle("chat:save",async(e,t,r)=>{const n=he.get("vaultPath");if(!n)return!1;un(n);const s=Buffer.from(t).toString("base64").replace(/[\/+=]/g,"_"),o=z.join(n,".zennote","chats",`${s}.json`);return await q.promises.writeFile(o,JSON.stringify(r,null,2),"utf-8"),!0}),C.ipcMain.handle("chat:deleteAll",async()=>{const e=he.get("vaultPath");if(!e)return!1;const t=z.join(e,".zennote","chats");try{if(q.existsSync(t)){const r=await q.promises.readdir(t);for(const n of r)n.endsWith(".json")&&await q.promises.unlink(z.join(t,n));console.log(" :",r.length,"")}return!0}catch(r){return console.error(":",r),!1}}),C.ipcMain.handle("export-markdown-to-pdf",async(e,t)=>{const{htmlContent:r,outputPath:n,title:s}=t,o=new C.BrowserWindow({width:800,height:600,show:!1,webPreferences:{nodeIntegration:!1,contextIsolation:!0}});try{const a=`
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>${s}</title>
    <style>
        /* PDF  */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            font-size: 14px;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 60px;
        }
        h1, h2, h3, h4, h5, h6 { 
            margin-top: 24px; 
            margin-bottom: 16px; 
            font-weight: 600;
            line-height: 1.25;
        }
        h1 { font-size: 2em; border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; }
        h2 { font-size: 1.5em; border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; }
        h3 { font-size: 1.25em; }
        h4 { font-size: 1em; }
        h5 { font-size: 0.875em; }
        h6 { font-size: 0.85em; color: #6a737d; }
        code { 
            background: #f6f8fa; 
            padding: 2px 6px; 
            border-radius: 3px; 
            font-family: 'SF Mono', Monaco, 'Consolas', 'Liberation Mono', 'Courier New', monospace;
            font-size: 85%;
        }
        pre { 
            background: #f6f8fa; 
            padding: 16px; 
            border-radius: 6px; 
            overflow-x: auto;
            line-height: 1.45;
        }
        pre code { 
            background: none; 
            padding: 0; 
        }
        blockquote { 
            border-left: 4px solid #dfe2e5; 
            padding: 0 16px; 
            color: #6a737d; 
            margin: 16px 0;
        }
        table { 
            border-collapse: collapse; 
            width: 100%; 
            margin: 16px 0;
            display: table;
        }
        th, td { 
            border: 1px solid #dfe2e5; 
            padding: 8px 13px; 
            text-align: left;
        }
        th { 
            background: #f6f8fa; 
            font-weight: 600;
        }
        img { 
            max-width: 100%; 
            height: auto; 
            display: block;
            margin: 16px 0;
        }
        a { 
            color: #0366d6; 
            text-decoration: none; 
        }
        a:hover { 
            text-decoration: underline; 
        }
        ul, ol { 
            padding-left: 2em; 
            margin: 16px 0;
        }
        li { 
            margin: 4px 0; 
        }
        hr { 
            border: 0; 
            border-top: 2px solid #eaecef; 
            margin: 24px 0; 
        }
        p { 
            margin: 16px 0; 
        }
        /*  */
        input[type="checkbox"] {
            margin-right: 6px;
        }
    </style>
</head>
<body>
    ${r}
</body>
</html>`;await o.loadURL(`data:text/html;charset=utf-8,${encodeURIComponent(a)}`),await new Promise(f=>setTimeout(f,500));const i=await o.webContents.printToPDF({printBackground:!0,pageSize:"A4",margins:{top:.5,bottom:.5,left:.5,right:.5}}),c=he.get("vaultPath");if(!c)throw new Error(" Vault ");const d=z.join(c,n),u=z.dirname(d);return q.existsSync(u)||q.mkdirSync(u,{recursive:!0}),await q.promises.writeFile(d,i),console.log(" PDF :",d),{success:!0}}catch(a){return console.error(" PDF :",a),{success:!1,error:a instanceof Error?a.message:""}}finally{o.close()}}),C.ipcMain.handle("fs:watch",(e,t)=>{const r=t||he.get("vaultPath");return r?(Je&&Je.close(),Je=NN(r,{ignored:n=>{const s=z.basename(n);return ef(s)},persistent:!0,ignoreInitial:!0,depth:10}),Je.on("add",n=>{const s=z.relative(r,n);k==null||k.webContents.send("fs:change",{type:"add",path:s})}),Je.on("unlink",n=>{const s=z.relative(r,n);k==null||k.webContents.send("fs:change",{type:"unlink",path:s})}),Je.on("change",n=>{const s=z.relative(r,n);k==null||k.webContents.send("fs:change",{type:"change",path:s})}),Je.on("addDir",n=>{const s=z.relative(r,n);k==null||k.webContents.send("fs:change",{type:"addDir",path:s})}),Je.on("unlinkDir",n=>{const s=z.relative(r,n);k==null||k.webContents.send("fs:change",{type:"unlinkDir",path:s})}),console.log(" :",r),!0):!1}),C.ipcMain.handle("fs:unwatch",()=>(Je&&(Je.close(),Je=null,console.log(" ")),!0)),C.ipcMain.handle("window:setWidth",(e,t)=>{if(k){const r=k.getBounds();return k.setBounds({...r,width:t}),!0}return!1}),C.ipcMain.handle("app:getVersion",()=>C.app.getVersion()),C.ipcMain.handle("settings:get",()=>ss.store),C.ipcMain.handle("settings:set",(e,t,r)=>(ss.set(t,r),!0)),C.ipcMain.handle("settings:reset",()=>(ss.clear(),!0)),C.ipcMain.handle("vault:syncSettings",async()=>{const e=he.get("vaultPath");if(!e)return!1;try{un(e);const{customSystemPrompt:t,promptTemplates:r,theme:n,fontFamily:s,fontSize:o,defaultFormat:a,smartFormatConversion:i}=ss.store,c={theme:n,fontFamily:s,fontSize:o,defaultFormat:a,smartFormatConversion:i,customSystemPrompt:t,promptTemplates:r},d=z.join(e,".zennote","settings","app_settings.json");return await q.promises.writeFile(d,JSON.stringify(c,null,2),"utf-8"),console.log("  Vault"),!0}catch(t){return console.error(":",t),!1}}),C.ipcMain.handle("vault:loadSettings",async()=>{const e=he.get("vaultPath");if(!e)return null;try{const t=z.join(e,".zennote","settings","app_settings.json"),r=await q.promises.readFile(t,"utf-8"),n=JSON.parse(r);return console.log("  Vault "),n}catch{return null}}),C.ipcMain.handle("vault:saveEngineConfig",async(e,t)=>{const r=he.get("vaultPath");if(!r)return!1;try{un(r);const n=z.join(r,".zennote","engine_config.json");return await q.promises.writeFile(n,JSON.stringify(t,null,2),"utf-8"),console.log("  Vault"),!0}catch(n){return console.error(":",n),!1}}),C.ipcMain.handle("vault:loadEngineConfig",async()=>{const e=he.get("vaultPath");if(!e)return null;try{const t=z.join(e,".zennote","engine_config.json"),r=await q.promises.readFile(t,"utf-8"),n=JSON.parse(r);return console.log("  Vault "),n}catch{return null}}),C.ipcMain.handle("shortcuts:createArticle",()=>(k==null||k.webContents.send("shortcuts:createArticle"),!0)),C.ipcMain.handle("shortcuts:createFolder",()=>(k==null||k.webContents.send("shortcuts:createFolder"),!0)),C.ipcMain.handle("shortcuts:openSettings",()=>(k==null||k.webContents.send("shortcuts:openSettings"),!0)),C.ipcMain.handle("shortcuts:toggleFocusMode",()=>(k==null||k.webContents.send("shortcuts:toggleFocusMode"),!0)),C.ipcMain.handle("menu:changeLanguage",(e,t)=>(Xd(t),Xo(),rf(),!0)),C.ipcMain.handle("menu:syncSmartAutocomplete",(e,t)=>(Zd=t,Xo(),!0)),RN){const e={success:!1,error:"Ollama  App Store  WebLLM  HTTP API  Ollama ",models:[]};C.ipcMain.handle("ollama:listModels",async()=>e),C.ipcMain.handle("ollama:pullModel",async()=>e),C.ipcMain.handle("ollama:cancelPull",async()=>e),C.ipcMain.handle("ollama:deleteModel",async()=>e),console.log(" MAS : Ollama ")}else{const e={...process.env,OLLAMA_HOST:"127.0.0.1:11434"};C.ipcMain.handle("ollama:listModels",async()=>{try{return new Promise(r=>{const n=nn.spawn("ollama",["list"],{env:e});let s="";n.stdout.on("data",o=>{s+=o.toString()}),n.on("close",o=>{if(o===0)try{const i=s.trim().split(`
`).slice(1).map(c=>{const d=c.split(/\s{2,}/);return d.length>=3?{name:d[0],id:d[1],size:d[2],modified:d[3]||""}:null}).filter(c=>c!==null);r({success:!0,models:i})}catch{r({success:!1,error:""})}else r({success:!1,error:""})}),n.on("error",o=>{r({success:!1,error:o.message})})})}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}});const t=new Map;C.ipcMain.handle("ollama:pullModel",async(r,n)=>new Promise((s,o)=>{var c,d;const a=nn.spawn("ollama",["pull",n],{env:e});t.set(n,a);let i="";(c=a.stdout)==null||c.on("data",u=>{const f=u.toString();i+=f,k==null||k.webContents.send("ollama:pullProgress",{model:n,output:f})}),(d=a.stderr)==null||d.on("data",u=>{const f=u.toString();i+=f,k==null||k.webContents.send("ollama:pullProgress",{model:n,output:f})}),a.on("close",u=>{t.delete(n),u===0?s({success:!0,output:i}):o(new Error(`: ${u}`))}),a.on("error",u=>{t.delete(n),o(u)})})),C.ipcMain.handle("ollama:cancelPull",async(r,n)=>{if(n&&t.has(n)){console.log(` : ${n}`),t.get(n).kill("SIGTERM"),t.delete(n);try{nn.spawn("ollama",["rm",n],{env:e}),console.log(` : ${n}`)}catch(o){console.log(":",o)}return{success:!0,cancelled:n}}if(t.size>0){const s=[];return Array.from(t.entries()).forEach(([o,a])=>{console.log(` : ${o}`),a.kill("SIGTERM"),s.push(o);try{nn.spawn("ollama",["rm",o],{env:e}),console.log(` : ${o}`)}catch(i){console.log(":",i)}}),t.clear(),{success:!0,cancelled:s.join(", ")}}return{success:!1,error:""}}),C.ipcMain.handle("ollama:deleteModel",async(r,n)=>new Promise((s,o)=>{const a=nn.spawn("ollama",["rm",n],{env:e});a.on("close",i=>{i===0?s({success:!0}):o(new Error(`: ${i}`))}),a.on("error",i=>o(i))}))}}function Xo(){const e=process.platform==="darwin",t=[...e?[{label:C.app.name,submenu:[{role:"about",label:X("menu.about",{appName:C.app.name})},{type:"separator"},{label:X("menu.preferences"),accelerator:"CmdOrCtrl+,",click:()=>{k==null||k.webContents.send("shortcuts:openSettings")}},{type:"separator"},{role:"services",label:X("menu.services")},{type:"separator"},{role:"hide",label:X("menu.hide",{appName:C.app.name})},{role:"hideOthers",label:X("menu.hideOthers")},{role:"unhide",label:X("menu.unhide")},{type:"separator"},{role:"quit",label:X("menu.quit",{appName:C.app.name})}]}]:[],{label:X("menu.file"),submenu:[{label:X("menu.newArticle"),accelerator:"CmdOrCtrl+N",click:()=>{k==null||k.webContents.send("shortcuts:createArticle")}},{label:X("menu.newFolder"),accelerator:"CmdOrCtrl+Shift+N",click:()=>{k==null||k.webContents.send("shortcuts:createFolder")}},{type:"separator"},e?{role:"close",label:X("menu.closeWindow")}:{role:"quit",label:X("menu.quit",{appName:C.app.name})}]},{label:X("menu.edit"),submenu:[{role:"undo",label:X("menu.undo")},{role:"redo",label:X("menu.redo")},{type:"separator"},{role:"cut",label:X("menu.cut")},{role:"copy",label:X("menu.copy")},{role:"paste",label:X("menu.paste")},...e?[{role:"pasteAndMatchStyle",label:X("menu.pasteAndMatchStyle")},{role:"delete",label:X("menu.delete")},{role:"selectAll",label:X("menu.selectAll")}]:[{role:"delete",label:X("menu.delete")},{type:"separator"},{role:"selectAll",label:X("menu.selectAll")}]]},{label:X("menu.view"),submenu:[{label:X("menu.focusMode"),accelerator:"CmdOrCtrl+Shift+F",click:()=>{k==null||k.webContents.send("shortcuts:toggleFocusMode")}},{label:X("menu.cycleEditorMode"),accelerator:"CmdOrCtrl+E",click:()=>{k==null||k.webContents.send("shortcuts:cycleEditorMode")}},{label:X(Zd?"menu.disableSmartAutocomplete":"menu.enableSmartAutocomplete"),accelerator:"CmdOrCtrl+Shift+A",click:()=>{k==null||k.webContents.send("shortcuts:toggleSmartAutocomplete")}},{type:"separator"},{role:"reload",label:X("menu.reload")},{role:"forceReload",label:X("menu.forceReload")},{role:"toggleDevTools",label:X("menu.devTools")},{type:"separator"},{role:"resetZoom",label:X("menu.actualSize")},{role:"zoomIn",label:X("menu.zoomIn")},{role:"zoomOut",label:X("menu.zoomOut")},{type:"separator"},{role:"togglefullscreen",label:X("menu.fullscreen")}]},{label:X("menu.window"),submenu:[{label:X("menu.showMainWindow"),accelerator:"CmdOrCtrl+1",click:()=>{k?(k.show(),k.focus()):Ts()}},{type:"separator"},{role:"minimize",label:X("menu.minimize")},{role:"zoom",label:X("menu.zoom")},...e?[{type:"separator"},{role:"front",label:X("menu.front")}]:[{role:"close",label:X("menu.close")}]]},{role:"help",label:X("menu.help"),submenu:[{label:X("menu.visitGitHub"),click:async()=>{await C.shell.openExternal("https://github.com/hooosberg/WitNote")}}]}],r=C.Menu.buildFromTemplate(t);C.Menu.setApplicationMenu(r)}function rf(){if(process.platform!=="darwin")return;const e=C.Menu.buildFromTemplate([{label:X("menu.showMainWindow"),click:()=>{k?(k.show(),k.focus()):Ts()}},{type:"separator"},{label:X("menu.newArticle"),click:()=>{k==null||k.webContents.send("shortcuts:createArticle")}},{label:X("menu.newFolder"),click:()=>{k==null||k.webContents.send("shortcuts:createFolder")}},{type:"separator"},{label:X("menu.openSettings"),click:()=>{k==null||k.webContents.send("shortcuts:openSettings")}},{label:X("menu.toggleFocusMode"),click:()=>{k==null||k.webContents.send("shortcuts:toggleFocusMode")}}]);C.app.dock.setMenu(e)}function Ts(){const e=process.platform==="darwin",t={width:1400,height:900,minWidth:400,minHeight:300,hasShadow:!0,webPreferences:{preload:z.join(__dirname,"preload.js"),nodeIntegration:!1,contextIsolation:!0,webSecurity:!0,experimentalFeatures:!0},title:"WitNote"};if(e?Object.assign(t,{vibrancy:"sidebar",visualEffectState:"active",transparent:!0,titleBarStyle:"hiddenInset",trafficLightPosition:{x:20,y:18},frame:!1}):Object.assign(t,{frame:!0,transparent:!1}),k=new C.BrowserWindow(t),Nn)console.log(" : ",Nn),k.loadURL(Nn),k.webContents.openDevTools();else{const r=z.join(C.app.getAppPath(),"dist","index.html");console.log(" : ",r),k.loadFile(r)}k.on("closed",()=>{k=null}),k.webContents.on("did-finish-load",()=>{console.log(" ")})}const AN=C.app.requestSingleInstanceLock();AN?(C.app.on("second-instance",(e,t,r)=>{if(console.log(" :",t),k){k.isMinimized()&&k.restore(),k.focus();for(const n of t.slice(1))if(!n.startsWith("-")&&q.existsSync(n)){const s=z.extname(n).toLowerCase();if(Qd.includes(s)){console.log("  (second-instance):",n),k.webContents.send("open-external-file",n);break}}}}),C.app.whenReady().then(async()=>{C.protocol.handle("local-file",t=>{const r=t.url.replace("local-file://","file://");return console.log(" :",r),C.net.fetch(r)}),console.log("  local-file:// ");const e=ON();Xd(e),console.log(` : ${C.app.getLocale()}  : ${e}`),jN(),Xo(),rf(),Ts(),C.app.on("activate",()=>{k?(k.show(),k.focus()):C.BrowserWindow.getAllWindows().length===0&&Ts()})})):(console.log(" "),C.app.quit());C.app.on("open-file",(e,t)=>{e.preventDefault(),console.log(" macOS open-file :",t),k&&k.webContents?k.webContents.send("open-external-file",t):Jo=t});C.app.on("window-all-closed",()=>{Je&&Je.close(),process.platform!=="darwin"&&C.app.quit()});C.app.on("will-quit",()=>{ct&&(ct(),ct=null,console.log(" "))});console.log(" ...");console.log(" VITE_DEV_SERVER_URL:",Nn||" ()");
